!function n(o,s,r){function a(e,t){if(!s[e]){if(!o[e]){var i="function"==typeof require&&require;if(!t&&i)return i(e,!0);if(d)return d(e,!0);throw(t=new Error("Cannot find module '"+e+"'")).code="MODULE_NOT_FOUND",t}i=s[e]={exports:{}},o[e][0].call(i.exports,function(t){return a(o[e][1][t]||t)},i,i.exports,n,o,s,r)}return s[e].exports}for(var d="function"==typeof require&&require,t=0;t<r.length;t++)a(r[t]);return a}({1:[function(t,e,i){function n(t){document.location.hash.match("debug=1")&&void 0!==t&&console.error(t)}Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t,e){if("consoleLog"in window&&"generic"in window&&"ad_utils"in window&&"custom"in window&&"monitoring"in window.generic&&"document_is_ready"in window.generic)try{t.call(this)}catch(t){void 0!==e&&(t.message=e+" "+t.message),window.ueLogError&&(t.attribution=o,t.logLevel="ERROR",window.ueLogError(t)),n(t.message)}else n(e)};var o=i.UE_LOG_ERROR_ATTRIBUTION="IMDbAdvertisingStaticMedia-doWithAds"},{}],2:[function(t,e,i){var n,t=t("./doWithAds"),o=(t=t)&&t.__esModule?t:{default:t};function s(){window.jQuery&&(clearTimeout(n),window.jQuery(function(){window.generic.document_is_ready()}),window.generic.monitoring.stop_timing("page_load","",!0),window.generic.monitoring.all_events_started())}n=setInterval(function(){return(0,o.default)(s,"No monitoring or document_is_ready object in generic")},50)},{"./doWithAds":1}],3:[function(t,e,i){e.exports="html{box-sizing:border-box}:after,:before,html *{box-sizing:inherit}body{margin:0}.ad,.app{position:relative;display:block;width:100%;height:100%}.ad{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.ad *,.ad :after,.ad :before{-webkit-user-select:inherit;-moz-user-select:inherit;-ms-user-select:inherit;user-select:inherit}.ad,.ad *{z-index:1}.ad>div{position:absolute;width:100%;height:100%;overflow:hidden}graphic>.graphic{opacity:inherit}.graphic>img{position:absolute;top:0;left:0}.graphic>.ad-hover,.graphic>.hover{opacity:0;transition:opacity .15s linear;-moz-transition:opacity .15s linear;-o-transition:opacity .15s linear;-webkit-transition:opacity .15s linear}.app:hover .graphic>.ad-hover,.graphic:hover>.hover{opacity:1}.countdown-number-text{text-align:center}.slider-rotator>.slide-offset{position:relative}.slider-rotator>.slide-offset>.slide{position:relative;display:inline-block;width:100%;height:100%;overflow:hidden}.th-gallery-parent .th-gallery-arrow{cursor:pointer}.th-gallery-parent>.th-gallery-image{opacity:0;transition:opacity .15s linear;-moz-transition:opacity .15s linear;-o-transition:opacity .15s linear;-webkit-transition:opacity .15s linear}.th-gallery-parent>.active{opacity:1}.minimal-video>video{width:100%;height:auto}"},{}],4:[function(t,e,i){e.exports=function(t){var e,n=window.getClickTracker;return parent.ad_design&&parent.ad_design.Uatu&&parent.getClickTracker?(e=parent.ad_design.Uatu,window.Tarnhelm.log("Tarnhelm is using its legacyTrackingConsumer. This behavior is deprecated, and should only happen if your creative template is out of date."),(e=e()).addConsumerCallback(function(t,e,i){t&&((new Image).src=(n||parent.getClickTracker)(t))}),e.addToTrackingMap(t),e.trackingConsumer):(window.Tarnhelm.log("couldn't find Uatu or getClickTracker. This means NOTHING IS BEING TRACKED."),function(){})}},{}],5:[function(t,e,i){t("riot");function n(t,e){this.eventEmitter=t,this.actionRequirements=e}n.prototype={off:function(t){this.eventEmitter.off(t)},on:function(t,e){this.eventEmitter.on(t,e)},one:function(t,e){this.eventEmitter.one(t,e)},trigger:function(t){if(t.requirements&&!this.canFire(t))return!1;var e,i;t.isGlobal?window.Tarnhelm.triggerGlobalAction(t):null!=t.adName?window.Tarnhelm.triggerTandemAction(t):(e=Math.abs(window.parseInt(t.delay,10)||0))?(i=this,window.setTimeout(function(){i.eventEmitter.trigger(t.actionName,t)},e)):this.eventEmitter.trigger(t.actionName,t)},triggerMany:function(t){for(var e=0;e<t.length;e++)this.trigger(t[e])},canFire:function(t){return!!this.actionRequirements.areMet(t)||(window.Tarnhelm.log("An action's requirements were not met ::",t.requirements,t),!1)}},e.exports=n},{riot:120}],6:[function(t,e,i){var r=t("../renderer/stores/ad.js"),a=t("./actionHandler.js"),d=t("./eventEmitter.js"),l=t("./externalTriggerHandler.js"),u=t("./linkHandler.js"),c=t("./scrollActionHandler"),h=t("./externalFunctionHandler.js"),p=t("./logHandler.js"),m=t("./videoActionHandler.js"),f=t("./backwardsCompatibilityProcessor.js"),g=t("./checkAdParentCompliance.js"),v=t("./rectProcessor.js"),_=(t("../renderer/stores/retrievers/scale.js"),t("./events/adEvent.js"));e.exports=function(t){var i={};if(t.adData=f.process(t.adData),t.adData.rect&&delete t.adData.rect,i.id=t.adData.id,i.name=t.adData.name,i.domNode=t.domNode,i.containerFrame=t.containerFrame,i.initTime=(new Date).getTime(),i.trackingConsumer="function"==typeof t.trackingConsumer?t.trackingConsumer:null,i.requirementsTester=window.Tarnhelm.getRequirementsTester(),i.actionHandler=new a(new d,i.requirementsTester),t.eventSinks)for(var e=0;e<t.eventSinks.length;e++)t.eventSinks[e].registerAdActionHandler(i.name,i.actionHandler);i.actionHandler.on("resize-ad-container",function(t){t&&t.data&&t.data.rect&&o(t.data.rect)});var n={adHeight:i.domNode.offsetHeight,adWidth:i.domNode.offsetWidth};function o(t){i.containerFrame&&(t=v.process(t),v.setElRectStyle(i.containerFrame,t))}function s(){var t,e;i.adStore.requiresAutoplay()&&(t=window.ad_utils&&window.ad_utils.fp?window.ad_utils.fp:void 0)&&t.should_autoplay(i.id)&&(e=i.adStore.getFrequencyCappedInitActions(),i.actionHandler.triggerMany(e),t.log_autoplay(i.id))}return t.adData.isScalable&&150===n.adHeight&&300===n.adWidth&&window.Tarnhelm.log("Warning: Ad is set to `isScalable`, but its iframe does not have a width dimension set. Ad will be 300px wide on init."),i.adStore=new r(t.adData,i.actionHandler,n),i.linkHandler=new u(t.adData.defaultLink,i.actionHandler),t.adData.externalTriggerActions&&(i.externalTriggerHandler=new l(t.adData.externalTriggerActions,i.actionHandler)),p.listen(i.actionHandler),h.listen(i.actionHandler,i.containerFrame),m.listen(i.actionHandler,i.adStore),i.scrollActionHandler=new c(i.actionHandler),{getId:function(){return i.id},getName:function(){return i.name},getDomNode:function(){return i.domNode},getContainerFrame:function(){return i.containerFrame},getActionHandler:function(){return i.actionHandler},getAdStore:function(){return i.adStore},getInitTime:function(){return i.initTime},getTrackingConsumer:function(){return i.trackingConsumer},timeSinceInit:function(t){return(t=t||(new Date).getTime())-i.initTime},resizeAdContainer:o,minimize:function(){i.actionHandler.trigger({actionName:"minimize-ad"})},maximize:function(){i.actionHandler.trigger({actionName:"maximize-ad"})},initAfterMount:function(){var t=i.adStore.getState();this.initted||(this.initted=!0,o(i.adStore.getState().frameProperties),g.check(this),t.actions&&t.actions.init&&t.actions.init.length&&i.actionHandler.triggerMany(t.actions.init),s(),i.actionHandler.trigger({actionName:_.DISPLAYED}))}}}},{"../renderer/stores/ad.js":70,"../renderer/stores/retrievers/scale.js":80,"./actionHandler.js":5,"./backwardsCompatibilityProcessor.js":7,"./checkAdParentCompliance.js":8,"./eventEmitter.js":11,"./events/adEvent.js":12,"./externalFunctionHandler.js":15,"./externalTriggerHandler.js":16,"./linkHandler.js":19,"./logHandler.js":20,"./rectProcessor.js":24,"./scrollActionHandler":26,"./videoActionHandler.js":30}],7:[function(t,e,i){e.exports={process:function(t){var e,i="Ad schema not up to date! ["+t.name+"] :: ",n=!!t.rect,o=!!t.frameProperties,s=o&&!!t.frameProperties.rect,r=!1;return n&&!o?(r=!0,e={width:t.rect.width,height:t.rect.height},t.frameProperties=e):n||(o&&s?(r=!0,e={width:t.frameProperties.rect.width,height:t.frameProperties.rect.height},t.frameProperties=e):o||s||(window.Tarnhelm.log(i+"Bad dimensions config, please update immediately."),t.frameProperties={width:0,height:0})),r&&window.Tarnhelm.log(i+"Please update ad's frameProperties and ad.rect schema."),t}}},{}],8:[function(t,e,i){e.exports={check:function(t){var e,i="Ad ["+t.getAdStore().getState().name+"] may not render properly! ",n=(this.hasAdContainerParent(t)?(e=this.getAdContainerParent(t),e=window.getComputedStyle(e),n=new RegExp(/relative|absolute/),o=new RegExp(/(inline\-|)block/),n.test(e.position)||window.Tarnhelm.log(i+' iframe.parentNode must be set to  position "relative" or "absolute".'),"visible"!==e.overflow&&window.Tarnhelm.log(i+"iframe.parentNode is not set to overflow: visible;"),"relative"!==e.position||o.test(e.display)||window.Tarnhelm.log(i+'iframe.parentNode is set to position "relative", so it must also be set to display "block" or "inline-block".'),""===e.width&&window.Tarnhelm.log(i+"iframe.parentNode requires an explicit width."),""===e.height&&window.Tarnhelm.log(i+"iframe.parentNode requires an explicit height.")):window.Tarnhelm.log(i+"Incorrect context for Tarnhelm iframe: Ad iframe does not have an iframeNode.parentNode"),t.getContainerFrame()),o=window.getComputedStyle(n);""===o.top&&""===o.bottom&&""===o.left&&""===o.right&&window.Tarnhelm.log(i+"iframe has no positioning values.")},hasAdContainerParent:function(t){return t.getContainerFrame()&&t.getContainerFrame().parentNode},getAdContainerParent:function(t){return t.getContainerFrame().parentNode}}},{}],9:[function(t,e,i){function n(t){var e="number"==typeof t?new Date(t):Date.parse(t);isNaN(e)?(window.Tarnhelm.log('Bad date string "'+t+'", setting CountdownTimer to NOW to avoid errors'),this.targetDate=new Date):this.targetDate=new Date(t),o.observable(this),this.tick(),this.start()}var o=t("riot");t("../tarnhelm.js");n.prototype={getMillisecondsRemaining:function(){var t=this.targetDate.valueOf()-window.Tarnhelm.getNowTime();return 0<t?t:0},start:function(){window.clearInterval(this.interval),this.boundTick=this.tick.bind(this),this.interval=window.setInterval(this.boundTick,1e3)},stop:function(){window.clearInterval(this.interval),delete this.boundTick},tick:function(){var t=this.getRemainingValues(this.getMillisecondsRemaining());this.trigger("tick",t),t.totalMs||(this.stop(),this.trigger("end"))},getRemainingValues:function(t){var e={days:0,hours:0,minutes:0,seconds:0,totalMs:0};return 0!==t&&(e.totalMs=t,e.days=Math.floor(t/864e5),t-=864e5*e.days,e.hours=Math.floor(t/36e5),t-=36e5*e.hours,e.minutes=Math.floor(t/6e4),t-=6e4*e.minutes,e.seconds=Math.floor(t/1e3)),e}},e.exports=n},{"../tarnhelm.js":83,riot:120}],10:[function(t,e,i){var n=/^http(s)?\:\/\/m\.(.*\.)?imdb\.com/,s=/(Android|OS|Windows Phone) (\d+)[\._](\d+)[\._]?(\d+)?/,r=/Android (\d{2,})/,o=/iP(hone|ad|od)/,a=/Version\/[\d\.]+.*Safari/,d="Chrome/",l=/(Chrome|Safari|MSIE|Firefox)/,u=/(SamsungBrowser|Galaxy Nexus Build|iPhone OS 8|iPhone OS 7)/;function c(t,e){this.userAgentString=e,this.url=t,this._calculate()}c.prototype={getInfo:function(){return this.deviceInfo},_calculate:function(){var t=this._isWindowsDevice(this.userAgentString),e=this._isIOSDevice(this.userAgentString),i=this._isAndroidDevice(this.userAgentString),n=t||e||i,o=this._isIMDbApp(this.userAgentString),s=this._isSafari(this.userAgentString),r=this._getMobilePlatformVersion(this.userAgentString,o,i),a=!n||this._hasMobileTransitionTransformSupport(this.userAgentString,o,i,r);this.deviceInfo={isWindowsDevice:t,isSafari:s,isIOSDevice:!t&&e,isAndroidDevice:!t&&i,isMobileDevice:n,isMobileSite:this._isMobileSite(this.url),isIMDbApp:o,hasTouch:this._hasTouch(document),canAutoplay:this._canAutoplay(r,o,i,e,n),canFullscreen:this._canFullscreen(document),mobilePlatformVersion:r,canTransitionTransforms:a}},_isWindowsDevice:function(t){return-1<t.indexOf("Windows Phone")},_isIOSDevice:function(t){return-1<t.search(o)},_isSafari:function(t){return-1<t.search(a)},_isAndroidDevice:function(t){return-1<t.indexOf("Android")},_isMobileSite:function(t){return-1<t.search(n)},_isIMDbApp:function(t){return-1<t.indexOf("IMDb-flg")},_hasTouch:function(t){return"ontouchstart"in t},_getChromeVersion:function(t){if(-1!==t.indexOf(d))return parseInt(t.substr(t.indexOf(d)+d.length,2),10);window.Tarnhelm.log("Attempted to get chrome version string of non chrome userAgentString")},_getMobilePlatformVersion:function(t,e,i){var n={},o=t.match(s);return o&&0<o.length&&(n.major=parseInt(o[2],10)||0,n.minor=parseInt(o[3],10)||0,n.patch=parseInt(o[4],10)||0),e&&i&&((o=t.match(r))&&0<o.length?n.androidAPI=parseInt(o[1],10)||0:n.androidAPI=0),n},_canAutoplay:function(t,e,i,n,o){return e?i?17<=t.androidAPI||4<=t.major&&!(4===t.major&&t.minor<2):!!(n&&4<=t.major):!o},_canFullscreen:function(t){return t.fullscreenEnabled||t.webkitFullscreenEnabled||t.msFullscreenEnabled||t.mozFullscreenEnabled},_hasMobileTransitionTransformSupport:function(t,e,i,n){i=!i&&n.major<9;if(e)return!i;if(u.test(t)||!l.test(t))return!1;if(-1!==t.indexOf(d)){n=this._getChromeVersion(t);if(!Number.isNaN(n)&&n<46)return!1}return!0}},e.exports=c},{}],11:[function(t,e,i){var n=t("riot");e.exports=function(){n.observable(this)}},{riot:120}],12:[function(t,e,i){e.exports={DISPLAYED:"ad:displayed",ASSET_PRELOAD_START:"ad:asset-preload-start",ASSET_PRELOAD_FINISH:"ad:asset-preload-finish",ASSET_PRELOAD_TIMEOUT:"ad:asset-preload-timeout",VIDEO_FAILURE:"ad:video-failure",VIDEO_LOADED:"ad:video-loaded"}},{}],13:[function(t,e,i){function n(t){this.topActionHandler=t,this.registerTopActionHandler();var e=this;this.topActionHandler.on("fireDeferredMetrics",function(){e.fireDeferredMetrics()})}var o=t("./tarnhelmEvent.js"),s=t("./adEvent.js"),r=[];function a(t){r.push({fired:!1,fn:t})}function d(t,e){window.premiumAdMetrics&&window.premiumAdMetrics.initCounter?(window.Tarnhelm.log("initializing counter for "+t+"_"+e,Date.now()),window.premiumAdMetrics.initCounter(t,e)):(window.Tarnhelm.log("deferring counter initialization for "+t+"_"+e,Date.now()),a(function(){window.premiumAdMetrics&&"function"==typeof window.premiumAdMetrics.initCounter&&window.premiumAdMetrics.initCounter(t,e)}))}function l(t,e){window.premiumAdMetrics&&window.premiumAdMetrics.recordCounter?(window.Tarnhelm.log("logging counter for "+t+"_"+e,Date.now()),window.premiumAdMetrics.recordCounter(t,e)):(window.Tarnhelm.log("deferring counter for "+t+"_"+e,Date.now()),a(function(){window.premiumAdMetrics.recordCounter(t,e)}))}function u(t,e){var i=window.IMDbTimer?Date.now()-window.IMDbTimer.starttime:-1;-1==i?window.Tarnhelm.log("no timer baseline present to log timed event for "+t+"_"+e,Date.now()):window.premiumAdMetrics&&window.premiumAdMetrics.recordLatency?(window.Tarnhelm.log("logging timed event for "+t+"_"+e,Date.now()),window.premiumAdMetrics.recordLatency(t,e,i)):(window.Tarnhelm.log("deferring timed event for "+t+"_"+e,Date.now()),a(function(){window.premiumAdMetrics.recordLatency(t,e,i)}))}n.prototype={registerTopActionHandler:function(){this.topActionHandler.on(o.READY,function(){u("tarnhelm","start")}),this.topActionHandler.on(o.INIT_FAILURE,function(){u("tarnhelm","initFailure")}),d("creative","abort"),this.topActionHandler.on(o.MPTP_ABORT,function(){l("creative","abort")}),d("tarnhelm","error"),this.topActionHandler.on(o.ERROR,function(){l("tarnhelm","error")}),d("creative","transitionSuccess"),this.topActionHandler.on(o.MPTP_TRANSITION,function(){l("creative","transitionSuccess")}),d("creative","transitionFailure"),this.topActionHandler.on(o.MPTP_TRANSITION_FAILURE,function(){l("creative","transitionFailure")})},registerAdActionHandler:function(t,e){e.on(s.ASSET_PRELOAD_START,function(){u("tarnhelm","preloadStart")}),e.on(s.ASSET_PRELOAD_FINISH,function(){u("tarnhelm","preloadFinish")}),e.on(s.ASSET_PRELOAD_TIMEOUT,function(){u("tarnhelm","preloadTimeout")}),e.on(s.DISPLAYED,function(){u("tarnhelm","creativeDisplayed")}),d("tarnhelm","videoFailure"),e.on(s.VIDEO_FAILURE,function(){l("tarnhelm","videoFailure")}),e.on(o.RECORD_LATENCY,function(t){var e,i,n;e="tarnhelm",i=t.metricName,n=t.milliseconds,window.premiumAdMetrics&&window.premiumAdMetrics.recordLatency?(window.Tarnhelm.log("logging pre-calculated latency for "+e+"_"+i,Date.now()),window.premiumAdMetrics.recordLatency(e,i,n)):(window.Tarnhelm.log("deferring pre-calculated latency for "+e+"_"+i,Date.now()),a(function(){window.premiumAdMetrics.recordLatency(e,i,n)}))})},fireDeferredMetrics:function(){r.forEach(function(t){t.fired||(t.fn(),t.fired=!0)})}},e.exports=n},{"./adEvent.js":12,"./tarnhelmEvent.js":14}],14:[function(t,e,i){e.exports={READY:"tarnhelm:system-init",ERROR:"tarnhelm:error",INIT_FAILURE:"tarnhelm:init-failure",MPTP_ABORT:"tarnhelm:mptp-abort",MPTP_TRANSITION:"tarnhelm:mptp-transition",MPTP_TRANSITION_FAILURE:"tarnhelm:mptp-transition-failure",RECORD_LATENCY:"tarnhelm:record-latency"}},{}],15:[function(t,e,i){e.exports={listen:function(t,e){var i=this,n=e.contentWindow;t.on("call-external-function",function(t){i.callExternalFunction(n,t)})},callExternalFunction:function(t,e){var i,n=e.data.functionName,o=e.data.arguments||[],t=this.getFunctionContext(t,e),t=this.isNested(n)?(i=this.getFunctionThisArg(e,t),this.getNestedFunction(n,t)):(i=t)[n];"function"!=typeof t?this.logErrorMessage(t,e):"object"!=typeof i?this.logThisArgErrorMessage(i,e):t.apply(i,o)},getFunctionThisArg:function(t,e){var i=t.data.functionName,t=(t=t.data.thisArgName)||i.substr(0,i.lastIndexOf("."));return this.nestReduce(t.split("."),e)},getFunctionContext:function(t,e){return"top"===e.data.context?window.top:t},isNested:function(t){return-1!==t.indexOf(".")},getNestedFunction:function(t,e){return this.nestReduce(t.split("."),e)},nestReduce:function(t,e){return t.reduce(function(t,e,i,n){if(t)return t[e]},e)},logErrorMessage:function(t,e){var i="";i+=null==t?"Function does not exist":e.data.functionName+" is not a function",this.logError(i,e)},logThisArgErrorMessage:function(t,e){var i="";i+=null==t?"Provided thisArg does not exist":e.data.thisArgName+" is not an object",this.logError(i,e)},logError:function(t,e){t+=' in "'+e.data.context+'" context. ',window.Tarnhelm.log('Failed to call external function "'+e.data.functionName+'".',t)}}},{}],16:[function(t,e,i){e.exports=function(t,e){var i=this;i.actionMap=t,e.on("handle-external-trigger",function(t){t.data.triggerName&&i.actionMap[t.data.triggerName]&&e.triggerMany(i.actionMap[t.data.triggerName])})}},{}],17:[function(t,e,i){e.exports={throttle:function(i,n){function o(){a=Date.now(),d=null,i.apply(s,r)}var s,r,a=0,d=null;return function(){var t=Date.now(),e=n-(t-a);s=this,r=arguments,e<=0||n<e?(d&&(clearTimeout(d),d=null),a=t,i.apply(s,r)):d=d||setTimeout(o,e)}},debounce:function(e,i){var n,o,s,r=0,a=null;function d(){var t=Date.now()-r;t<i?a=setTimeout(d,i-t):(a=null,s=e.apply(n,o))}return function(){return n=this,o=arguments,r=Date.now(),a=a||setTimeout(d,i),s}}}},{}],18:[function(t,e,i){e.exports={beforeNode:function(t,e){var i=document.createElement("style");i.type="text/css",i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t)),e.parentNode.insertBefore(i,e)}}},{}],19:[function(t,e,i){function n(t,e){var i=this;this.defaultLink=t,(this.actionHandler=e).on("open-link",function(t){i.handleLinkAction(t)}),e.on("open-default-link",function(t){i.defaultLink?i.handleLinkAction(t):window.Tarnhelm.log('No defaultLink for the "open-default-link" action.')})}n.prototype={pauseVideos:function(){this.actionHandler.trigger({actionName:"video:pause-all"})},handleLinkAction:function(t){var e=this.defaultLink,i=!1;t.data&&(e=t.data.url||e,i=!!t.data.sameWindow),i?window.top.location.href=e:window.open(e)}},e.exports=n},{}],20:[function(t,e,i){e.exports={listen:function(t){t.on("log",function(t){window.Tarnhelm.log(t.message)})}}},{}],21:[function(t,e,i){function n(t){this.injectEl=t,this.init(),this.minimize()}n.prototype={dimensions:{minimize:40,logHeight:150},init:function(){this.containerEl=this.getContainerEl(),this.logEl=this.getLogEl(),this.containerEl.appendChild(this.logEl),this.minimizeButton=this.getMinimizeButton(),this.containerEl.appendChild(this.minimizeButton),this.injectEl.appendChild(this.containerEl),this.log(" = Tarnhelm - Mobile Debug Mode = ")},log:function(t){Array.isArray(t)||(t=[t]);t=this.makeLine(t);this.logEl.appendChild(t),this.logEl.scrollTop=this.logEl.scrollHeight},makeLine:function(t){var e=document.createElement("p");e.style.cssText="margin:0 0 0.25em 0; border-bottom: thin solid rgba(255,255,255,0.25);",e.textContent="";for(var i=0;i<t.length;i++){var n=t[i],o="";n?"string"==typeof n?o=n:"function"==typeof n.toString&&(o=n.toString()):o="undefined",i<t.length-1&&(o+=", "),e.textContent+=o}return e},getContainerEl:function(){return this._makeEl("mobile-log-container",["position: fixed","bottom:0","left:0","display: block","width: 100%","overflow: visible","height: 80%","max-height: "+this.dimensions.logHeight+"px","z-index: 1986",""].join(";"))},getLogEl:function(){return this._makeEl("mobile-log",["position: absolute","top:0","display: block","width: 100%","height: 100%","z-index: 1986","color: rgb(0, 255, 0)","font-family: courier","background-color: rgba(0,0,0,0.8)","overflow: scroll",""].join(";"))},getMinimizeButton:function(){var t=this.dimensions.minimize+"px",t=this._makeEl("mobile-log-minimize-button",["position:absolute","right: 0","top: -"+t,"display: block","background: rgba(0,0,0,0.8)","color: rgb(0, 255, 0)","width:"+t,"height:"+t,"font-size: 24px","line-height: 20px","cursor:pointer","text-align:center"].join(";"));return t.textContent="_",t.onclick=this.minimizeButtonClick.bind(this),t},_makeEl:function(t,e){var i=document.createElement("div");return i.id=t,i.style.cssText=e,i},minimizeButtonClick:function(){this.isMinimized?this.unminimize():this.minimize()},minimize:function(){this.isMinimized=!0,this.containerEl.style.height=0,this.minimizeButton.textContent="^"},unminimize:function(){this.isMinimized=!1,this.containerEl.style.height="80%",this.minimizeButton.textContent="_"}},e.exports=n},{}],22:[function(t,e,i){e.exports={sameSign:function(t,e){return 0<=t&&0<=e||t<=0&&e<=0},avg:function(t){return 0===t.length?0:t.reduce(function(t,e){return t+e})/t.length},clamp:function(t,e,i){return Math.max(e,Math.min(i,t))},getEllipseFalloff:function(t,e){t=this.clamp(t,0,e),t=Math.sqrt(1-Math.pow(t,2)/Math.pow(e,2));return this.clamp(t,0,1)}}},{}],23:[function(t,e,i){e.exports={clone:function(t){return JSON.parse(JSON.stringify(t))},shallowMerge:function(t,e){this._doMerge(t,e,!0)},shallowMergeMany:function(t,e){for(var i=Object.keys(e),n=0;n<i.length;n++){var o=i[n];t[o]||(t[o]={}),this.shallowMerge(t[o],e[o])}},_doMerge:function(t,e,i){if(this.isObject(t)&&this.isObject(e))for(var n=Object.keys(e),o=0;o<n.length;o++){var s,r=n[o];(i||null==t[r])&&(s="object"===e[r]?this.clone(e[r]):e[r],t[r]=s)}else window.Tarnhelm.log("Object merge operation failed, both params must be objects:"),window.Tarnhelm.log(t),window.Tarnhelm.log(e)},mergeDefaults:function(t,e){e=this.clone(e);this._doMerge(t,e,!1)},isObject:function(t){return"object"==typeof t&&!Array.isArray(t)&&null!==t},getProperty:function(t,e){if(t&&e){for(var i=e.split("."),n=t,o=0;o<i.length;o++){if(void 0===n[i[o]])return;n=n[i[o]]}return n}}}},{}],24:[function(t,e,i){var n=t("../renderer/stores/retrievers/scale.js");e.exports={defaults:{position:"absolute",anchorX:"left",offsetX:0,anchorY:"top",offsetY:0,width:"auto",height:"auto"},setElRectStyle:function(t,e){var i=t.style;["top","right","bottom","left"].forEach(function(t){i.removeProperty(t)}),i.position=e.position,i[e.anchorX]=e.offsetX,i[e.anchorY]=e.offsetY,i.height=e.height,i.width=e.width},process:function(t){t=t||{};return{position:this.determinePositioning(t.position),anchorX:this.determineAnchorX(t.anchorX),offsetX:this.getDimensionWithUnit(t.offsetX,this.defaults.offsetX),anchorY:this.determineAnchorY(t.anchorY),offsetY:this.getDimensionWithUnit(t.offsetY,this.defaults.offsetY),width:this.getDimensionWithUnit(t.width,this.defaults.width),height:this.getDimensionWithUnit(t.height,this.defaults.height)}},determinePositioning:function(t){return null!=t&&t.match(/absolute|relative|fixed|static|inherit/)?t:this.defaults.position},determineAnchorX:function(t){switch(t){case"right":return"right";case"left":return"left";default:return null!=t&&window.Tarnhelm.log("Bad anchorX position configured."),this.defaults.anchorX}},determineAnchorY:function(t){switch(t){case"bottom":return"bottom";case"top":return"top";default:return null!=t&&window.Tarnhelm.log("Bad anchorY position configured."),this.defaults.anchorY}},getDimensionWithUnit:function(t,e){return null==t?e:n.getDimensionWithUnit(t)}}},{"../renderer/stores/retrievers/scale.js":80}],25:[function(t,e,i){function n(t){this.requirementFlags=this.buildFlags(t)}var o={canAutoplay:1,hasTouch:1,canFullscreen:1};n.prototype={areMet:function(t){var e=t.requirements||{},i=Object.keys(e);return 0===i.length||(this.areValidRequirements(i)?this.testRequirements(e):(window.Tarnhelm.log("Invalid requirement(s) found on an item ::",t.requirements," :: Full item :: ",t),!1))},testRequirements:function(t){for(var e=Object.keys(t),i=0;i<e.length;i++){var n=e[i],o=t[n];if(this.requirementFlags[n]!==o)return!1}return!0},buildFlags:function(t){return{canAutoplay:t.canAutoplay,hasTouch:t.hasTouch,canFullscreen:t.canFullscreen}},areValidRequirements:function(t){for(var e=0;e<t.length;e++)if(!this.isValidRequirement(t[e]))return!1;return!0},isValidRequirement:function(t){return!!o[t]}},e.exports=n},{}],26:[function(t,e,i){e.exports=function(t){var e,i;function n(){e=0===window.scrollY?(window.cancelAnimationFrame(e),null):(window.scrollBy(0,i),window.requestAnimationFrame(n))}t.on("jump-to-top",function(t){0<window.scrollY&&(window.scroll(0,0),window.Tarnhelm.log("window jump-to-top requested."))}),t.on("scroll-to-top",function(t){0<window.scrollY&&(window.Tarnhelm.log("window scroll-to-top requested."),t=t.duration||100,i=-window.scrollY/(t/17),e=window.requestAnimationFrame(n))})}},{}],27:[function(t,e,i){function n(t){this.firstPos=this.getPosFromEvent(t),this.handledFirstMove=!1,this.currPos=this.getPosFromEvent(t),this.prevPos=this.getPosFromEvent(t),this.velocity={x:0,y:0},this.totalDistance={x:0,y:0},this.currMoveDistance={x:0,y:0},this.debouncedVelocityDecay=s.debounce(this.velocityDecay.bind(this),50),this.transitionLengthFactor=1,this.touchEnded=!1,this.isTouchTypeDetermined=!1,this.isHorizontalMove=!1,this.isVerticalMove=!1,this.isSwipe=!1}var o=t("./numberUtils.js"),s=(t("./objectUtils.js"),t("./functionUtils.js"));n.prototype={addTouchMoveData:function(t){this.prevPos=this.currPos,this.currPos=this.getPosFromEvent(t),this.currMoveDistance=this.getTouchMoveDifference(this.prevPos,this.currPos),this.totalDistance=this.getNewTotalDistance(this.totalDistance,this.currMoveDistance),this.velocity=this.getNewVelocity(this.velocity,this.currMoveDistance),this.debouncedVelocityDecay(),this.determineTouchType(this.totalDistance,this.velocity)},finalizeTouchDataOnEnd:function(t){this.touchEnded=!0,this.isSwipe=this.touchTestSwipe(this.velocity),this.transitionLengthFactor=this.getTransitionLengthFactor(this.velocity.x)},getPosFromEvent:function(t){return{x:t.touches[0].clientX,y:t.touches[0].clientY}},getTouchMoveDifference:function(t,e){return{x:e.x-t.x,y:e.y-t.y}},getNewTotalDistance:function(t,e){return{x:t.x+e.x,y:t.y+e.y}},getNewVelocity:function(t,e){return{x:this._adjustVelocity(t.x,e.x),y:this._adjustVelocity(t.y,e.y)}},getTransitionLengthFactor:function(t){t=o.getEllipseFalloff(Math.abs(t),100);return o.clamp(t,.2,1)},velocityDecay:function(){this.touchEnded||(this.velocity.x=0,this.velocity.y=0,this.currMoveDistance.x=0,this.currMoveDistance.y=0,this.isSwipe=!1)},_adjustVelocity:function(t,e){t=o.sameSign(t,e)?t:0;return o.avg([t,e])},determineTouchType:function(t,e){this.isSwipe||(this.isSwipe=this.touchTestSwipe(e)),!this.isVerticalMove&&!this.isHorizontalMove&&(this.isVerticalMove=this.touchTestVertical(t),this.isVerticalMove||(this.isHorizontalMove=this.touchTestHorizontal(t),this.isHorizontalMove))&&(this.isTouchTypeDetermined=!0)},touchTestHorizontal:function(t){return 10<=Math.abs(t.x)},touchTestVertical:function(t){return 7.5<=Math.abs(t.y)},touchTestSwipe:function(t){return 5<Math.abs(t.x)}},e.exports=n},{"./functionUtils.js":17,"./numberUtils.js":22,"./objectUtils.js":23}],28:[function(t,e,i){var u={opacity:"opacity",translate:"transform",translateX:"transform",translateY:"transform",rotate:"transform",scale:"transform",scaleX:"transform",scaleY:"transform",blur:"filter",brightness:"filter",contrast:"filter",grayscale:"filter",saturate:"filter"},o={filter:["-webkit-filter","-moz-filter","-o-filter"]};e.exports={isValidTransitionType:function(t){return"string"==typeof t&&!!u[t]},getTransitionSegment:function(t){return this.getTransitionSegmentForProperty(t,u[t.type])},getPrefixedTransitionSegments:function(t){for(var e=[],i=(e.push(this.getTransitionSegment(t)),o[u[t.type]]),n=0;n<i.length;n++)e.push(this.getTransitionSegmentForProperty(t,i[n]));return e},getTransitionSegmentForProperty:function(t,e){var i=[];return e&&i.push(e),t.duration&&i.push(t.duration),t.easing&&i.push(t.easing),t.delay&&i.push(t.delay),i.join(" ")},getCSSFunctionSegment:function(t,e){return t+"("+e+")"},calculateTransitionStyles:function(t){for(var e={start:{},end:{}},i=[],n=[],o=[],s=[],r=[],a=0;a<t.length;a++){var d,l=t[a];if(this.isValidTransitionType(l.type))switch(u[l.type]){case"transform":n.length||i.push(this.getTransitionSegment(l)),n.push(this.getCSSFunctionSegment(l.type,l.startValue)),o.push(this.getCSSFunctionSegment(l.type,l.endValue));break;case"opacity":e.start[l.type]=l.startValue,e.end[l.type]=l.endValue,i.push(this.getTransitionSegment(l));break;case"filter":s.length||(d=this.getPrefixedTransitionSegments(l),i=i.concat(d)),s.push(this.getCSSFunctionSegment(l.type,l.startValue)),r.push(this.getCSSFunctionSegment(l.type,l.endValue))}}return i.length&&(e.start.transition=i.join(",")),n.length&&(e.start.transform=n.join(" ")),o.length&&(e.end.transform=o.join(" ")),s.length&&(e.start.filter=s.join(" ")),r.length&&(e.end.filter=r.join(" ")),e},getTransitionTime:function(t){var e=parseFloat(t.duration)||0,t=parseFloat(t.delay)||0;return Math.floor(1e3*(e+t))},getMaxTransitionTime:function(t){for(var e=0,i=0;i<t.length;i++){var n=this.getTransitionTime(t[i]);e<n&&(e=n)}return e}}},{}],29:[function(t,e,i){e.exports={getQueryParam:function(t,e){t=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);return t?t[1]:""},preloadUrl:function(t,e){var i=new Image;"function"==typeof e&&(i.onload=e),i.src=t},preloadUrls:function(t){if(t&&t.length)for(var e=0;e<t.length;e++)this.preloadUrl(t[e])},preloadUrlsWithCallback:function(t,e){var i=0,n=!1;if(t&&t.length)for(var o=window.setTimeout(function(){window.Tarnhelm.log("Only "+i+" of "+t.length+" preloaded before timeout. Preload assets failed to load before the timeout, triggering callback."),r(!0)},3e3),s=0;s<t.length;s++)this.preloadUrl(t[s],a);else e(!1);function r(t){n||(n=!0,e(t))}function a(){++i===t.length&&(window.Tarnhelm.log(i+" of "+t.length+" images have preloaded"),window.clearTimeout(o),r(!1))}}}},{}],30:[function(t,e,i){var d=t("../renderer/stores/retrievers/component.js");e.exports={videoActions:["video:play","video:pause","video:reset","video:mute","video:unmute","video:fullscreen","video:normalscreen"],listen:function(i,t){var n=this,o=(i.on(this.videoActions.join(" "),function(t,e){n.triggerVideoAction(i,e.actionName,e.componentName,e.userInitiated)}),t.getComponentLibrary()),s=t.getComponentNamesByCategory("video"),t=this.videoActions.map(function(t){return t+"-all:under-ancestor"});i.on(t.join(" "),function(t,e){t=t.split(":")[1].split("-")[0];n.triggerVideoActionUnderAncestor(i,"video:"+t,e.ancestorName,o,s,e.userInitiated)})},triggerVideoAction:function(t,e,i,n){t.trigger({actionName:e+":"+i,userInitiated:void 0===n||n})},triggerVideoActionUnderAncestor:function(t,e,i,n,o,s){if(i)for(var r=0;r<o.length;r++){var a=o[r];d.hasAncestorOfName(a,i,n)&&this.triggerVideoAction(t,e,a,s)}else window.Tarnhelm.log(e+"-all:under-ancestor actions require ancestorName property.")}}},{"../renderer/stores/retrievers/component.js":76}],31:[function(t,e,i){e.exports=function(i,t){var n,e=this;this.setWrap=function(t){n||((e=document.getElementById(i))||window.Tarnhelm.log("Invalid element id set on wrapSwapper."),n=e),e="",(t=t).source&&(e=(e=(e=(e+="url("+t.source+") ")+(t.position?t.position+" ":"center top "))+(t.repeat?t.repeat+" ":"no-repeat "))+(t.attachment?t.attachment+" ":"scroll "));var e,t=e+=t.color;n.style.background=t},t.on("set-wrap-background",function(t){e.setWrap(t.data)})}},{}],32:[function(e,t,i){var n,o;n=this,o=function(t){e("./mixins/action.js"),e("./mixins/action-user.js"),e("./mixins/action-touch.js"),e("./mixins/action-swipe.js"),e("./mixins/action-transitions.js"),e("./mixins/action-cuepoint.js"),e("./mixins/background.js"),e("./mixins/base.js"),e("./mixins/media-interop.js"),e("./mixins/rect.js"),e("./mixins/resize.js"),e("./mixins/rotator.js"),e("./mixins/styles.js"),e("./mixins/teardown.js"),e("./mixins/transitions.js"),e("./mixins/video.js"),e("./mixins/weblab.js"),e("./mixins/zoolander.js"),e("./components/ad.tag"),t.tag("app",'<ad data="{adData}"></ad>','class="app"',function(t){this._adInstance=this.opts.adInstance,this.adData=this._adInstance.getAdStore().getState();var e=this;this._adInstance.getActionHandler().on("ad-state-updated",function(){e.adData=e._adInstance.getAdStore().getState(),e.update()})})},"function"==typeof define&&void 0!==define.amd?define(["riot"],function(t){o(t)}):void 0!==t&&void 0!==t.exports?(t=e("riot"),o(t)):o(n.riot)},{"./components/ad.tag":33,"./mixins/action-cuepoint.js":51,"./mixins/action-swipe.js":52,"./mixins/action-touch.js":53,"./mixins/action-transitions.js":54,"./mixins/action-user.js":55,"./mixins/action.js":56,"./mixins/background.js":57,"./mixins/base.js":58,"./mixins/media-interop.js":59,"./mixins/rect.js":60,"./mixins/resize.js":61,"./mixins/rotator.js":62,"./mixins/styles.js":63,"./mixins/teardown.js":64,"./mixins/transitions.js":65,"./mixins/video.js":66,"./mixins/weblab.js":67,"./mixins/zoolander.js":68,riot:120}],33:[function(e,t,i){var n,o;n=this,o=function(t){e("./child.tag"),t.tag("ad",'<div riot-style="{getTagStyleString()}"><child each="{name, i in opts.data.childNames}" name="{name}"></child></div>','class="ad"',function(t){this.mixin("base"),this.mixin("styles"),this.mixin("background")})},"function"==typeof define&&void 0!==define.amd?define(["riot"],function(t){o(t)}):void 0!==t&&void 0!==t.exports?(t=e("riot"),o(t)):o(n.riot)},{"./child.tag":36,riot:120}],34:[function(t,e,i){var n,o;n=this,o=function(t){t.tag("alphalfa",'<div class="alphalfa" riot-style="{getTagStyleString()}"><video __autoplay="{this.shouldAutoplay}" webkit-playsinline playsinline style="display:none;" muted="true"><source riot-src="{this.opts.data.video.url}"></video><canvas class="alphalfa-buffer" style="display:none;" height="{this.opts.data.rect.height * 2}px" width="{this.opts.data.rect.width}px"></canvas><canvas class="alphalfa-output" height="{this.opts.data.rect.height}px" width="{this.opts.data.rect.width}px"></canvas></div>',function(t){this.mixin("base"),this.mixin("styles"),this.mixin("rect"),this.mixin("transitions"),this.mixin("teardown"),this.mixin("video"),this.mixin("action"),this.mixin("action-cuepoint"),this.mixin("action-transitions");var e=this;this.addLoopConfig=function(t){var e=this.opts.data.video,i=e.loop;return!0===i&&(t.loop=i,null!=e.maxLoops)&&(t.maxLoops=e.maxLoops),t},this.addStillFrame=function(t){var e=this.opts.data.video;return null!=e.stillFrameMS?t.stillFrameMS=e.stillFrameMS:!0===e.loop&&0!==e.maxLoops&&window.Tarnhelm.log("Warning: No stillFrameMS set on a non-infinitely looping Alphalfa. It will disappear after its last loop."),t},this.addMaskUrl=function(t){var e=this.opts.data.video;return null!=e.maskUrl&&(t.maskUrl=e.maskUrl),t},this.initAlphalfa=function(){var t,e=this.getVideoEl();e&&"function"==typeof e.play&&(this.opts.data.isInvisible&&(e.autoplay=""),this.bufferEl=this.root.getElementsByTagName("canvas")[0],this.outputEl=this.root.getElementsByTagName("canvas")[1],t={video:e,buffer:this.bufferEl,output:this.outputEl,colorCorrect:!!this.opts.data.video.colorCorrect,forceCanvas:!!this.opts.data.video.forceCanvas,horizontalStack:!!this.opts.data.video.horizontalStack},t=this.addLoopConfig(t),t=this.addStillFrame(t),t=this.addMaskUrl(t),this.alphalfaPlayer=new ad_design.AlphalfaPlayer(t),this.alphalfaPlayer.listen(),this.shouldAutoplay)&&this.doAutoplay(e)},this.initCuepointEngine=function(){var t=this.getVideoEl();t&&(this.cuepointEngine=new ad_design.CuepointEngine({media:t,cuepoints:this.getCuePoints(),observer:this}))},this.play=function(t){t&&t.userInitiated&&(e.isPausedByUser=!1);t=e.getVideoEl();t&&"function"==typeof t.play&&t.play()},this.pause=function(t){t&&t.userInitiated&&(e.isPausedByUser=!0);t=e.getVideoEl();t&&"function"==typeof t.pause&&t.pause()},this.mute=function(){window.Tarnhelm.log("Alphalfa does not support mute and unmute actions.")},this.unmute=this.mute,this.reset=function(){var t=e.getVideoEl();t&&"number"==typeof t.currentTime&&(t.currentTime=0)},this.fullscreen=function(){window.Tarnhelm.log("Alphalfa does not support fullscreen and normalscreen actions.")},this.normalscreen=this.fullscreen,this.on("mount",function(){this.setVideoEl(this.root.getElementsByTagName("video")[0]),this.initAlphalfa(),this.initCuepointEngine()}),this.on("unmount",function(){this.fireSyntheticMediaPlaybackEvent("pause","alphalfa"),this.alphalfaPlayer.teardown(),this.cuepointEngine.destroy()})})},"function"==typeof define&&void 0!==define.amd?define(["riot"],function(t){o(t)}):void 0!==e&&void 0!==e.exports?(e=t("riot"),o(e)):o(n.riot)},{riot:120}],35:[function(i,t,e){var n,o;n=this,o=function(t){t.tag("animaniac",'<div class="animaniac" riot-style="{getTagStyleString()}" onclick="{handleClick}" onmouseenter="{handleHoverIn}" onmouseleave="{handleHoverOut}"></div>',function(t){var e=i("../../modules/objectUtils.js");this.mixin("base"),this.mixin("styles"),this.mixin("rect"),this.mixin("transitions"),this.mixin("action"),this.mixin("action-user"),this.mixin("action-transitions"),this.initted=!1,this.createAnimation=function(){var t=e.clone(this.opts.data.animaniacOptions);t.injectEl=this.root.getElementsByClassName("animaniac")[0],t.url=this.opts.data.source,t.spriteHeight=this.opts.data.rect.height,t.spriteWidth=this.opts.data.rect.width,t.sheetHeight=this.opts.data.spriteSheetDimensions.height,t.sheetWidth=this.opts.data.spriteSheetDimensions.width,this.animaniac=new ad_design.Animaniac(t),this.initted=!0},this.addActionListeners=function(){var e=this,t=this.getAdInstance().getActionHandler();t.on("animaniac:play",function(t){e.canTriggerAction(t.componentName)&&e.animaniac.play()}),t.on("animaniac:pause",function(t){e.canTriggerAction(t.componentName)&&e.animaniac.pause()}),t.on("animaniac:play-animation",function(t){e.canTriggerAction(t.componentName)&&e.animaniac.playAnimation(t.data.animationName)})},this.destroyAnimation=function(){this.animaniac.pause(),this.initted=!1,this.animaniac=null},this.canTriggerAction=function(t){return this.initted&&t===this.opts.data.name},this.on("mount",function(){this.createAnimation(),this.addActionListeners()}),this.on("unmount",function(){this.destroyAnimation()})})},"function"==typeof define&&void 0!==define.amd?define(["riot"],function(t){o(t)}):void 0!==t&&void 0!==t.exports?(t=i("riot"),o(t)):o(n.riot)},{"../../modules/objectUtils.js":23,riot:120}],36:[function(e,t,i){var n,o;n=this,o=function(t){e("./alphalfa.tag"),e("./animaniac.tag"),e("./countdown.tag"),e("./countdown-number-text.tag"),e("./countdown-number-custom.tag"),e("./countdowner.tag"),e("./gallery.tag"),e("./graphic.tag"),e("./panel.tag"),e("./minimal-video.tag"),e("./reely.tag"),e("./rotator.tag"),e("./rotatorbutton.tag"),e("./slider-rotator.tag"),e("./youtube.tag"),t.tag("child",'<alphalfa each="{this.getType(\'alphalfa\')}" data="{data}"></alphalfa><animaniac each="{this.getType(\'animaniac\')}" data="{data}"></animaniac><countdown each="{this.getType(\'countdown\')}" data="{data}"></countdown><countdown-number-text each="{this.getType(\'countdown-number-text\')}" data="{data}"></countdown-number-text><countdown-number-custom each="{this.getType(\'countdown-number-custom\')}" data="{data}"></countdown-number-custom><countdowner each="{this.getType(\'countdowner\')}" data="{data}"></countdowner><gallery each="{this.getType(\'gallery\')}" data="{data}"></gallery><graphic each="{this.getType(\'graphic\')}" data="{data}"></graphic><panel each="{this.getType(\'panel\')}" data="{data}"></panel><reely each="{this.getType(\'reely\')}" data="{data}"></reely><minimal-video each="{this.getType(\'minimal-video\')}" data="{data}"></minimal-video><rotator each="{this.getType(\'rotator\')}" data="{data}"></rotator><rotatorbutton each="{this.getType(\'rotatorbutton\')}" data="{data}"></rotatorbutton><slider-rotator each="{this.getType(\'slider-rotator\')}" data="{data}"></slider-rotator><youtube each="{this.getType(\'youtube\')}" data="{data}"></youtube>','data-comp-name="{ this.opts.name }"',function(t){this.mixin("base");var e,i=this,o=(this.opts.name&&(e=this.getAdInstance().getAdStore(),this.componentData=e.getComponentState(this.opts.name),this.on("update",function(){this.componentData=e.getComponentState(i.opts.name)})),this.getType=function(t){var e=[];return this.componentData&&this.componentData.type===t&&!this.componentData.isHidden&&e.push({data:this.componentData}),e},["mount","unmount","premount","update","updated","init"]);this.on("all",function(t){if(t&&-1===o.indexOf(t))for(var e in this.tags)for(var i=0,n=this.tags[e].length;i<n;i++)this.tags[e][i].trigger.apply(this.tags[e][i],arguments)})})},"function"==typeof define&&void 0!==define.amd?define(["riot"],function(t){o(t)}):void 0!==t&&void 0!==t.exports?(t=e("riot"),o(t)):o(n.riot)},{"./alphalfa.tag":34,"./animaniac.tag":35,"./countdown-number-custom.tag":37,"./countdown-number-text.tag":38,"./countdown.tag":39,"./countdowner.tag":40,"./gallery.tag":41,"./graphic.tag":42,"./minimal-video.tag":43,"./panel.tag":44,"./reely.tag":45,"./rotator.tag":46,"./rotatorbutton.tag":47,"./slider-rotator.tag":48,"./youtube.tag":49,riot:120}],37:[function(t,e,i){var n,o;n=this,o=function(t){t.tag("countdown-number-custom",'<div class="countdown-number-custom countdown-number-custom-{this.opts.data.timeUnit}" riot-style="{getTagStyleString()}"></div>',function(t){this.mixin("base"),this.mixin("styles"),this.mixin("rect"),this.frames=[],this.options={},this.createFrames=function(){for(var t=0;t<this.options.sheetHeight;t+=this.options.frameHeight)for(var e=0;e<this.options.sheetWidth;e+=this.options.frameWidth)this.frames.push(-e+"px "+-t+"px ")},this.createOptions=function(){this.options.frameHeight=this.opts.data.rect.height,this.options.frameWidth=this.opts.data.rect.width,this.options.sheetHeight=11*this.options.frameHeight,this.options.sheetWidth=10*this.options.frameWidth,this.options.source=this.opts.data.spritesheet.url||"https://m.media-amazon.com/images/G/01/IMDb/design/tarnhelm/countdown-number-custom/countdown.png",this.options.date=this.opts.data.targetDate||"Thu, 01 Jan 1970 00:00:00 +0000"},this.getDisplayIndex=function(){var t=this.opts.data.remaining[this.opts.data.timeUnit]+10;return t=!this.opts.data.padZeros&&this.opts.data.remaining[this.opts.data.timeUnit]<=9?this.opts.data.remaining[this.opts.data.timeUnit]:t},this.setFrame=function(t,e){t=t||e?"-"+(t||0)+"px -"+(e||0)+"px":this.frames[this.getDisplayIndex()];this.addStyleRule("background","url("+this.options.source+") "+t+" / 1000% 1100% no-repeat")},this.on("mount",function(){this.createOptions(),this.setFrame(0,this.options.frameHeight),this.createFrames()}),this.on("update",function(){this.setFrame()})})},"function"==typeof define&&void 0!==define.amd?define(["riot"],function(t){o(t)}):void 0!==e&&void 0!==e.exports?(e=t("riot"),o(e)):o(n.riot)},{riot:120}],38:[function(t,e,i){var n,o;n=this,o=function(t){t.tag("countdown-number-text",'<div class="countdown-number-text countdown-number-text-{this.opts.data.timeUnit}" riot-style="{getTagStyleString()}"> {getDisplayValue()} </div>',function(t){this.mixin("base"),this.mixin("styles"),this.mixin("rect"),this.updateTextStyle=function(){this.addStyleRule("font-size",this.determinedRect.height)},this.pad=function(t){return 9<t?t:"0"+t},this.getDisplayValue=function(){var t=this.opts.data.remaining[this.opts.data.timeUnit];return t=this.opts.data.padZeros?this.pad(t):t},this.on("update",this.updateTextStyle)})},"function"==typeof define&&void 0!==define.amd?define(["riot"],function(t){o(t)}):void 0!==e&&void 0!==e.exports?(e=t("riot"),o(e)):o(n.riot)},{riot:120}],39:[function(t,e,i){var n,o;n=this,o=function(t){t.tag("countdown",'<div class="countdown" riot-style="{getTagStyleString()}" onclick="{handleClick}" onmouseenter="{handleHoverIn}" onmouseleave="{handleHoverOut}"><div if="{this.opts.data.remaining.totalMs || this.opts.data.showAfterEnd}"><child each="{name, i in opts.data.childNames}" name="{name}"></child></div></div>',function(t){this.mixin("base"),this.mixin("styles"),this.mixin("rect"),this.mixin("background"),this.mixin("transitions"),this.mixin("action"),this.mixin("action-user"),this.triggerBackgroundState=function(){this.opts.data.remaining.totalMs||this.opts.data.useAlternateBackground||!this.opts.data.alternateBackground||this.getAdInstance().getActionHandler().trigger({actionName:"set-alternate-background",componentName:this.opts.data.name})},this.on("update",function(){this.triggerBackgroundState(),this.setBackground()})})},"function"==typeof define&&void 0!==define.amd?define(["riot"],function(t){o(t)}):void 0!==e&&void 0!==e.exports?(e=t("riot"),o(e)):o(n.riot)},{riot:120}],40:[function(t,e,i){var n,o;n=this,o=function(t){t.tag("countdowner",'<div id="{this.opts.data.name}" class="countdowner th-countdown" riot-style="{getTagStyleString()}"><div class="th-countdown-inject" id="{\'th-countdown-\' + this.opts.data.name}"></div></div>',function(t){this.mixin("base"),this.mixin("styles"),this.mixin("rect"),this.mixin("zoolander"),this.initCountdowner=function(){for(var t=this.root.getElementsByClassName("th-countdown-inject")[0],e=this.getAdIframeZoolander(),i={el:t,targetDate:new Date(this.opts.data.targetDate),zoolander:e},n=["splitChar","hideAfterRelease","periodContainerCss","periodCountCss","doPad","printLabels","labelsBelow","labels","labelsCss"],o=0;o<n.length;o++)null!=this.opts.data[n[o]]&&(i[n[o]]=this.opts.data[n[o]]);new window.ad_design.Countdowner(i)},this.on("mount",function(){this.initCountdowner(),window.Tarnhelm.log('Warning: The "countdowner" component is deprecated and does not support scaling for MobilePTP, please migrate to the "countdown" component.')})})},"function"==typeof define&&void 0!==define.amd?define(["riot"],function(t){o(t)}):void 0!==e&&void 0!==e.exports?(e=t("riot"),o(e)):o(n.riot)},{riot:120}],41:[function(e,t,i){var n,o;n=this,o=function(t){e("./graphic.tag"),t.tag("gallery",'<div class="gallery th-gallery-parent" riot-style="{getTagStyleString()}"><graphic each="{name, i in this.opts.data.imageUrls}" data="{parent.getPhotoData(i)}" class="th-gallery-image {currentIndex === i ? \'active\' : \'\'}"></graphic><graphic class="th-gallery-arrow prev" data="{this.opts.data.arrowGraphics.previous}"></graphic><graphic class="th-gallery-arrow next" data="{this.opts.data.arrowGraphics.next}"></graphic></div>',function(t){this.mixin("base"),this.mixin("styles"),this.mixin("background"),this.mixin("rect"),this.mixin("action"),this.mixin("action-swipe"),this.mixin("action-transitions");var e=this;this.currentIndex=0,this.maxIndex=this.opts.data.imageUrls.length-1,this.prevButton=null,this.nextButton=null,this.getPhotoData=function(t){return{name:this.opts.data.name+t,source:this.opts.data.imageUrls[t],rect:{anchorX:"right",anchorY:"top",offsetX:0,offsetY:0,height:this.opts.data.rect.height,width:this.opts.data.rect.width}}},this.on("swipeleft",function(){this.incrementIndex(),this.emitTrackingObject("intent","swipeLeft")}),this.on("swiperight",function(){this.decrementIndex(),this.emitTrackingObject("intent","swipeRight")}),this.incrementIndex=function(){e.currentIndex++,e.currentIndex>e.maxIndex&&(e.currentIndex=0),e.update()},this.decrementIndex=function(){e.currentIndex--,e.currentIndex<0&&(e.currentIndex=e.maxIndex),e.update()},this.onPrevClick=function(){this.emitTrackingObject("click","clickPrev"),this.decrementIndex()},this.onNextClick=function(){this.emitTrackingObject("click","clickNext"),this.incrementIndex()},this.on("mount",function(){this.attachTouchActions(),this.prevButton=e.root.getElementsByClassName("prev")[0],this.nextButton=e.root.getElementsByClassName("next")[0],this.prevButton.addEventListener("click",e.onPrevClick),this.nextButton.addEventListener("click",e.onNextClick)}),this.on("unmount",function(){this.detachTouchActions(),this.prevButton.removeEventListener("click",e.onPrevClick),this.nextButton.removeEventListener("click",e.onNextClick)})})},"function"==typeof define&&void 0!==define.amd?define(["riot"],function(t){o(t)}):void 0!==t&&void 0!==t.exports?(t=e("riot"),o(t)):o(n.riot)},{"./graphic.tag":42,riot:120}],42:[function(t,e,i){var n,o;n=this,o=function(t){t.tag("graphic",'<div if="{!this.isDisabledNavigationComponent()}" class="graphic" riot-style="{getTagStyleString()}" onclick="{handleClick}" onmouseenter="{handleHoverIn}" onmouseleave="{handleHoverOut}"><img if="{this.opts.data.source}" riot-src="{this.opts.data.source}" alt="{this.opts.data.description}" height="{this.determinedRect.height}" width="{this.determinedRect.width}"><img if="{this.opts.data.fullAdHoverSource}" riot-src="{this.opts.data.fullAdHoverSource}" alt="{this.opts.data.description}" height="{this.determinedRect.height}" width="{this.determinedRect.width}" class="ad-hover"><img if="{this.opts.data.hoverSource}" riot-src="{this.opts.data.hoverSource}" alt="{this.opts.data.description}" height="{this.determinedRect.height}" width="{this.determinedRect.width}" class="hover"></div><div if="{this.isDisabledNavigationComponent()}" class="graphic disabled" riot-style="{getTagStyleString()}"><img if="{this.opts.data.disabledSource}" riot-src="{this.opts.data.disabledSource}" alt="{this.opts.data.description}" height="{this.determinedRect.height}" width="{this.determinedRect.width}"></div>',function(t){this.mixin("base"),this.mixin("styles"),this.mixin("rect"),this.mixin("transitions"),this.mixin("action"),this.mixin("action-user"),this.mixin("action-transitions")})},"function"==typeof define&&void 0!==define.amd?define(["riot"],function(t){o(t)}):void 0!==e&&void 0!==e.exports?(e=t("riot"),o(e)):o(n.riot)},{riot:120}],43:[function(t,e,i){var n,o;n=this,o=function(t){t.tag("minimal-video",'<div riot-style="{getTagStyleString()}" class="minimal-video"><video webkit-playsinline playsinline muted="true" __autoplay="{this.shouldAutoplay}"><source riot-src="{this.opts.data.video.url}"></video></div>',function(t){this.mixin("base"),this.mixin("styles"),this.mixin("rect"),this.mixin("teardown"),this.mixin("video"),this.mixin("action"),this.mixin("action-cuepoint"),this.mixin("action-transitions"),this.log=function(t){window.Tarnhelm.log("[minimal-video]: "+t)},this.mixin("weblab"),this.mixin("media-interop");var i=this;this.setupVideoAttributes=function(){var t=this.opts.data.video,e=this.getVideoEl();e&&"function"==typeof e.play&&(!1===t.autoplay||t.canplaythroughRequired||(this.shouldObeyMediaInteroperability()||(e.autoplay=!0),this.doAutoplay(e)),t.canplaythroughRequired&&e.addEventListener("canplaythrough",function(){i.requestPlayback({userInitiated:!1})}),t.loop)&&(e.loop=!0)},this.play=function(t){var t=!(!t||!t.userInitiated),e=(t&&(i.isPausedByUser=!1),i.getVideoEl());e&&"function"==typeof e.play&&i.requestPlayback({userInitiated:t})},this.pause=function(t){t&&t.userInitiated&&(i.isPausedByUser=!0);t=i.getVideoEl();t&&"function"==typeof t.pause&&(t.pause(),i.setMediaPaused())},this.mute=function(){var t=i.getVideoEl();t&&"boolean"==typeof t.muted&&(t.muted=!0)},this.unmute=function(){var t=i.getVideoEl();t&&"boolean"==typeof t.muted&&(t.muted=!1)},this.reset=function(){var t=i.getVideoEl();t&&"number"==typeof t.currentTime&&(t.currentTime=0)},this.fullscreen=function(){window.Tarnhelm.log("Minimal video does not support fullscreen and normalscreen actions.")},this.normalscreen=this.fullscreen,this.minimalVideoListen=function(){var t=this.getVideoEl();t&&"function"==typeof t.addEventListener&&t.addEventListener("play",this.makeVisible)},this.minimalVideoTeardown=function(){var t=this.getVideoEl();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("play",this.makeVisible)},this.initCuepointEngine=function(){var t=i.getVideoEl();t&&(this.cuepointEngine=new ad_design.CuepointEngine({media:t,cuepoints:this.getCuePoints(),observer:this}))},this.on("mount",function(){this.makeInvisible(),this.setVideoEl(this.root.getElementsByTagName("video")[0]),this.setupVideoAttributes(),this.minimalVideoListen(),this.initCuepointEngine()}),this.on("unmount",function(){this.fireSyntheticMediaPlaybackEvent("pause","minimal-video"),this.setMediaEnded(),this.minimalVideoTeardown(),this.cuepointEngine.destroy()})})},"function"==typeof define&&void 0!==define.amd?define(["riot"],function(t){o(t)}):void 0!==e&&void 0!==e.exports?(e=t("riot"),o(e)):o(n.riot)},{riot:120}],44:[function(t,e,i){var n,o;n=this,o=function(t){t.tag("panel",'<div class="panel" riot-style="{getTagStyleString()}" onclick="{handleClick}" onmouseenter="{handleHoverIn}" onmouseleave="{handleHoverOut}"><child each="{name, i in opts.data.childNames}" name="{name}"></child></div>',function(t){this.mixin("base"),this.mixin("styles"),this.mixin("rect"),this.mixin("background"),this.mixin("transitions"),this.mixin("action"),this.mixin("action-user"),this.mixin("action-transitions")})},"function"==typeof define&&void 0!==define.amd?define(["riot"],function(t){o(t)}):void 0!==e&&void 0!==e.exports?(e=t("riot"),o(e)):o(n.riot)},{riot:120}],45:[function(t,e,i){var n,o;n=this,o=function(t){t.tag("reely",'<div id="{this.opts.data.name}" riot-style="{getTagStyleString()}" class="reely-inject-el"></div>',function(t){this.mixin("base"),this.mixin("styles"),this.mixin("rect"),this.mixin("teardown"),this.mixin("video"),this.mixin("zoolander"),this.mixin("action"),this.mixin("action-cuepoint"),this.mixin("action-transitions");var e=this,i=window.Tarnhelm.getDeviceInfo().isMobileDevice?40:20;this.determineControlBarConfig=function(t){if(!t)return{};for(var e=Object.keys(t),i={},n=0;n<e.length;n++){var o=e[n];i[o]=t[o]}return i},this.getButtonSize=function(t){return t&&t.buttonSize?t.buttonSize:i},this.determineSpritesheetsConfig=function(t){var e={buttonSize:this.getButtonSize(t)};return t&&t.png&&(e.png=t.png),e},this.initReely=function(){var t=this.opts.data,e=this.root.getElementsByClassName("reely-inject-el")[0],i=this.getAdIframeZoolander(),n=this.determineControlBarConfig(t.controls),o=this.determineSpritesheetsConfig(t.spritesheets),t=this.determineSpritesheetsConfig(t.overlaySpritesheets),s=this.getAdInstance()&&this.getAdInstance().getContainerFrame();this.reelyPlayer=new ad_design.Reely({injectEl:e,src:this.opts.data.video.url,zoolander:i,slate:this.opts.data.video.slate||"",autoplay:this.opts.data.video.autoplay||!1,autosound:this.opts.data.video.autosound||!1,controlBar:n,spritesheets:o,overlaySpritesheets:t,iframeId:s?s.id:"",playsInline:void 0===this.opts.data.video.playsInline||this.opts.data.video.playsInline,fullscreen:this.opts.data.video.fullscreen||!1})},this.initCuepointEngine=function(){this.cuepointEngine=new ad_design.CuepointEngine({media:this.reelyPlayer.videoEl,cuepoints:this.getCuePoints(),observer:this})},this.play=function(t){t&&t.userInitiated&&(e.isPausedByUser=!1,e.reelyPlayer.isPausedByUser=!1),e.reelyPlayer.play()},this.pause=function(t){t&&t.userInitiated&&(e.isPausedByUser=!0,e.reelyPlayer.isPausedByUser=!0),e.reelyPlayer.pause()},this.mute=function(){e.reelyPlayer.mute()},this.unmute=function(){e.reelyPlayer.unmute()},this.reset=function(){e.reelyPlayer.reset()},this.fullscreen=function(){e.reelyPlayer.fullscreenMode()},this.normalscreen=function(){e.reelyPlayer.normalScreenMode()},this.on("mount",function(){this.initReely(),this.setVideoEl(this.reelyPlayer.videoEl),this.initCuepointEngine()}),this.on("unmount",function(){this.fireSyntheticMediaPlaybackEvent("pause","reely"),this.reelyPlayer.teardown(),this.cuepointEngine.destroy()})})},"function"==typeof define&&void 0!==define.amd?define(["riot"],function(t){o(t)}):void 0!==e&&void 0!==e.exports?(e=t("riot"),o(e)):o(n.riot)},{riot:120}],46:[function(o,t,e){var i,n;i=this,n=function(t){t.tag("rotator",'<div class="rotator" riot-style="{getTagStyleString()}"><child name="{activeChildName}"></child></div>',function(t){var e=o("../stores/delegators/wrap.js"),i=o("../stores/retrievers/rotator.js"),n=(this.mixin("base"),this.mixin("styles"),this.mixin("rect"),this.mixin("rotator"),this.mixin("background"),this.mixin("transitions"),this.mixin("action"),this.mixin("action-transitions"),this.getAdInstance().getAdStore());this.activeChildName=this.opts.data.childNames[this.opts.data.activeIndex],this.setActiveChildName=function(){var t,e=this.opts.data.childNames[this.opts.data.activeIndex];e!==this.activeChildName&&((t=this).activeChildName=void 0,window.setTimeout(function(){t.activeChildName=e,t.update()},1))},this.on("update",this.setActiveChildName),this.hasWrapConfig=function(){return!(!this.opts.data.wrapConfig||!this.opts.data.wrapConfig.enabled)},this.updateWrap=function(){this.hasWrapConfig()&&e.triggerRotatorWrapSwap(this.opts.data,n.getState())},this.resizeAdContainer=function(){var t,e;"expander"===this.opts.data.name&&(t=window.Tarnhelm.getAd(n.getAdId()),e=i.getActiveChildComponent(this.opts.data,n.getComponentLibrary()),t.resizeAdContainer(e.rect))},this.on("update",this.updateWrap),this.on("update",this.resizeAdContainer)})},"function"==typeof define&&void 0!==define.amd?define(["riot"],function(t){n(t)}):void 0!==t&&void 0!==t.exports?(t=o("riot"),n(t)):n(i.riot)},{"../stores/delegators/wrap.js":73,"../stores/retrievers/rotator.js":79,riot:120}],47:[function(e,t,i){var n,o;n=this,o=function(t){e("./graphic.tag"),t.tag("rotatorbutton",'<div class="rotatorbutton" riot-style="{getTagStyleString()}" onclick="{handleClickAndRotatorbuttonClick}" onmouseenter="{handleHoverIn}" onmouseleave="{handleHoverOut}"><graphic data="{graphicData}"></graphic></div>',function(t){var n=this;this.mixin("base"),this.mixin("styles"),this.mixin("rect"),this.mixin("transitions"),this.mixin("action"),this.mixin("action-user"),this.mixin("action-transitions"),this.handleRotatorbuttonClick=function(t){var e,i;this.isActive()||(e=n.opts.data).rotatorName&&(i={actionName:"route",data:{rotatorConfigs:[{name:e.rotatorName,index:e.rotatorIndex}]}},e.rotatorConfigs&&e.rotatorConfigs.length&&(i.data.rotatorConfigs=i.data.rotatorConfigs.concat(e.rotatorConfigs)),i.data.showComponents=e.showComponents,i.data.hideComponents=e.hideComponents,this.getAdInstance().getActionHandler().trigger(i))},this.handleClickAndRotatorbuttonClick=function(t){this.handleClick(t),this.handleRotatorbuttonClick(t),this.hasAction("click")||this.emitTrackingObject("click","click")},this.getGraphicData=function(){var t=this.opts.data,e={description:t.description,source:t.source,hoverSource:t.hoverSource,fullAdHoverSource:t.fullAdHoverSource,disabledSource:t.disabledSource,rect:{anchorX:"left",anchorY:"top",offsetX:0,offsetY:0,height:t.rect.height,width:t.rect.width}};return this.isActive()&&(e.source=t.activeSource),e},this.isActive=function(){var t=this.getAdInstance().getAdStore().getComponentState(this.opts.data.rotatorName);return t&&this.opts.data.rotatorIndex===t.activeIndex},this.setCursor=function(){this.isActive()?this.removeStyleRule("cursor"):this.addStyleRule("cursor","pointer")},this.setState=function(){this.graphicData=this.getGraphicData(),this.setCursor()},this.setState(),this.on("update",function(){this.setState()})})},"function"==typeof define&&void 0!==define.amd?define(["riot"],function(t){o(t)}):void 0!==t&&void 0!==t.exports?(t=e("riot"),o(t)):o(n.riot)},{"./graphic.tag":42,riot:120}],48:[function(l,t,e){var i,n;i=this,n=function(t){t.tag("slider-rotator",'<div class="slider-rotator" riot-style="{getTagStyleString()}"><div class="slide-offset js-offset" riot-style="{getSlideOffsetInitialStyle()}"><div each="{name, i in opts.data.childNames}" class="slide"><child name="{name}"></child></div></div><graphic class="th-slider-arrow prev" if="{this.shouldShowArrowPrev()}" data="{this.opts.data.arrowGraphics.previous}" onclick="{this.onPrevClick}"></graphic><graphic class="th-slider-arrow next" if="{this.shouldShowArrowNext()}" data="{this.opts.data.arrowGraphics.next}" onclick="{this.onNextClick}"></graphic></div>',function(t){var e,o,s,r,i,a,n=l("../../modules/numberUtils.js"),d=(this.mixin("base"),this.mixin("styles"),this.mixin("rect"),this.mixin("background"),this.mixin("rotator"),this.mixin("action"),this.mixin("action-transitions"),this.mixin("action-touch"),this.resting=!0,this.on("indexChanged",function(){this.startVisibleLoop(),this.handleIndexChanged()}),this.handleIndexChanged=function(){var t={actionName:"video:pause-all:under-ancestor",ancestorName:this.opts.data.name};this.triggerActions([t])},window.Tarnhelm.getDeviceInfo().canTransitionTransforms);d||window.Tarnhelm.log("Slider NOT supporting touch actions; We've determined that we cannot transition transforms."),this.addStyleRule("overflow","hidden"),this.addStyleRule("white-space","nowrap");this.getRestingStateOffset=function(){return this.opts.data.activeIndex*this.opts.data.rect.width*-1},this.getSliderStateData=function(){return{activeIndex:this.opts.data.activeIndex,slideWidth:this.opts.data.rect.width,restingOffset:this.getRestingStateOffset()}},this.getTransitionString=function(t){return"transform "+t+"s cubic-bezier(0.215, 0.610, 0.355, 1.000)"},this.getOffsetString=function(t){return"translate3d("+(t+"px")+",0,0)"},this.getMaxOffset=function(t,e){return this.isAtBeginning()?t+.35*e:t+e},this.getMinOffset=function(t,e){return this.isAtEnd()?t-.35*e:t-e},this.isAtBeginning=function(){return 0===this.opts.data.activeIndex},this.isAtEnd=function(){var t=this.opts.data.childNames.length-1;return this.opts.data.activeIndex===t},this.setOffsetDivStyle=function(t,e){var i=this.root.getElementsByClassName("js-offset")[0];this.setOffsetDivTransition(e,i),i.style.transform=this.getOffsetString(t)},this.setOffsetDivTransition=function(t,e){e=e||this.root.getElementsByClassName("js-offset")[0];e.style.transition=null==t?"none":this.getTransitionString(t)},this.currAnimProps=null,this.sliderHandleTouchStart=function(t){clearTimeout(this.slideCompleteTimeout),this.setOffsetDivTransition(null);var e=this.getSliderStateData();this.currAnimProps={hasMovedOffset:!1,currTouchStartOffset:this.parseCurrentOffset(),maxPan:this.getMaxOffset(e.restingOffset,e.slideWidth),minPan:this.getMinOffset(e.restingOffset,e.slideWidth)},this.startVisibleLoop(),this.emitTrackingObject("intent","touchStart")},this.sliderHandleTouchMove=function(t){var e=this.currAnimProps;!t||t.isVerticalMove?e&&e.hasMovedOffset&&(this.returnToResting(),this.currAnimProps=null):(e.hasMovedOffset=!0,this.getSliderStateData(),t=t.totalDistance.x,t=e.currTouchStartOffset+t,t=n.clamp(t,e.minPan,e.maxPan),this.setOffsetDivStyle(t,null))},this.sliderHandleTouchEnd=function(t){var e,i,n,o;this.currAnimProps=null,t&&!t.isVerticalMove&&(this.emitTrackingObject("intent","touchEnd"),e=this.getSliderStateData(),o=this.parseCurrentOffset(),o=this.getOffsetFromResting(e,o),i=0!==t.velocity.x,o=o<0,n=t.velocity.x<0,!(i&&o!=n)&&(i=o,n=this.testNeedsIndexChange(e,t),o=i&&this.isAtEnd()||!i&&this.isAtBeginning(),n)&&!o?(this.doSlideChange(t,e,i),this.emitTrackingObject("intent","swipe"+(i?"Left":"Right"))):this.returnToResting())},this.doSlideChange=function(t,e,i){var n=i?-1*e.slideWidth:e.slideWidth,e=e.restingOffset+n,n=.85*t.transitionLengthFactor,t=this.determineTransitionLength(e,n),n=(this.setOffsetDivStyle(e,t),i?this.incrementIndex:this.decrementIndex);this.callIndexChangeAfterTransition(n.bind(this),t)},this.callIndexChangeAfterTransition=function(t,e){clearTimeout(this.slideCompleteTimeout),e?this.slideCompleteTimeout=setTimeout(t,1e3*e):(t(),this.stopVisibleLoop())},this.testNeedsIndexChange=function(t,e){var i=!1;return(i=15<Math.abs(e.velocity.x))||(e=this.parseCurrentOffset(),i=.4*t.slideWidth<Math.abs(this.getOffsetFromResting(t,e))),i},this.getOffsetFromResting=function(t,e){return e-t.restingOffset},this.returnToResting=function(){var t=this.getRestingStateOffset(),e=this.determineTransitionLength(t,1.5);this.setOffsetDivStyle(t,e),this.startVisibleLoop()},this.parseCurrentOffset=function(){var t=this.root.getElementsByClassName("js-offset")[0];return t&&t.style&&t.style.transform?(t=t.style.transform.split("translate3d(")[1].split(",")[0],parseInt(t,10)):this.getRestingStateOffset()},this.determineTransitionLength=function(t,e){var i=this.getSliderStateData(),n=this.parseCurrentOffset(),e=e||.85,n=Math.abs(n-t)/i.slideWidth;return n<1&&(e*=n),e},this.getSlideOffsetInitialStyle=function(){var t=this.getSliderStateData().restingOffset,e=this.determineTransitionLength(t),i={height:this.opts.data.rect.height+"px"};return d?(i.transition=this.getTransitionString(e),i.transform=this.getOffsetString(t)):(i.transition=this.getNonTranslateTransitionString(.85),i.left=this.getNonTranslateOffsetString(t)),this.cssStringFromCSSObject(i)},d&&(this.addTouchStartHandler(this.sliderHandleTouchStart),this.addTouchMoveHandler(this.sliderHandleTouchMove),this.addTouchEndHandler(this.sliderHandleTouchEnd)),this.shouldShowArrowPrev=function(){return this.opts.data.arrowGraphics&&this.opts.data.arrowGraphics.previous&&!this.isAtBeginning()},this.shouldShowArrowNext=function(){return this.opts.data.arrowGraphics&&this.opts.data.arrowGraphics.next&&!this.isAtEnd()},this.manualUpdateNonTranslateOffsetDiv=function(t,e){e.style.left=this.getNonTranslateOffsetString(t)},this.getNonTranslateTransitionString=function(t){return"left "+t+"s cubic-bezier(0.215, 0.610, 0.355, 1.000)"},this.getNonTranslateOffsetString=function(t){return t+"px"},this.on("update",function(){var t;d||(t=this.root.getElementsByClassName("js-offset")[0])&&this.manualUpdateNonTranslateOffsetDiv(this.getRestingStateOffset(),t)}),this.onPrevClick=function(){this.decrementIndex(),this.emitTrackingObject("click","clickPrev")},this.onNextClick=function(){this.incrementIndex(),this.emitTrackingObject("click","clickNext")},this.on("mount",function(){this.root.getElementsByClassName("js-offset")[0].addEventListener("transitionend",function(t){this.stopVisibleLoop()}.bind(this)),e=this.opts.data.activeIndex,o=[e],s=this.root.getElementsByClassName("slide"),r=this.root.children[0],this.tags.child&&this.tags.child[e]?(this.tags.child[e].trigger("slideMoveIn"),this.tags.child[e].trigger("slideActivated")):this.tags.child&&this.tags.child.trigger("slideActivated")}),this.on("unmount",function(){this.stopVisibleLoop()}),this.determineVisibleSlides=function(){for(var t=[],e=r.getBoundingClientRect(),i=s.length,n=0;n<i;n++){var o=s[n].getBoundingClientRect();if(o.left<e.right&&o.right>e.left)t.push(n);else if(o.left>e.right)break}return t},this.startVisibleLoop=function(){this.resting&&(this.resting=!1,a())},this.stopVisibleLoop=function(){this.resting||(this.resting=!0,i())},i=function(){isNaN(e)||e===this.opts.data.activeIndex||(this.tags.child[e].trigger("slideDeactivated"),this.tags.child[this.opts.data.activeIndex].trigger("slideActivated"),e=this.opts.data.activeIndex)}.bind(this),a=function(){for(var t=this.determineVisibleSlides(),e=Math.min(t[0],o[0]),i=Math.max(t[t.length-1],o[o.length-1]),n=e;n<=i;n++)-1===t.indexOf(n)&&-1!==o.indexOf(n)?this.tags.child[n].trigger("slideMoveOut"):-1!==t.indexOf(n)&&-1===o.indexOf(n)&&this.tags.child[n].trigger("slideMoveIn");o=t,this.resting||requestAnimationFrame(a)}.bind(this)})},"function"==typeof define&&void 0!==define.amd?define(["riot"],function(t){n(t)}):void 0!==t&&void 0!==t.exports?(t=l("riot"),n(t)):n(i.riot)},{"../../modules/numberUtils.js":22,riot:120}],49:[function(t,e,i){var n,o;n=this,o=function(t){t.tag("youtube",'<div class="youtube" riot-style="{getTagStyleString()}" onmouseenter="{handleHoverIn}" onmouseleave="{handleHoverOut}"><div class="youtube_injection"></div></div>',function(t){this.mixin("base"),this.mixin("styles"),this.mixin("rect"),this.mixin("background"),this.mixin("transitions"),this.mixin("action"),this.mixin("action-user"),this.mixin("video"),this.mixin("resize"),this.firstStart=!0,this.actionHandler=this.getAdInstance().getActionHandler();var e=this;this.loadYoutubeAPI=function(){window.onYouTubeIframeAPIReady=function(){window.Tarnhelm.triggerGlobalAction({actionName:"api-ready:youtube"})};var t="tarnhelm_yt_script",e=document.getElementById(t);e||((e=document.createElement("script")).id=t,e.src="https://www.youtube.com/iframe_api",(t=document.getElementsByTagName("script")[0]).parentNode.insertBefore(e,t))},this.getAutoplayValue=function(){return e.opts.data.video.autoplay?1:0},this.initYoutubePlayer=function(){e.player=new YT.Player(e.root.firstChild.firstChild,{height:e.opts.data.rect.height,width:e.opts.data.rect.width,videoId:e.opts.data.video.id,playerVars:{autohide:1,autoplay:e.getAutoplayValue(),rel:0,showinfo:0,wmode:"transparent"},events:{onStateChange:function(t){t.data===YT.PlayerState.PLAYING&&e.firstStart&&(e.firstStart=!1,e.handleEvent(t,"videoStart")),t.data===YT.PlayerState.ENDED&&e.handleEvent(t,"videoComplete")}}})},this.play=function(){e.player.playVideo()},this.pause=function(){e.player.pauseVideo()},this.mute=function(){e.player.mute()},this.unmute=function(){e.player.unMute()},this.reset=function(){e.player.stopVideo()},this.on("mount",function(){this.initVideoActionReceivers(),this.registerTeardownFunction(this.teardownVideoActionReceivers),window.YT?this.initYoutubePlayer():(this.actionHandler.one("api-ready:youtube",this.initYoutubePlayer),"function"!=typeof window.onYouTubeIframeAPIReady&&this.loadYoutubeAPI())}),this.on("unmount",function(){e.player.destroy()}),this.on("resize",function(){e.player.getIframe().style.width=e.determinedRect.width,e.player.getIframe().style.height=e.determinedRect.height})})},"function"==typeof define&&void 0!==define.amd?define(["riot"],function(t){o(t)}):void 0!==e&&void 0!==e.exports?(e=t("riot"),o(e)):o(n.riot)},{riot:120}],50:[function(t,e,i){e.exports={MINIMAL_VIDEO_NAME:"minimal-video",INLINE20_SLOT_NAME:"inline20",GRANTED:"granted",DENIED:"denied",PENDING:"pending"}},{}],51:[function(t,e,i){var t=t("riot"),n={start:"10ms",firstQuartile:"25%",midpoint:"50%",thirdQuartile:"75%",complete:"90%"};t.mixin("action-cuepoint",{init:function(){if(this.cuePoints=[],this.hasCuePointActions()){var t,e=this.getCuePointActions(),i=e.length,n=0;for(this.opts.data.video.viconst;n<i;n++)t={time:e[n].timeString,data:e[n]},this.cuePoints.push(t)}this.addCuePointTracking()},onCuepoint:function(t){this.triggerActions(t.data.actions)},getCuePoints:function(){return this.cuePoints},getCuePointActions:function(){var t=this.opts.data.actions||{};return t&&t.cuePoints?t.cuePoints:[]},hasCuePointActions:function(){return 0<this.getCuePointActions().length},getCuePointAt:function(t){for(var e=0,i=this.cuePoints.length;e<i;e++)if(this.cuePoints[e].time===t)return this.cuePoints[e];return null},addCuePointTracking:function(){var t,e;if(this.opts&&this.opts.data&&this.opts.data.name)for(t in n)(e=this.getCuePointAt(n[t]))||this.cuePoints.push(e={time:n[t],data:{actions:[]}}),e.data.actions=e.data.actions.concat([{actionName:"track:"+this.opts.data.name,eventType:"media",eventSubType:t}]);else console.log("this.opts.data.name is undefined",this)}})},{riot:120}],52:[function(t,e,i){t("riot").mixin("action-swipe",{init:function(){this.attachTouchActions||this.mixin("action-touch"),this.hasTouch&&this.addTouchEndHandler(this.handleSwipeEnd)},handleSwipeEnd:function(t){!t.isMoveY&&t.isSwipe&&(t.totalDistance.x<0?this.handleSwipeActions("swipeleft"):this.handleSwipeActions("swiperight"))},handleSwipeActions:function(t){this.trigger("swipe"),this.trigger(t),this.hasAction("swipe")&&this.triggerActions(this.opts.data.actions.swipe),this.hasAction(t)&&this.triggerActions(this.opts.data.actions[t])}})},{riot:120}],53:[function(t,e,i){var n=t("riot"),o=(t("../../modules/functionUtils.js"),t("../../modules/touchData.js"));n.mixin("action-touch",{init:function(){this.touchStartHandlers=[],this.touchMoveHandlers=[],this.touchEndHandlers=[],this.touchMoveRAF=null,this.hasTouch=window.Tarnhelm.getDeviceInfo().hasTouch,this.hasTouch&&(this.registerTeardownFunction||this.mixin("teardown"),this.registerTeardownFunction(this.detachTouchActions),this.resetTouchData(),this.on("mount",function(){this.attachTouchActions()}),window.Tarnhelm.getIsDebug())&&null!=this.setupTouchDebugVisual&&this.setupTouchDebugVisual()},setupTouchDebugVisual:null,attachTouchActions:function(){this.boundTouchMoveAnimationFrame=this.handleTouchMoveAnimationFrame.bind(this),this.root.addEventListener("touchstart",this.handleTouchStart),this.root.addEventListener("touchmove",this.handleTouchMove),this.root.addEventListener("touchend",this.handleTouchEnd)},detachTouchActions:function(){this.root.removeEventListener("touchstart",this.handleTouchStart),this.root.removeEventListener("touchmove",this.handleTouchMove),this.root.removeEventListener("touchend",this.handleTouchEnd),this.boundTouchMoveAnimationFrame=null,this.throttledHandleTouchMove=null},resetTouchData:function(){this.touchData=null,this.isTouched=!1},stopEvent:function(t){var e=!!this.touchData,i=e&&!!this.touchData.isTouchTypeDetermined,n=e&&!!this.touchData.isVerticalMove;e&&i&&!n&&t&&(t.stopPropagation(),t.preventDefault())},addTouchStartHandler:function(t,e){this._addTouchEventHandler(this.touchStartHandlers,t,e)},addTouchEndHandler:function(t,e){this._addTouchEventHandler(this.touchEndHandlers,t,e)},addTouchMoveHandler:function(t,e){this._addTouchEventHandler(this.touchMoveHandlers,t,e)},_addTouchEventHandler:function(t,e,i){t.push({callback:e,thisArg:i||this})},handleTouchStart:function(t){this.isTouched=!0,this.touchData=new o(t),this.callHandlers(this.touchStartHandlers,this.touchData,t),this.touchMoveRAF=window.requestAnimationFrame(this.handleTouchMoveAnimationFrame)},handleTouchMove:function(t){this.stopEvent(t),this.touchData&&this.touchData.addTouchMoveData(t)},handleTouchMoveAnimationFrame:function(){this.touchData&&(this.callHandlers(this.touchMoveHandlers,this.touchData),this.touchMoveRAF=window.requestAnimationFrame(this.handleTouchMoveAnimationFrame))},handleTouchEnd:function(t){window.cancelAnimationFrame(this.touchMoveRAF),this.touchData&&(this.touchData.finalizeTouchDataOnEnd(t),this.callHandlers(this.touchEndHandlers,this.touchData)),this.resetTouchData()},callHandlers:function(t,e,i){if(t.length){var n=[e,i];if(t.length)for(var o=0;o<t.length;o++)this.callHandler(t[o],n)}},callHandler:function(t,e){t.callback.apply(t.thisArg,e)}})},{"../../modules/functionUtils.js":17,"../../modules/touchData.js":27,riot:120}],54:[function(t,e,i){t("riot").mixin("action-transitions",{init:function(){var t=this,e=this.getAdInstance().getActionHandler();this.hasAction("transitionsOutStart")&&e.on("transition-component-out:"+t.opts.data.name,function(){e.triggerMany(t.opts.data.actions.transitionsOutStart)}),this.hasAction("transitionsOutComplete")&&e.on("transition-component-out:"+t.opts.data.name+":complete",function(){e.triggerMany(t.opts.data.actions.transitionsOutComplete)})}})},{riot:120}],55:[function(t,e,i){t("riot").mixin("action-user",{init:function(){this.hasAction("click")&&this.addStyleRule("cursor","pointer")},handleClick:function(t){this.handleEvent(t,"click")},handleHoverIn:function(t){this.handleEvent(t,"hoverIn")},handleHoverOut:function(t){this.handleEvent(t,"hoverOut")}})},{riot:120}],56:[function(t,e,i){var t=t("riot"),n=["update","updated"];t.mixin("action",{init:function(){var t;this.hasAction("init")&&(t=this.opts.data.actions.init,this.triggerActions(t)),this.on("all",function(t){t&&this.hasAction(t)&&-1===n.indexOf(t)&&(t=this.opts.data.actions[t],this.triggerActions(t))})},handleEvent:function(t,e){return t.preventUpdate=!0,this.hasAction(e)&&(t=this.opts.data.actions[e],this.triggerActions(t),"click"===e?this.emitTrackingObject(e,e):/^video/i.test(e)?this.emitTrackingObject("video",e):this.emitTrackingObject("intent",e)),!0},triggerActions:function(t){this.isDisabledNavigationComponent()?window.Tarnhelm.log('Suppressing actions for navigation component "'+this.opts.data.name+'", navigation is currently disabled.'):this.getAdInstance().getActionHandler().triggerMany(t)},hasAction:function(t){return this.opts.data.actions&&this.opts.data.actions[t]&&this.opts.data.actions[t].length}})},{riot:120}],57:[function(t,e,i){var t=t("riot"),n=["background-attachment","background-image","background-position","background-repeat","background-size"];t.mixin("background",{init:function(){this.setBackground(),this.on("update",this.setBackground)},setBackground:function(){var t=this.opts.data||{},t=t.useAlternateBackground?t.alternateBackground||{}:t.background||{};t.color?this.addStyleRule("background-color",t.color):this.removeStyleRule("background-color"),t.source?(this.addStyleRule("background-image","url("+t.source+")"),t.attachment?this.addStyleRule("background-attachment",t.attachment):this.removeStyleRule("background-attachment"),t.position?this.addStyleRule("background-position",t.position):this.removeStyleRule("background-position"),t.repeat?this.addStyleRule("background-repeat",t.repeat):this.addStyleRule("background-repeat","no-repeat"),t.size?this.addStyleRule("background-size",t.size):this.addStyleRule("background-size",this.getBackgroundSize())):this.removeStyleRules(n)},getBackgroundSize:function(){return this.determinedRect.width+" "+this.determinedRect.height}})},{riot:120}],58:[function(t,e,i){t("riot").mixin("base",{getAdInstance:function(){if(this._adInstance)return this._adInstance;for(var t,e=this;!t;)t=(e=e.parent)._adInstance;return this._adInstance=t},getAdStore:function(){return this.getAdInstance().getAdStore()},getComponentLibrary:function(){return this.getAdStore().getComponentLibrary()},isDisabledNavigationComponent:function(){return!!this.opts.data.isNavigationComponent&&this.getAdInstance().getAdStore().getNavigationComponentsDisabledFlag()},init:function(){var e,t,i="";(i=this.data&&this.data.name?this.data.name:i)&&((t=(e=this).getAdInstance().getActionHandler()).on("track:"+i,function(t){t&&t.eventType?e.emitTrackingObject(t.eventType,t.eventSubType):window.Tarnhelm.log("Tracking event called as an action, track:"+i+", but no eventType was passed. Ignoring.")}),this.on("unmount",function(){t.off("track:"+i)}))},emitTrackingObject:function(t,e,i){var n=this.getAdInstance(),o=n.getTrackingConsumer();if(o){var s,r=n.getContainerFrame().contentDocument,a=(r.hasOwnProperty("ad")&&r.ad.hasOwnProperty("cid")&&r.ad.cid,{unitName:n.getName(),eventType:t,componentName:this.componentData.name,componentPath:this.getComponentPath(),componentType:this.componentData.type,timeElapsed:n.timeSinceInit(),data:{label:this.componentData.description||this.componentData.name,eventSubType:e}});if(i)for(s in i)a.data[s]=i[s];o(a)}},getComponentPath:function(){for(var t=this.getAdInstance().getName(),e=this.componentData.name,i=this.parent,n=this.componentData.name;i.componentData&&i.componentData.name!==t;)n!==i.componentData.name&&(e=i.componentData.name+"."+e,n=i.componentData.name),i=i.parent;return this.getComponentPath=function(){return e},e}})},{riot:120}],59:[function(t,e,i){var n=t("riot"),o=t("../constants").MINIMAL_VIDEO_NAME,s=t("../constants").INLINE20_SLOT_NAME,r=t("../constants").GRANTED,a=t("../constants").DENIED,d=t("../constants").PENDING,t={init:function(){this.setMediaKey=null,this.lastPermission="",this.hasSubscribed=!1,this.shouldObeyMediaInteroperability()&&this.subscribeToMediaNotifications()},getSlotId:function(){var t=this.getAdInstance(),t=t?t.getContainerFrame():null;return t?t.id:""},getAssetName:function(){return this.getSlotId()?this.getSlotId():o},requestPlayback:function(t){if(this.shouldObeyMediaInteroperability()){var e,i=this,t=t||{};if(!this.hasSubscribed)return this.subscribeToMediaNotifications({shouldRequestPlayback:!0});this.lastPermission.toLowerCase()===r&&(e=this.getVideoEl())&&(e.play(),this.setMediaPlay()),this.getBridge().requestPlayback({name:this.getAssetName(),userInitiated:!!t.userInitiated,videoFrame:this.getVideoFrame()}).then(function(t){i.log("requestPlayback success"),i.onMediaPermissionsChanged(t)},function(t){i.log("requestPlayback error: "+JSON.stringify(t))})}else this.getVideoEl().play()},setMediaPlay:function(){this.setStatus("setMediaPlay")},setMediaPaused:function(){this.setStatus("setMediaPaused")},setMediaEnded:function(){this.getBridge()&&this.getBridge().isMediaOrchestratorBridge?this.setStatus("setMediaEnded",{isMinimalVideo:!0}):this.setStatus("setMediaEnded")},setStatus:function(e,t){var i,n,o;this.shouldObeyMediaInteroperability()&&(this.log(e),n=(i=this).getBridge()[e],o={key:this.setMediaKey,permission:this.lastPermission},(t?n(o,t):n(o)).then(function(t){i.log(e+" success")},function(t){i.log(e+" error: "+JSON.stringify(t))}))},subscribeToMediaNotifications:function(t){var e,i,t=!!(t||{}).shouldRequestPlayback;this.hasSubscribed||(e=this.getBridge(),i={onMediaPermissionsChanged:this.onMediaPermissionsChanged.bind(this)},e.isMediaOrchestratorBridge&&(i.name=this.getAssetName()),this.hasSubscribed=e.subscribe(i),this.log("subscribeToMediaNotifications: "+this.hasSubscribed),t&&this.requestPlayback({userInitiated:!1}))},onMediaPermissionsChanged:function(t){if(t&&t.permission&&this.shouldObeyMediaInteroperability()){var e=t.permission.toLowerCase();switch(this.setMediaKey=t.key,this.lastPermission=t.permission,e){case r:this.log("onMediaPermissionsChanged: "+r);var i=this.getVideoEl();i&&!this.isPausedByUser?(i.play(),this.setMediaPlay()):this.log("isPausedByUser: "+this.isPausedByUser+", ignoring "+r+" permission");break;case a:this.log("onMediaPermissionsChanged: "+a),this.pause();break;case d:this.log("onMediaPermissionsChanged: "+d);break;default:this.log("onMediaPermissionsChanged unexpected permission: "+e)}}},getVideoFrame:function(){var t=this.getVideoEl(),e=t?t.getBoundingClientRect():{},i=0,n=(t&&t.ownerDocument&&t.ownerDocument.defaultView&&(i=t.ownerDocument.defaultView.innerWidth),window.top.innerWidth),i=(i-n)/2,n={x:0<i&&this.getSlotId()===s?e.x-i:e.x,y:e.y,width:e.width,height:e.height},i=window.top.Tarnhelm.getDeviceInfo();return this.getBridge().isMediaOrchestratorBridge&&i.isMobileSite&&(t=(i=(e=t.ownerDocument.defaultView)?e.frameElement||e.iframe:null)?i.getBoundingClientRect():{x:0,y:0},n.x+=t.x+window.scrollX,n.y+=t.y+window.scrollY),n}};n.mixin("media-interop",t),e.exports=t},{"../constants":50,riot:120}],60:[function(t,e,i){var n=t("riot"),o=t("../../modules/rectProcessor.js");n.mixin("rect",{init:function(){this.setRect(),this.on("update",this.setRect)},setRect:function(){var t=(this.opts.data||{}).rect||{};this.removeStyleRules(["top","right","bottom","left"]),this.determinedRect=o.process(t),this.addStyleRule("position",this.determinedRect.position),this.addStyleRule(this.determinedRect.anchorX,this.determinedRect.offsetX),this.addStyleRule(this.determinedRect.anchorY,this.determinedRect.offsetY),this.addStyleRule("height",this.determinedRect.height),this.addStyleRule("width",this.determinedRect.width)}})},{"../../modules/rectProcessor.js":24,riot:120}],61:[function(t,e,i){t("riot").mixin("resize",{init:function(){this._isMounted=!1,this._currentWidth=this.opts.data.rect.width,this.on("mount",function(){this._isMounted=!0}),this.on("update",this._checkForResize)},_checkForResize:function(){this._isMounted&&this.opts.data.rect.width!==this._currentWidth&&(this._currentWidth=this.opts.data.rect.width,this.trigger("resize"))}})},{riot:120}],62:[function(t,e,i){t("riot").mixin("rotator",{init:function(){this.registerTeardownFunction||this.mixin("teardown"),this.initRotatorEventHandlers(),this.registerTeardownFunction(this.teardownRotatorEventHandlers)},initRotatorEventHandlers:function(){this.prevActiveIndex=this.activeIndex,this.on("update",this.handleRotatorUpdate)},teardownRotatorEventHandlers:function(){this.off("update",this.handleRotatorUpdate)},incrementIndex:function(){var t={actionName:"rotator:increment-index",componentName:this.opts.data.name};this.triggerActions([t])},decrementIndex:function(){var t={actionName:"rotator:decrement-index",componentName:this.opts.data.name};this.triggerActions([t])},handleRotatorUpdate:function(){var t=this.opts.data.activeIndex,e=this.prevActiveIndex;null!=e&&e!==t&&(this.trigger("indexChanged"),this.emitTrackingObject("intent","navigateRotator",{index:t}),this.hasAction("indexChanged"))&&this.triggerActions(this.opts.data.actions.indexChanged),this.prevActiveIndex=t}})},{riot:120}],63:[function(t,e,i){var t=t("riot"),o={transform:["-webkit-transform","-ms-transform"],"transform-origin":["-webkit-transform-origin","-moz-transform-origin","-ms-transform-origin","-o-transform-origin"],transition:["-webkit-transition","-moz-transition","-o-transition"],filter:["-webkit-filter","-moz-filter","-o-filter"]};t.mixin("styles",{init:function(){this.initTagStyles(),this.addCustomCSSTagStyles(),this.on("update",this.setTagStyleString)},initTagStyles:function(){this.tagStyles={},this.tagStyleString=""},addCustomCSSTagStyles:function(){var t=this.opts.data.css;t&&this.addStyleRules(t)},addStyleRule:function(t,e){this.tagStyles[t]=e;var i=o[t];if(i)for(var n=0;n<i.length;n++)this.tagStyles[i[n]]=e},addStyleRules:function(t){for(var e in t)t.hasOwnProperty(e)&&this.addStyleRule(e,t[e])},removeStyleRule:function(t){delete this.tagStyles[t]},removeStyleRules:function(t){if(t&&t.length)for(var e=0;e<t.length;e++)this.removeStyleRule(t[e])},setVisibilityStyle:function(){null!=this.opts.data.isInvisible&&(this.opts.data.isInvisible?this.addStyleRule("visibility","hidden"):this.addStyleRule("visibility","visible"))},makeInvisible:function(){var t=this.tagStyles.visibility;!t&&"hidden"===t||(this.addStyleRule("visibility","hidden"),this.update())},makeVisible:function(){var t=this.tagStyles.visibility;t&&"visible"!==t&&(this.addStyleRule("visibility","visible"),this.update())},getTagStyleString:function(){var t="";return this.setVisibilityStyle(),t+=this.cssStringFromCSSObject(this.tagStyles)},cssStringFromCSSObject:function(t){var e,i="";for(e in t)t.hasOwnProperty(e)&&(i+=e+":"+t[e]+";");return i},setTagStyleString:function(){this.tagStyleString=this.getTagStyleString()}})},{riot:120}],64:[function(t,e,i){t("riot").mixin("teardown",{init:function(){var t=this;this.teardownQueue=[],this.on("unmount",function(){t.unmountTeardown()})},registerTeardownFunction:function(t,e){this.teardownQueue.push({callback:t,thisArg:e||this})},unmountTeardown:function(){for(var t=0;t<this.teardownQueue.length;t++){var e=this.teardownQueue[t];e.callback.call(e.thisArg)}}})},{riot:120}],65:[function(t,e,i){var n=t("riot"),o=t("../../modules/transitionStyleGenerator.js");n.mixin("transitions",{init:function(){var t,e,i;this.transitionStyles=this.getAllTransitionStyles(),this.hasTransitionsIn()&&this.hasTransitionsIn()&&(this.setTransitionsStartState(this.transitionStyles.in),this.on("mount",function(){this.setTransitionsEndState(this.transitionStyles.in)})),this.hasTransitionsOut()&&(e=(t=this).getAdInstance().getActionHandler(),i="transition-component-out:"+this.opts.data.name,e.on(i,function(){t.setTransitionsStartState(t.transitionStyles.out),t.setTransitionsEndState(t.transitionStyles.out)}))},getAllTransitionStyles:function(){var t=this.opts.data,e={in:{},out:{}};return this.hasTransitionsIn()&&(e.in=o.calculateTransitionStyles(t.transitionsIn)),this.hasTransitionsOut()&&(e.out=o.calculateTransitionStyles(t.transitionsOut)),e},setTransitionsStartState:function(t){this.addStyleRules(t.start)},setTransitionsEndState:function(t){var e;window.requestAnimationFrame?(e=this,window.requestAnimationFrame(function(){window.setTimeout(function(){e.addStyleRules(t.end),e.update()},1)})):(this.addStyleRules(t.end),this.update())},hasTransitionsIn:function(){return this.opts.data.transitionsIn&&this.opts.data.transitionsIn.length},hasTransitionsOut:function(){return this.opts.data.transitionsOut&&this.opts.data.transitionsOut.length}})},{"../../modules/transitionStyleGenerator.js":28,riot:120}],66:[function(t,e,i){var t=t("riot"),r=["play","pause","mute","unmute","reset","fullscreen","normalscreen"];t.mixin("video",{init:function(){this.registerTeardownFunction||this.mixin("teardown")},enforceVideoInterface:function(){for(var t=0;t<r.length;t++)"function"!=typeof this[r[t]]&&window.Tarnhelm.log(this.root.tagName+" failed to implement "+r[t]+"()")},setVideoEl:function(t){this.videoEl=t,this.shouldAutoplay=this.shouldItAutoplay();t="reely"!==this.data.type;this.isPausedByUser=void 0!==this.opts.data.video.autoplay?!this.opts.data.video.autoplay:!t,this.enforceVideoInterface(),this.initVideoElEventHandlers(),this.registerTeardownFunction(this.teardownVideoElEventHandlers),this.initVideoActionReceivers(),this.registerTeardownFunction(this.teardownVideoActionReceivers)},getVideoEl:function(){if(this.videoEl)return this.videoEl;window.Tarnhelm.log(this.root.tagName+" failed to call `setVideoEl` or passed a bad reference.")},initVideoActionReceivers:function(){this._setActionReceivers("on")},teardownVideoActionReceivers:function(){this._setActionReceivers("off")},_setActionReceivers:function(t){for(var e=this.getAdInstance().getActionHandler(),i=e[t].bind(e),n=(i("video:pause-all",this.pause),i("video:mute-all",this.mute),i("video:unmute-all",this.unmute),i("video:reset-all",this.reset),this.data.name),o=0;o<r.length;o++){var s=r[o];i("video:"+s+":"+n,this[s])}},initVideoElEventHandlers:function(){this.boundHandleVideoComplete=this.handleVideoComplete.bind(this),this.boundHandleLoadedMetadata=this.handleLoadedMetadata.bind(this);var t=this.getVideoEl();t&&"function"==typeof t.addEventListener&&(t.addEventListener("ended",this.boundHandleVideoComplete),t.addEventListener("loadedmetadata",this.boundHandleLoadedMetadata)),this.registerTeardownFunction(this.teardownVideoElEventHandlers)},teardownVideoElEventHandlers:function(){var t=this.getVideoEl();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("ended",this.boundHandleVideoComplete)},handleVideoComplete:function(t){this.handleEvent(t,"videoComplete"),this.shouldObeyMediaInteroperability&&this.shouldObeyMediaInteroperability()&&this.setMediaEnded()},handleLoadedMetadata:function(){this.isNonQualifyingVideoForMediaInterop&&this.isNonQualifyingVideoForMediaInterop()&&this.overrideMediaInteroperabilityObedienceForSlot()},shouldItAutoplay:function(){var t=!0;return null!=this.opts.data.video.autoplay&&(t=this.opts.data.video.autoplay),this.opts.data.video.canplaythroughRequired&&(t=!1),this.shouldObeyMediaInteroperability&&this.shouldObeyMediaInteroperability()?(t&&this.requestPlayback({userInitiated:!1}),!1):t},handleCanPlay:function(t,e){return function(){this.initialAutoplay?t.removeEventListener("canplay",this.boundHandleCanPlay):this.shouldObeyMediaInteroperability&&this.shouldObeyMediaInteroperability()?this.requestPlayback({userInitiated:!1}):(this.initialAutoplay=!0,t.play())}},doAutoplay:function(t){this.boundHandleCanPlay=this.handleCanPlay(t,void 0).bind(this),this.initialAutoplay=this.initialAutoplay||!1,t.readyState>=t.HAVE_FUTURE_DATA?this.shouldObeyMediaInteroperability&&this.shouldObeyMediaInteroperability()?this.requestPlayback({userInitiated:!1}):(t.play(),this.initialAutoplay=!0):t.addEventListener("canplay",this.boundHandleCanPlay)},fireSyntheticMediaPlaybackEvent:function(t,e){var i="";try{i=this.getAdInstance().getDomNode().ownerDocument.defaultView.name}catch(t){i="unknown"}window.top.mediaOrchestrator&&window.top.mediaOrchestrator.publish("mediaPlaybackEvent",{type:t,slotName:i,timestamp:Date.now(),dispatcher:e,targetElementId:this.getVideoEl()?this.getVideoEl().id:"unknown"})}})},{riot:120}],67:[function(t,e,i){var n=t("riot"),o=t("../constants").MINIMAL_VIDEO_NAME,t={getBridge:function(){return window.NativeWebBridge||(window.top.ad_utils&&window.top.ad_utils.mediaOrchestratorBridge?window.top.ad_utils.mediaOrchestratorBridge:void 0)},shouldObeyMediaInteroperability:function(){var t;return window.mediaInteroperabilitySlotObeyOverrides&&window.mediaInteroperabilitySlotObeyOverrides[this.getSlotId()]?(this.unsubscribeSlotFromMediaOrchestrator(),!1):(t=window.top.Tarnhelm.getDeviceInfo(),void 0===this.getBridge()||!t||this.isNonQualifyingVideoForMediaInterop()?(this.overrideMediaInteroperabilityObedienceForSlot(),!1):!!t.isIMDbApp||window.top.ad_utils&&window.top.ad_utils.isResponsive())},overrideMediaInteroperabilityObedienceForSlot:function(){window.mediaInteroperabilitySlotObeyOverrides||(window.mediaInteroperabilitySlotObeyOverrides={}),window.mediaInteroperabilitySlotObeyOverrides[this.getSlotId()]=!0,this.unsubscribeSlotFromMediaOrchestrator()},unsubscribeSlotFromMediaOrchestrator:function(){var t;this.hasSubscribed&&(this.hasSubscribed=!1,this.setMediaEnded(),t=this.getBridge())&&t.updateAssetFrameLocation&&t.updateAssetFrameLocation(this.getSlotId(),{x:0,y:0,width:0,height:0})},isNonQualifyingVideoForMediaInterop:function(){return void 0!==this.data.video.useMediaInterop?!this.data.video.useMediaInterop:this.data.type===o&&this.videoEl&&this.videoEl.duration<=10}};n.mixin("weblab",t),e.exports={WeblabMixin:t}},{"../constants":50,riot:120}],68:[function(t,e,i){t("riot").mixin("zoolander",{getAdIframeZoolander:function(){var t=this.getAdInstance().getContainerFrame().contentWindow.document;return new ad_design.Zoolander({document:t,id:this.opts.data.name,prefixId:"#"+this.opts.data.name})}})},{riot:120}],69:[function(i,t,e){var o=i("riot"),s=i("../modules/events/adEvent.js"),n=i("../modules/injectCSS.js"),r=i("../modules/url.js");function a(t,e,i){var n=t.getActionHandler(),e=(i?n.trigger({actionName:s.ASSET_PRELOAD_TIMEOUT}):e&&n.trigger({actionName:s.ASSET_PRELOAD_FINISH}),i=t,o.mount(i.getDomNode(),{adInstance:i}),i.initAfterMount(),n.trigger({actionName:s.AD_DISPLAYED}),t.getAdStore().getSecondaryAssetUrls());r.preloadUrls(e)}i("./app.tag"),t.exports={injectStyles:function(t){var e=i("../../css/ad.min.css.js");n.beforeNode(e,t)},mountAd:function(t){var e,i=t.getAdStore().getPrimaryAssetUrls();i&&i.length?(t.getActionHandler().trigger({actionName:s.ASSET_PRELOAD_START}),e=a.bind(null,t,!0),r.preloadUrlsWithCallback(i,e)):a(t)}}},{"../../css/ad.min.css.js":3,"../modules/events/adEvent.js":12,"../modules/injectCSS.js":18,"../modules/url.js":29,"./app.tag":32,riot:120}],70:[function(t,e,i){t("riot");var n=t("../../modules/countdownTimer.js"),r=t("../../modules/objectUtils.js"),o=t("./retrievers/asset.js"),s=t("./retrievers/background.js"),a=t("./retrievers/component.js"),d=t("./retrievers/dateRange.js"),l=t("./retrievers/rect.js"),u=(t("./retrievers/scale.js"),t("./retrievers/wrap.js")),c=t("./delegators/router.js"),h=(t("./delegators/transition.js"),t("./delegators/wrap.js")),p=["route","rotator:show-index","rotator:show-named-child","rotator:increment-index","rotator:decrement-index","minimize-ad","maximize-ad","hide-component","show-component"],m=["actions","background","css","defaultLink","frameProperties","frequencyCappedInit","id","isScalable","name","trackingConfigs"],f=["rect","frameProperties","spriteSheetDimensions"],g=["background","alternateBackground"],v="_orig",t="video",_="rotator",y="graphic",b="countdown",w={countdown:b,"countdown-number-text":b,"countdown-number-custom":b,rotator:_,"slider-rotator":_,graphic:y,rotatorbutton:y,reely:t,alphalfa:t,"minimal-video":t};function A(t,i,e){var n=this;this._adJson=t,this._options=e,this.actionHandler=i,this.componentNameIterator=0,this.setInitialState(t),this.initComponentTree(this._adJson),this.scaleAdToWidth(e.adWidth),this.initCountdownTimers(),i.on(p.join(" "),function(t,e){n.handleRoutingAction(e)}),i.on("set-wrap-background",function(t){t=n.state.wrapLibrary[t.wrapName];h.triggerWrapSwap(t)}),i.on("make-invisible",function(t){t=n.state.componentLibrary[t.componentName];t.isInvisible||(t.isInvisible=!0,i.trigger({actionName:"ad-state-updated"}))}),i.on("make-visible",function(t){t=n.state.componentLibrary[t.componentName];null!=t.isInvisible&&t.isInvisible&&(t.isInvisible=!1,i.trigger({actionName:"ad-state-updated"}))}),i.on("set-alternate-background",function(t){n.state.componentLibrary[t.componentName].useAlternateBackground=!0,i.trigger({actionName:"ad-state-updated"})}),i.on("unset-alternate-background",function(t){n.state.componentLibrary[t.componentName].useAlternateBackground=!1,i.trigger({actionName:"ad-state-updated"})}),i.on("scale-ad-to-width",function(t){t&&t.data&&t.data.width?n.scaleAdToWidth(t.data.width):window.Tarnhelm.log('Cannot scale ad, action "scale-ad-to-width" did not provide a valid width. Action:',t)}),i.on("enable-navigation-components",function(t){n.state.navigationComponentsDisabled&&(n.state.navigationComponentsDisabled=!1,i.trigger({actionName:"ad-state-updated"}))}),i.on("disable-navigation-components",function(t){n.state.navigationComponentsDisabled||(n.state.navigationComponentsDisabled=!0,i.trigger({actionName:"ad-state-updated"}))}),i.on("trigger-action-collection",function(t){var e;t.collectionName?(e=n.state.actions.collections[t.collectionName])&&e.length?i.triggerMany(e):window.Tarnhelm.log('Collection "'+t.collectionName+'" was not found in ad "'+n.state.name+'"'):window.Tarnhelm.log("Unable to trigger a collection of actions, missing collectionName")})}A.prototype={setInitialState:function(t){this.state=this.getStaticAdData(t),this.state.actions=this.state.actions||{},this.state.actions.collections=this.state.actions.collections||{},this.state.navigationComponentsDisabled=!1,this.state.scaleData={currentScale:1,currentWidth:this.state.frameProperties.width,pixelDensity:window.devicePixelRatio||1},this.state.countdownTimers={},this.state.componentLibrary={},this.state.componentNamesByType={},this.state.componentNamesByCategory={},this.state.activeSortedDateRanges=d.getActiveSortedDateRanges(window.Tarnhelm.getNowTime(),t.dateRanges),this.state.assetLibrary=this.buildAssetLibrary(),this.state.wrapLibrary=u.generateWrapLibrary(t.wraps,this.state.assetLibrary)},getStaticAdData:function(t){for(var e={},i=0;i<m.length;i++){var n=m[i];e[n]=t[n]}return r.clone(e)},buildAssetLibrary:function(){return o.generateAssetLibrary(this._adJson.assets,this.state.activeSortedDateRanges,this.state.scaleData.currentScale,this.state.scaleData.pixelDensity)},initComponentTree:function(t,e){var i,n,o=[];if(e&&e.length?n=e[e.length-1]:e=[],t.children&&t.children.length){e.push(t);for(var s=0;s<t.children.length;s++)o.push(t.children[s].name),this.initComponentTree(t.children[s],e);e.pop()}n?(i=r.clone(t)).parentName=n.name:i=this.state,delete i.children,i.childNames=o,this.initComponent(i,e),n&&this.addToComponentLibrary(i)},initComponent:function(t,e){t.isHidden=!!t.isHidden,this.storeOriginalValues(t,f),this.storeOriginalValues(t,g),t.arrowGraphics&&(this.inheritDefaultArrowValues(t.arrowGraphics),this.storeOriginalValues(t.arrowGraphics.previous,f),this.storeOriginalValues(t.arrowGraphics.next,f));var i=this.componentTypeInitters[t.type];"function"==typeof i&&i.call(this,t,e);i=this.componentCategoryInitters[w[t.type]];"function"==typeof i&&i.call(this,t,e),this.setComponentAssets(t)},storeOriginalValues:function(t,e){for(var i=0;i<e.length;i++){var n=e[i],o=t[n];o&&(t[n+v]=l.cloneRect(o))}},componentTypeInitters:{"countdown-number-text":function(t,e){var i={};e&&e.length&&(i=e[e.length-1]),void 0===t.targetDate&&(t.targetDate=i.targetDate),void 0===t.padZeros&&(t.padZeros=i.padZeros)},"countdown-number-custom":function(t,e){var i={};e&&e.length&&(i=e[e.length-1]),void 0===t.targetDate&&(t.targetDate=i.targetDate),void 0===t.padZeros&&(t.padZeros=i.padZeros),void 0===t.spritesheet&&(t.spritesheet=i.spritesheet),void 0===t.showAfterEnd&&(t.showAfterEnd=i.showAfterEnd)},reely:function(t,e){var i;t.controls&&(i=l.cloneRectAsPercentageValues(t.controls,t.rect),r.shallowMerge(t.controls,i))},"slider-rotator":function(t,e){this.componentTypeInitters._initArrowGraphics(t,e)},gallery:function(t,e){this.componentTypeInitters._initArrowGraphics(t,e)},_initArrowGraphics:function(t,e){t.arrowGraphics&&t.arrowGraphics.next&&t.arrowGraphics.previous||(window.Tarnhelm.log("Requirements not met! "+t.type+" requires arrowGraphics properties!"),t.arrowGraphics={},t.arrowGraphics.previous={css:{background:"red"},rect:{anchorX:"left",offsetX:5,offsetY:5,width:40,height:40}},t.arrowGraphics.next={css:{background:"red"},rect:{anchorX:"right",offsetX:5,offsetY:5,width:40,height:40}})}},componentCategoryInitters:{countdown:function(t,e){this.addCountdownTimer(t.targetDate,t.name)},rotator:function(t,e){t.activeIndex=parseInt(t.activeIndex,10)||0},video:function(t,e){a.hasAncestorOfType(t,"slider-rotator",e)&&(t.video.autoplay=!1)}},inheritDefaultArrowValues:function(t){var e,i,n;t&&t.previous&&t.next&&(e=t.previous,i=t.next,t.defaultArrow)&&(n=t.defaultArrow,r.mergeDefaults(e.rect,n.rect),r.mergeDefaults(i.rect,n.rect),r.mergeDefaults(e,n),r.mergeDefaults(i,n),t.flippable)&&(i.css=i.css||{},i.css.transform=i.css.transform||"",i.css.transform+=" scaleX(-1)")},addCountdownTimer:function(t,e){this.state.countdownTimers[t]||(this.state.countdownTimers[t]={countdownTimer:new n(t),listenerComponents:[]}),this.state.countdownTimers[t].listenerComponents.push(e)},initCountdownTimers:function(){for(var t=Object.keys(this.state.countdownTimers),e=0;e<t.length;e++){var i=this.state.countdownTimers[t[e]];this.initCountdownTimer(i)}},initCountdownTimer:function(e){var i=this,t=e.countdownTimer;t.on("tick",function(t){i.setComponentsTimerState(e.listenerComponents,t),i.actionHandler.trigger({actionName:"ad-state-updated"})});for(var n=0;n<e.listenerComponents.length;n++)this.state.componentLibrary[e.listenerComponents[n]].remaining=t.getRemainingValues(t.getMillisecondsRemaining())},setComponentsTimerState:function(t,e){for(var i=0;i<t.length;i++)this.state.componentLibrary[t[i]].remaining=e},setComponentAssets:function(t){switch(t.background&&t.background.asset&&r.shallowMerge(t.background,o.getGraphicAssetSources(t.background,this.state.assetLibrary)),t.alternateBackground&&t.alternateBackground.asset&&r.shallowMerge(t.alternateBackground,o.getGraphicAssetSources(t.alternateBackground,this.state.assetLibrary)),t.type){case"animaniac":case"graphic":case"rotatorbutton":r.shallowMerge(t,o.getGraphicAssetSources(t,this.state.assetLibrary));break;case"gallery":case"slider-rotator":t.arrowGraphics&&t.arrowGraphics.previous&&t.arrowGraphics.next&&(r.shallowMerge(t.arrowGraphics.previous,o.getGraphicAssetSources(t.arrowGraphics.previous,this.state.assetLibrary)),r.shallowMerge(t.arrowGraphics.next,o.getGraphicAssetSources(t.arrowGraphics.next,this.state.assetLibrary)));break;case"alphalfa":case"reely":case"minimal-video":r.shallowMerge(t.video,o.getVideoAssetSources(t.video,this.state.assetLibrary))}},addToComponentLibrary:function(t){var e=t.name;this.state.componentLibrary[e]&&(e+="__"+ ++this.componentNameIterator,window.Tarnhelm.log('More than one component exists with name"'+t.name+'", renaming to "'+e+'"')),t.name=e,this.state.componentLibrary[e]=t,this.addToNamesByType(t.type,t.name),this.addToNamesByCategory(t.type,t.name)},addToNamesByType:function(t,e){this._addToNames(this.state.componentNamesByType,t,e)},addToNamesByCategory:function(t,e){t=w[t];t&&this._addToNames(this.state.componentNamesByCategory,t,e)},_addToNames:function(t,e,i){return t[e]||(t[e]=[]),t[e].push(i),t},handleRoutingAction:function(t){if(this.state.isTransitioning)window.Tarnhelm.log('Transition in progress, ignoring action "'+t.actionName+'"');else switch(t.actionName){case"route":c.route(t.data,this.state.componentLibrary,this.state);break;case"rotator:show-index":c.routeRotatorToIndex(t.componentName,t.data.index,this.state.componentLibrary,this.state);break;case"rotator:show-named-child":c.routeRotatorToNamedChild(t.componentName,t.data.childName,this.state.componentLibrary,this.state);break;case"rotator:increment-index":c.routeRotatorToIncrementedIndex(t.componentName,this.state.componentLibrary,this.state);break;case"rotator:decrement-index":c.routeRotatorToDecrementedIndex(t.componentName,this.state.componentLibrary,this.state);break;case"minimize-ad":c.routeRotatorToNamedChild("expander","minimized",this.state.componentLibrary,this.state);break;case"maximize-ad":c.routeRotatorToNamedChild("expander","maximized",this.state.componentLibrary,this.state);break;case"hide-component":c.route({hideComponents:[t.componentName]},this.state.componentLibrary,this.state);break;case"show-component":c.route({showComponents:[t.componentName]},this.state.componentLibrary,this.state)}},scaleAdToWidth:function(t){if(this.state.isScalable&&t)if(t===this.state.frameProperties.width)window.Tarnhelm.log('Ad "'+this.state.name+'" is already '+t+"px wide, not rescaling");else{this.updateScaleData(t),this.state.assetLibrary=this.buildAssetLibrary(),r.shallowMerge(this.state.frameProperties,l.getScaledRect(this.state.frameProperties_orig,this.state.scaleData.currentScale));for(var e=Object.keys(this.state.componentLibrary),i=0;i<e.length;i++){var n=e[i],n=this.state.componentLibrary[n];this.scaleBasedOnOriginalValues(n,f,l.getScaledRect),this.scaleBasedOnOriginalValues(n,g,s.getScaledBackground),n.arrowGraphics&&(this.scaleBasedOnOriginalValues(n.arrowGraphics.previous,f,l.getScaledRect),this.scaleBasedOnOriginalValues(n.arrowGraphics.next,f,l.getScaledRect)),this.setComponentAssets(n)}this.actionHandler.trigger({actionName:"resize-ad-container",data:{rect:this.state.frameProperties}}),this.actionHandler.trigger({actionName:"ad-state-updated"})}},scaleBasedOnOriginalValues:function(t,e,i){for(var n=0;n<e.length;n++){var o=e[n];t[o]&&r.shallowMerge(t[o],i(t[o+v],this.state.scaleData.currentScale))}},updateScaleData:function(t){this.state.scaleData.currentScale=t/this.state.frameProperties_orig.width,this.state.scaleData.currentWidth=t},getState:function(){return this.state},getComponentState:function(t){return this.state.componentLibrary[t]},getComponentLibrary:function(){return this.state.componentLibrary},getComponentNamesByType:function(t){var e=this.state.componentNamesByType[t];return e||window.Tarnhelm.log("Requested names for a component type with nothing indexed: ",t),e||[]},getComponentNamesByCategory:function(t){var e=this.state.componentNamesByCategory[t];return e||window.Tarnhelm.log("Requested names for a component category with nothing indexed: ",t),e||[]},getAdId:function(){return this.state.id},getAdName:function(){return this.state.name},requiresAutoplay:function(){return this.state.frequencyCappedInit&&this.state.frequencyCappedInit.actions&&this.state.frequencyCappedInit.actions.length},getFrequencyCappedInitActions:function(){return this.state.frequencyCappedInit&&this.state.frequencyCappedInit.actions?this.state.frequencyCappedInit.actions:[]},getPrimaryAssetUrls:function(){return o.getPreloadAssetUrls("primary",this.state.assetLibrary)},getSecondaryAssetUrls:function(){return o.getPreloadAssetUrls("secondary",this.state.assetLibrary)},getNavigationComponentsDisabledFlag:function(){return this.state.navigationComponentsDisabled}},e.exports=A},{"../../modules/countdownTimer.js":9,"../../modules/objectUtils.js":23,"./delegators/router.js":71,"./delegators/transition.js":72,"./delegators/wrap.js":73,"./retrievers/asset.js":74,"./retrievers/background.js":75,"./retrievers/component.js":76,"./retrievers/dateRange.js":77,"./retrievers/rect.js":78,"./retrievers/scale.js":80,"./retrievers/wrap.js":82,riot:120}],71:[function(t,e,i){var g=t("../retrievers/component.js"),v=t("./transition.js"),_=t("../retrievers/rect.js"),y=t("../retrievers/rotator.js"),b=t("../../../modules/objectUtils.js");e.exports={route:function(t,i,n){for(var e=t.rotatorConfigs||[],o=t.hideComponents||[],t=t.showComponents||[],s=window.Tarnhelm.getAd(n.id).getActionHandler(),r=[],a=!1,d=[],l=0;l<e.length;l++){var u=e[l],c=i[u.name];c&&u.childName&&null!=u.index&&(u.index=y.findNamedChildIndex(u.name,u.childName,i)),c&&c.activeIndex!==u.index&&(d.push(u),"expander"===c.name&&(a=!0),c.isHidden||r.push(y.getActiveChildName(c)))}var h=g.getHiddenComponentNames(t,i),p=g.getUnhiddenComponentNames(o,i),r=r.concat(p);if(d.length||p.length||h.length){for(var m,f=[],l=0;l<r.length;l++)f=f.concat(g.buildTransitionsOutComponentList(r[l],i));f.length?(m=this,n.isTransitioning=!0,v.triggerTransitionsOut(f,i,s,function(){var t,e=y.mapRotatorConfigsToComponentName(d);b.shallowMergeMany(i,e),a&&(e=n.componentLibrary.expander,t=y.getActiveChildComponent(e,n.componentLibrary),t=_.getDimensions(t.rect),b.shallowMerge(n.frameProperties,t),b.shallowMerge(e.rect,t)),m.setComponentHiddenStates(p,i,!0),m.setComponentHiddenStates(h,i,!1),n.isTransitioning=!1,s.trigger({actionName:"ad-state-updated"})})):(t=y.mapRotatorConfigsToComponentName(d),b.shallowMergeMany(i,t),a&&(o=n.componentLibrary.expander,t=y.getActiveChildComponent(o,n.componentLibrary),t=_.getDimensions(t.rect),b.shallowMerge(n.frameProperties,t),b.shallowMerge(o.rect,t)),this.setComponentHiddenStates(p,i,!0),this.setComponentHiddenStates(h,i,!1),s.trigger({actionName:"ad-state-updated"}))}},routeRotatorToIndex:function(t,e,i,n){this.route({rotatorConfigs:[{name:t,index:e}]},i,n)},routeRotatorToIncrementedIndex:function(t,e,i){var n=y.getIncrementedIndex(e[t]);this.routeRotatorToIndex(t,n,e,i)},routeRotatorToDecrementedIndex:function(t,e,i){var n=y.getDecrementedIndex(e[t]);this.routeRotatorToIndex(t,n,e,i)},routeRotatorToNamedChild:function(t,e,i,n){e=y.findNamedChildIndex(t,e,i);this.routeRotatorToIndex(t,e,i,n)},setComponentHiddenStates:function(t,e,i){for(var n=0;n<t.length;n++)e[t[n]].isHidden=!!i}}},{"../../../modules/objectUtils.js":23,"../retrievers/component.js":76,"../retrievers/rect.js":78,"../retrievers/rotator.js":79,"./transition.js":72}],72:[function(t,e,i){t("../../../modules/transitionStyleGenerator.js");var s=t("../retrievers/transition.js");e.exports={triggerTransitionsOut:function(e,t,i,n){for(var t=s.getMaxTransitionOutTime(e,t),o=0;o<e.length;o++)i.trigger({actionName:"transition-component-out:"+e[o]});window.setTimeout(function(){"function"==typeof n&&n();for(var t=0;t<e.length;t++)i.trigger({actionName:"transition-component-out:"+e[t]+":complete"})},t)}}},{"../../../modules/transitionStyleGenerator.js":28,"../retrievers/transition.js":81}],73:[function(t,e,i){var n=t("../retrievers/wrap.js");t("../retrievers/rotator.js");e.exports={triggerRotatorWrapSwap:function(t,e){var i=n.getWrapNameFromRotator(t,e.componentLibrary);i?(e=n.getWrapData(i,e.wrapLibrary))?this.triggerWrapSwap(e):window.Tarnhelm.log('Cannot trigger a wrap swap for rotator "'+t.name+'" and wrapName "'+i+'", could not find a matching wrap config'):window.Tarnhelm.log('Cannot trigger a wrap swap for rotator "'+t.name+'", could not get the wrap name')},triggerWrapSwap:function(t){t=n.generateWrapAction(t);window.Tarnhelm.triggerTopAction(t)}}},{"../retrievers/rotator.js":79,"../retrievers/wrap.js":82}],74:[function(t,e,i){var n={image:!0,video:!0},d={image:"url",video:"url"},l={video:"source",image:"source"},u={graphic:[{src:"asset",dest:"source"},{src:"activeAsset",dest:"activeSource"},{src:"hoverAsset",dest:"hoverSource"},{src:"fullAdHoverAsset",dest:"fullAdHoverSource"},{src:"disabledAsset",dest:"disabledSource"}],video:[{src:"asset",dest:"url"}]},a={video:!0},c={primary:!0,secondary:!0};e.exports={generateAsset:function(t,e,i){e=this.getCurrentDatedAsset(t,e),e=this.generateScaledAsset(e,t.type,i);return e?e.preload=t.preload:window.Tarnhelm.log('Asset "'+t.name+'" is not configured correctly'),e},generateAssetLibrary:function(t,e,i,n){for(var o={},s=Object.keys(t),r=this.getAssetScale(i,n),a=0;a<s.length;a++){var d=s[a],l=t[d],l=this.updateDeprecatedAssetSyntax(l),l=this.generateAsset(l,e,r);l?o[d]=l:window.Tarnhelm.log('There was a problem with asset "'+d+'", Tarnhelm was unable to initialize it')}return o},generateScaledAsset:function(t,e,i){for(var n={},o=this.getValidatedAssetType(e),s=d[o],r=i;0<r;r--){var a=this.getScaledAssetUrlKey(s,r);if(t[a])return n[l[o]]=t[a],n.type=o,n}},getCurrentDatedAsset:function(t,e){if(e&&e.length&&t.dateOverrides)for(var i=e.length-1;-1<i;i--){var n=e[i].name;if(t.dateOverrides[n])return t.dateOverrides[n]}return t},getValidatedAssetType:function(t){return n[t]?t:"image"},getScaledAssetUrlKey:function(t,e){return"number"==typeof e&&1<e?t+parseInt(e,10)+"x":t},getAssetScale:function(t,e){return Math.ceil(Math.abs(t*e))},getAssetSource:function(t,e){e=e[t];if(e){var t=this.getAssetSourceKey(e.type),i=e[t];if(i)return i;window.Tarnhelm.log('Error, asset "'+e+'" is missing its source, prop "'+t+'"')}else window.Tarnhelm.log('Error, asset named "'+e+'" does not exist')},getAssetSourceKey:function(t){t=this.getValidatedAssetType(t);return l[t]},getMappedAssetSources:function(t,e,i){var n={};if(t)if(e)if(i&&u[i])for(var o=u[i],s=0;s<o.length;s++){var r,a=o[s];t[a.src]&&(r=this.getAssetSource(t[a.src],e))&&(n[a.dest]=r)}else window.Tarnhelm.log('Cannot get assets, componentType "'+i+'" is not supported');else window.Tarnhelm.log("Cannot get assets, assetLibrary was not provided");else window.Tarnhelm.log("Cannot get assets, component was not provided");return n},getGraphicAssetSources:function(t,e){return this.getMappedAssetSources(t,e,"graphic")},getVideoAssetSources:function(t,e){return this.getMappedAssetSources(t,e,"video")},getPreloadAssetUrls:function(t,e){var i=[];if("string"==typeof t&&c[t])for(var n=Object.keys(e),o=0;o<n.length;o++){var s=n[o],r=e[s];r.preload!==t||a[r.type]||this.getAssetSource(s,e)&&i.push(r.source)}else window.Tarnhelm.log('Problem preloading assets, "'+t+'" should be "primary" or "secondary"');return i},updateDeprecatedAssetSyntax:function(t){var e,i,n={};for(e in t)if("fileName"===e)n.url=t[e]+".mp4";else if("dateOverrides"===e){var o=t[e];for(i in o)o[i]=this.updateDeprecatedAssetSyntax(o[i]);n.dateOverrides=o}else n[e]=t[e];return n}}},{}],75:[function(t,e,i){var l=t("./scale.js"),u=["position","size"],c=/\s+/;e.exports={getScaledBackground:function(t,e){if("object"==typeof t){for(var i={},n=0;n<u.length;n++){var o=u[n],s=t[o];if(s){for(var r=s.split(c),a=0;a<r.length;a++){var d=r[a];"number"==typeof l.getRawDimension(d)&&(r[a]=l.getDimensionWithUnit(l.getScaledDimension(l.getRawDimension(d),e)))}i[o]=r.join(" ")}}return i}window.Tarnhelm.log('Cannot scale, "background" is not an object:',t)},cloneBackground:function(t){for(var e={},i=0;i<u.length;i++){var n=u[i];t[n]&&(e[n]=t[n])}return e}}},{"./scale.js":80}],76:[function(t,e,i){var r=t("./rotator.js");e.exports={buildTransitionsOutComponentList:function(t,e){var i=[],n=e[t];if(n&&!n.isHidden&&(n.transitionsOut&&n.transitionsOut.length&&i.push(n.name),n.childNames)&&n.childNames.length)if("rotator"===n.type)t=r.getActiveChildComponent(n,e),i=i.concat(this.buildTransitionsOutComponentList(t.name,e));else for(var o=0;o<n.childNames.length;o++){var s=e[n.childNames[o]];s.isHidden||(i=i.concat(this.buildTransitionsOutComponentList(s.name,e)))}return i},filterComponentsByPropertyValue:function(t,e,i,n){for(var o=[],s=0;s<t.length;s++){var r=t[s],a=e[r];a&&a[i]===n&&o.push(r)}return o},filterComponentsByParentNode:function(t,e){for(var i={},n=0;n<t.length;n++)i[t[n]]=1;for(var o=[],n=0;n<t.length;n++){var s=!1,r=e[t[n]];if(r){for(;r.parentName&&!s;)i[(r=e[r.parentName]).name]&&(s=!0);s||o.push(t[n])}}return o},isDescendantOfType:function(t,e,i){for(var n=i[t];n&&n.parentName;)if((n=i[n.parentName])&&n.type===e)return!0;return!1},hasAncestorOfType:function(t,e,i){if(i&&i.length)for(var n=i.length-1;0<=n;n--)if(i[n].type===e)return!0;return!1},hasAncestorOfName:function(t,e,i){t=i[t].parentName;return this._hasAncestorOfNameRecursive(e,t,i)},_hasAncestorOfNameRecursive:function(t,e,i){e=i[e];return!!e&&(e.name===t||this._hasAncestorOfNameRecursive(t,e.parentName,i))},getHiddenComponentNames:function(t,e){return this.filterComponentsByPropertyValue(t,e,"isHidden",!0)},getUnhiddenComponentNames:function(t,e){return this.filterComponentsByPropertyValue(t,e,"isHidden",!1)}}},{"./rotator.js":79}],77:[function(t,e,i){e.exports={compareDateRanges:function(t,e){t=new Date(t.start),e=new Date(e.start),t=t.getTime(),e=e.getTime();return t<e?-1:e<t?1:0},getActiveSortedDateRanges:function(t,e){var i=[];if(!e||!e.length)return i;for(var n=0;n<e.length;n++)t>=new Date(e[n].start).getTime()&&i.push(e[n]);return i.sort(this.compareDateRanges)}}},{}],78:[function(t,e,i){var l=t("./scale.js"),r=["offsetX","offsetY","width","height"],u={offsetX:"width",offsetY:"height",width:"width",height:"height"};e.exports={getDimensions:function(t){return{height:t.height,width:t.width}},getScaledRect:function(t,e){if("object"==typeof t){for(var i={},n=0;n<r.length;n++){var o=r[n],s=t[o];s&&"number"==typeof l.getRawDimension(s)&&(i[o]=l.getScaledDimension(l.getRawDimension(s),e))}return i}window.Tarnhelm.log('Cannot scale, "rect" is not an object:',t)},cloneRect:function(t){for(var e={},i=0;i<r.length;i++){var n=r[i];t[n]&&(e[n]=t[n])}return e},cloneRectAsPercentageValues:function(t,e){e.width;for(var i={},n=Object.keys(u),o=0;o<n.length;o++){var s,r=n[o],a=u[r],d=l.getRawDimension(t[r]);d&&((s=l.getRawDimension(e[a]))||window.Tarnhelm.log('Could not scale rect value for "'+r+'", parent rect value for "'+a+'" is missing'),"number"==typeof d&&("number"==typeof s?d=Math.round(d/s*100)+"%":window.Tarnhelm.log('Could not scale rect value for "'+r+'", parent rect value for "'+a+'" is not a pixel value')),i[r]=d)}return i}}},{"./scale.js":80}],79:[function(t,e,i){e.exports={isValidRotator:function(t){return t&&(e=t).childNames&&0<e.childNames.length&&0<=(e=t).activeIndex&&e.activeIndex<e.childNames.length;var e},getActiveChildName:function(t){var e;return(e=this.isValidRotator(t)?t.childNames[t.activeIndex]:e)||window.Tarnhelm.log('Unable to find active child name for rotator "'+t.name+'"'),e},getActiveChildComponent:function(t,e){var i,t=this.getActiveChildName(t);return i=t?e[t]:i},mapRotatorConfigsToComponentName:function(t){for(var e={},i=0;i<t.length;i++){var n=t[i];e[n.name]={activeIndex:n.index}}return e},findNamedChildIndex:function(t,e,i){var n=i[t];if(n){if(n&&n.childNames&&n.childNames.length)for(var o=0;o<n.childNames.length;o++)if(n.childNames[o]===e)return o;return window.Tarnhelm.log("Requested rotator:show-named-child for a non existent childName. rotatorName:",t," childName: ",e),n.activeIndex}window.Tarnhelm.log("Requested rotator:show-named-child for a non existent rotator . rotator:",t)},getIncrementedIndex:function(t){if(this.isValidRotator(t)){var e=t.activeIndex;if(e+1<=t.childNames.length-1)return e+1}return 0},getDecrementedIndex:function(t){var e;return this.isValidRotator(t)?(e=t.activeIndex,t=t.childNames.length-1,0<=e-1?e-1:t):0}}},{}],80:[function(t,e,i){var n=new RegExp(/^\-?\d*(\.\d*)?(px)?$/);e.exports={getScaledDimension:function(t,e){if("number"==typeof t&&"number"==typeof e)return Math.ceil(t*e);window.Tarnhelm.log("getScaledDimension() failed, both args were not numbers:",t,e)},getRawDimension:function(t){return"string"!=typeof t&&"number"!=typeof t?(window.Tarnhelm.log("Cannot get raw dimension from invalid value: ",t),t):(t=t.toString(),n.test(t)?parseFloat(t):t)},getDimensionWithUnit:function(t){t=this.getRawDimension(t);return 0===t?"0":"number"==typeof t?t+"px":t}}},{}],81:[function(t,e,i){var s=t("../../../modules/transitionStyleGenerator.js");e.exports={getMaxTransitionOutTime:function(t,e){for(var i=[],n=0;n<t.length;n++){var o=e[t[n]];i.push(s.getMaxTransitionTime(o.transitionsOut))}return Math.max.apply(null,i)}}},{"../../../modules/transitionStyleGenerator.js":28}],82:[function(t,e,i){var d=t("./asset.js"),n=t("./rotator.js"),l=t("../../../modules/objectUtils.js");e.exports={generateWrapLibrary:function(t,e){t=t||{};for(var i={},n=Object.keys(t),o=0;o<n.length;o++){var s=n[o],r=(t[s].asset,l.clone(t[s])),a=d.getGraphicAssetSources(r,e);l.shallowMerge(r,a),i[s]=r}return i},getWrapNameFromRotator:function(t,e){e=n.getActiveChildComponent(t,e);return e&&e.wrap?e.wrap:t&&t.wrapConfig&&t.wrapConfig.default?t.wrapConfig.default:void window.Tarnhelm.log('Cannot find wrap for rotator "'+t.name+'"')},getWrapData:function(t,e){return e[t]},generateWrapAction:function(t){return{actionName:"set-wrap-background",data:l.clone(t)}}}},{"../../../modules/objectUtils.js":23,"./asset.js":74,"./rotator.js":79}],83:[function(t,e,i){var o=t("./modules/adInstance.js"),n=t("./modules/wrapSwapper.js"),s=t("./modules/actionHandler.js"),r=t("./modules/eventEmitter.js"),a=t("./modules/requirementsTester.js"),d=t("./modules/objectUtils.js"),l=t("./modules/url.js"),u=t("./renderer/renderer.js"),c=t("./modules/deviceInfo.js"),h=t("./modules/events/metricEventSink.js"),p=t("./modules/mobileLog.js"),m=t("./modules/events/tarnhelmEvent.js"),f=t("./legacyTracking.js"),g=(t("IMDbAdvertisingJsModules"),{}),v=!1,_=!1,y=0,b=new c(window.location.href,window.navigator.userAgent),w=new a(b.getInfo());function A(t){t=d.clone(t);return delete t.adName,delete t.isGlobal,t}var E,T,t="wrapper";e.exports=window.Tarnhelm={getAd:function(t){return g[t]},getAdByName:function(t){for(var e,i=Object.keys(g),n=0;n<i.length;n++)if(g[i[n]].getName()===t){e=g[i[n]];break}return e},initAdInstance:function(t,e,i,n){this.getAd(i.id)&&this.log('Ad with id "'+i.id+'" already exists. OVERWRITING!'),i.name&&this.getAdByName(i.name)&&this.log('Ad with name "'+i.name+'" already exists. OVERWRITING!'),u.injectStyles(t);t=new o({domNode:t,containerFrame:e,eventSinks:[T],adData:i,trackingConsumer:n||f(i)});return g[i.id]=t,u.mountAd(t),t},triggerTopAction:function(t){E.trigger(t)},triggerGlobalAction:function(t){for(var e=Object.keys(g),i=A(t),n=0;n<e.length;n++)this.getAd(e[n]).getActionHandler().trigger(i)},triggerTandemAction:function(t){var e,i;t.adName?(e=this.getAdByName(t.adName))?(i=A(t),e.getActionHandler().trigger(i)):this.log('Tarnhelm.triggerTandemAction failed, adInstance for "'+t.adName+'" was not found'):this.log("Tarnhelm.triggerTandemAction failed, adName was not provided")},getNowTime:function(){return Date.now()+y},getIsDebug:function(){return v},setIsDebug:function(t){v=!!t},getIsMobileDebug:function(){return _},setIsMobileDebug:function(t){_=!!t},log:function(){var t;v&&window.console&&window.console.log&&(t=Array.prototype.slice.call(arguments),console.log.apply(console,t),_)&&this.getDeviceInfo().isMobileDevice&&window.top.document.body&&(window.top.document.body.style.position="relative",window.top.mobileLog=window.top.mobileLog||new p(window.top.document.body),window.top.mobileLog.log(t))},getVersion:function(){return"1.0.1"},getDeviceInfo:function(){return b.getInfo()},getRequirementsTester:function(){return w}},E=new s(new r,w),"1"!==(c=l.getQueryParam("tarnhelmDebug",window.location.href))&&"true"!==c||(v=!0,window.Tarnhelm.log("Tarnhelm is in DEBUG mode.")),"1"!==(c=l.getQueryParam("tarnhelmMobileDebug",window.location.href))&&"true"!==c||(v=_=!0,window.Tarnhelm.log("Tarnhelm is in MOBILE DEBUG mode.")),c=l.getQueryParam("simulatedDate",window.location.href),a=new Date(c),c&&"Invalid Date"!==a.toString()&&(y=a.getTime()-Date.now()),new n(t,E),T=new h(E),E.trigger({actionName:m.READY})},{"./legacyTracking.js":4,"./modules/actionHandler.js":5,"./modules/adInstance.js":6,"./modules/deviceInfo.js":10,"./modules/eventEmitter.js":11,"./modules/events/metricEventSink.js":13,"./modules/events/tarnhelmEvent.js":14,"./modules/mobileLog.js":21,"./modules/objectUtils.js":23,"./modules/requirementsTester.js":25,"./modules/url.js":29,"./modules/wrapSwapper.js":31,"./renderer/renderer.js":69,IMDbAdvertisingJsModules:99}],84:[function(t,e,i){Object.defineProperty(i,"__esModule",{value:!0}),i.isResponsiveDisabled=i.getLastBreakPoint=i.constructCurrentSlotSizeMap=i.constructClientSideUrl=void 0;function a(t,o,s,r){var t=t.split(","),e=new Map;return t.filter(function(t){return t in o}).map(function(t){if(t in o){var e=o[t],i=l(s,e);if(r){var n=l(r,e);if(n===i||e[""+i]===e[""+n])return null}return[t,0<i?e[i.toString()]:0]}}).filter(function(t){return null!==t}).forEach(function(t){return e.set(t[0],t[1])}),e}var d=t("./helper-functions");i.constructCurrentSlotSizeMap=a;function l(e,t){t=Object.keys(t).map(function(t){return parseInt(t,10)}).filter(function(t){return e<t}).sort(function(t,e){return t-e});return 0<t.length?t[0]:0}i.constructClientSideUrl=function(t,e,i,n,o){var s,r;return d.isDefined(t)&&""!==t&&d.isDefined(e)&&""!==e&&d.isDefined(i)&&0!==Object.keys(i).length&&(s=d.isDefined(window)?window.innerWidth:375,e=a(e,i,s,n),r="",e.forEach(function(t,e){u(e,o,s)||(r+=e+"="+t+",")}),r=r.replace(new RegExp(",$"),""),0<(r=0<(r=encodeURIComponent(r)).length?"&slotSizeMap="+r:"").length)?""+t+r:""},i.getLastBreakPoint=l;var u=function(e,i,t){var n,o;return!!(i&&e&&e in i&&t)&&(o=Object.keys(i[e]).map(function(t){return parseInt(t,10)}).sort(),n=d.find(o,function(t){return!i[e][t]})||0,o=d.find(o,function(t){return i[e][t]})||0,n<t)&&t<=o};i.isResponsiveDisabled=u},{"./helper-functions":85}],85:[function(t,e,i){Object.defineProperty(i,"__esModule",{value:!0}),i.isDefined=i.find=void 0,i.find=function(t,e){for(var i=0,n=t;i<n.length;i++){var o=n[i];if(e(o))return o}},i.isDefined=function(t){return void 0!==t}},{}],86:[function(t,e,i){Object.defineProperty(i,"__esModule",{value:!0}),i.constructCurrentSlotSizeMap=i.constructClientSideUrl=i.isDefined=void 0;var n=t("./client-url-constructor"),o=(Object.defineProperty(i,"constructClientSideUrl",{enumerable:!0,get:function(){return n.constructClientSideUrl}}),Object.defineProperty(i,"constructCurrentSlotSizeMap",{enumerable:!0,get:function(){return n.constructCurrentSlotSizeMap}}),t("./helper-functions"));Object.defineProperty(i,"isDefined",{enumerable:!0,get:function(){return o.isDefined}})},{"./client-url-constructor":84,"./helper-functions":85}],87:[function(t,e,i){e.exports={makeBufferCanvas:function(){var t=document.createElement("canvas");return t.width=this.output.width,t.height=2*this.output.height,t},isIE:function(){return/msie|trident/.test(navigator.userAgent.toLowerCase())},clear2DCanvas:function(t,e,i){t.clearRect(0,0,e,i)}}},{}],88:[function(t,e,i){function n(t){this.doDebug=!1,this.video=t.video,this.output=t.output,this.buffer=t.buffer||void 0,this.dismissalTimeout=t.dismissalTimeout,this.originalOutputDisplay=this.output.style.display||"inline-block",this.outputHeight=this.output.height,this.outputWidth=this.output.width,t.loop&&(this.loop=t.loop,this.setLoopConfig(t)),null!=t.stillFrameMS&&(this.stillFrameInS=t.stillFrameMS/1e3),this.isSupported=!0,this.renderMode=this.determineRenderMode({colorCorrect:t.colorCorrect,maskUrl:t.maskUrl,forceCanvas:t.forceCanvas,horizontalStack:t.horizontalStack}),this.renderMode!==this.RENDER_MODES.CANVAS&&this.renderMode!==this.RENDER_MODES.GL||this.runTaintedContentCheck(this.video),this.setupRenderer()}var o=t("./renderers/alphalfa-renderer-webgl.js"),s=t("./renderers/alphalfa-renderer-horizontal-gl.js"),r=t("./renderers/alphalfa-renderer-canvas.js"),a=t("./renderers/alphalfa-renderer-mask.js"),d=t("./renderers/alphalfa-renderer-color-correct.js"),l=t("./alphalfa-utils.js");t("../polyfills/request-animation-frame.js");n.prototype={listen:function(){this.isSupported&&(this.boundFrameHandler=this.boundFrameHandler||this.frameHandler.bind(this),this.video.addEventListener("play",this.boundFrameHandler,!1),this.boundEndHandler=this.boundEndHandler||this.videoEndedHandler.bind(this),this.video.addEventListener("ended",this.boundEndHandler,!1),this.video.loop=this.loop)},teardown:function(){this.video.removeEventListener("play",this.boundFrameHandler),this.video.removeEventListener("ended",this.boundEndHandler),this.video.removeEventListener("seeked",this.boundLoopCountOnSeeked),this.video.removeEventListener("seeked",this.boundFreezeFrameOnSeeked),this.video=void 0,this.renderer.teardown(),this.output.width=1,this.output.height=1,this.output.parentNode.removeChild(this.output),this.output=void 0},RENDER_MODES:{GL:"gl",CANVAS:"canvas",MASK:"mask",COLOR_CORRECT:"color-correct",HORIZONTAL_GL:"horizontal-gl"},determineRenderMode:function(t){t=t.colorCorrect?this.RENDER_MODES.COLOR_CORRECT:t.maskUrl?(this.maskUrl=t.maskUrl,this.RENDER_MODES.MASK):t.forceCanvas?this.RENDER_MODES.CANVAS:t.horizontalStack?(this.gl=this.output.getContext("webgl")||this.output.getContext("experimental-webgl"),this.RENDER_MODES.HORIZONTAL_GL):this._determineRenderMode();return this.doDebug&&console.log("Alphalfa determined renderMode :: ",t),t},_determineRenderMode:function(){var e=!0;this.gl=void 0;try{this.gl=this.output.getContext("webgl")||this.output.getContext("experimental-webgl")}catch(t){e=!1}return(e=this.gl?e:!1)?this.RENDER_MODES.GL:this.RENDER_MODES.CANVAS},setupRenderer:function(){var t={doDebug:this.doDebug,video:this.video,buffer:this.buffer,output:this.output,dieBecauseUnsupported:this.dieBecauseUnsupported};switch(this.renderMode){case this.RENDER_MODES.CANVAS:case this.RENDER_MODES.MASK:case this.RENDER_MODES.COLOR_CORRECT:try{t.outputCtx=this.output.getContext("2d")}catch(t){return this.doDebug&&console.log("Error executing `getContext`, canvas not supported."),void this.dieBecauseUnsupported()}t.outputHeight=this.outputHeight,t.outputWidth=this.outputWidth}switch(this.renderMode){case this.RENDER_MODES.GL:t.gl=this.gl,this.renderer=new o(t);break;case this.RENDER_MODES.CANVAS:this.renderer=new r(t);break;case this.RENDER_MODES.MASK:t.maskUrl=this.maskUrl,this.renderer=new a(t);break;case this.RENDER_MODES.COLOR_CORRECT:this.renderer=new d(t);break;case this.RENDER_MODES.HORIZONTAL_GL:t.gl=this.gl,this.renderer=new s(t)}this.setupRendererContext()},setupRendererContext:function(){this.renderer.setupRendererContext(),this.doDebug||(this.video.style.display="none",this.buffer&&(this.buffer.style.display="none")),this.processFrame=this.determineProcessFrame()},determineProcessFrame:function(){if(this.renderMode!==this.RENDER_MODES.CANVAS||!l.isIE()||this.hasBindSupport())return this.renderer.getProcessFrameFunc();this.doDebug&&console.log("Error: IE <9 does not support Function.bind. Aborting."),this.dieBecauseUnsupported()},hasBindSupport:function(){return"bind"in Function},runTaintedContentCheck:function(t){var e=document.createElement("canvas");e.width=e.height=1,this.boundTestTainted=this.testTainted.bind(this,t,e),t.addEventListener("canplay",this.boundTestTainted)},testTainted:function(t,e){e=e.getContext("2d");e.drawImage(t,0,0,1,1);try{e.getImageData(0,0,1,1)}catch(t){this.dieBecauseTainted()}t.removeEventListener("canplay",this.boundTestTainted),e=null},frameHandler:function(){return!!this.video&&(this.video.paused||this.video.ended?(this.video.paused&&this.freezeOrClear(),!1):(this.processFrame(),void(this.requestAnimationFrameRequest=window.requestAnimationFrame(this.boundFrameHandler))))},videoEndedHandler:function(){this.freezeOrClear(),void 0!==this.dismissalTimeout&&(this.boundHideOutputCanvas=this.boundHideOutputCanvas||this.hideOutputCanvas.bind(this),setTimeout(this.boundHideOutputCanvas,this.dismissalTimeout))},setLoopConfig:function(t){this.loopedNum=0;t=null!=t.maxLoops?t.maxLoops:5;0!==t&&this.setMaxLoops(t)},setMaxLoops:function(t){this.maxLoops=t,this.boundLoopCountOnSeeked=this.loopCountOnSeeked.bind(this),this.video.addEventListener("seeked",this.boundLoopCountOnSeeked)},loopCountOnSeeked:function(t){this.video.paused?this.loopedNum=0:(this.video.currentTime<.1&&this.loopedNum++,this.loopedNum>=this.maxLoops&&(this.video.pause(),this.loopedNum=0))},freezeOrClear:function(){this.stillFrameInS?this.freezeOnStill(this.stillFrameInS):this.clearOnEnd()},freezeOnStill:function(t){this.video.pause(),this.boundFreezeFrameOnSeeked=this._freezeFrameOnSeeked.bind(this),this.video.addEventListener("seeked",this.boundFreezeFrameOnSeeked);var e=this.video.duration-.05;this.video.currentTime=e<t?e:t},_freezeFrameOnSeeked:function(){this.video.removeEventListener("seeked",this.boundFreezeFrameOnSeeked),this.processFrame()},clearOnEnd:function(){this.video.pause(),this._clearCanvas()},showOutputCanvas:function(){this.output.style.display=this.originalOutputDisplay},hideOutputCanvas:function(){this.output.style.display="none"},dieBecauseTainted:function(){this.doDebug&&window.console&&window.console.log&&console.log("Tainted canvas content. Killing Alphalfa playback."),this.dieBecauseUnsupported(!0)},dieBecauseUnsupported:function(t){this.doDebug&&!t&&window.console&&window.console.log&&console.log("Alphalfa has seen things. Attack ships on fire off the shoulder of Orion... Time. to die."),window.cancelAnimationFrame(this.requestAnimationFrameRequest),this.isSupported=!1,this.boundFrameHandler&&this.boundEndHandler&&(this.video.removeEventListener("play",this.boundFrameHandler,!1),this.video.removeEventListener("ended",this.boundEndHandler,!1)),this.video.pause(),this.video.style.display="none",this.output.style.display="none",this.buffer&&(this.buffer.style.display="none")},_clearCanvas:function(){this.renderer.clearCanvas()}},e.exports=n},{"../polyfills/request-animation-frame.js":100,"./alphalfa-utils.js":87,"./renderers/alphalfa-renderer-canvas.js":89,"./renderers/alphalfa-renderer-color-correct.js":90,"./renderers/alphalfa-renderer-horizontal-gl.js":91,"./renderers/alphalfa-renderer-mask.js":92,"./renderers/alphalfa-renderer-webgl.js":93}],89:[function(t,e,i){function n(t){this.doDebug=t.doDebug,this.output=t.output,this.outputCtx=t.outputCtx,this.outputHeight=t.outputHeight,this.outputWidth=t.outputWidth,this.buffer=t.buffer,this.video=t.video,this.dieBecauseUnsupported=t.dieBecauseUnsupported}var o=t("../alphalfa-utils.js");n.prototype={PIXEL_DATA_SIZE:4,setupRendererContext:function(){this._setupCanvasContext()},getProcessFrameFunc:function(){return this.processCanvasFrame.bind(this,this.buffer,this.bufferCtx,this.output,this.outputCtx,this.outputWidth,this.outputHeight)},clearCanvas:function(){o.clear2DCanvas(this.outputCtx,this.outputWidth,this.outputHeight)},teardown:function(){this.outputCtx=void 0,this.bufferCtx=void 0,this.buffer.width=1,this.buffer.height=1,this.buffer.parentNode.removeChild(this.buffer),this.buffer=void 0},processCanvasFrame:function(t,e,i,n,o,s){e.drawImage(this.video,0,0);for(var e=this.bufferCtx.getImageData(0,s,o,s),r=e.data,a=3,d=r.length;a<d;a+=this.PIXEL_DATA_SIZE)r[a]=r[a-2];n.putImageData(e,0,0,0,0,o,s),n.drawImage(t,0,0,o,2*s)},_setupCanvasContext:function(){this.buffer=this.buffer||o.makeBufferCanvas(),this.bufferCtx=this.buffer.getContext("2d"),this.outputCtx.globalCompositeOperation="source-in"}},e.exports=n},{"../alphalfa-utils.js":87}],90:[function(t,e,i){function n(t){this.doDebug=t.doDebug,this.output=t.output,this.outputCtx=t.outputCtx,this.outputWidth=t.outputWidth,this.outputHeight=t.outputHeight,this.video=t.video,this.dieBecauseUnsupported=t.dieBecauseUnsupported}var o=t("../alphalfa-utils.js");n.prototype={setupRendererContext:function(){},getProcessFrameFunc:function(){return this.processColorCorrectFrame.bind(this,this.video,this.outputCtx,this.outputWidth,this.outputHeight)},clearCanvas:function(){o.clear2DCanvas(this.outputCtx,this.outputWidth,this.outputHeight)},teardown:function(){this.outputCtx=void 0},processColorCorrectFrame:function(t,e,i,n){e.drawImage(t,0,0,i,n)}},e.exports=n},{"../alphalfa-utils.js":87}],91:[function(t,e,i){function n(t){this.doDebug=t.doDebug,this.gl=t.gl,this.output=t.output,this.buffer=t.buffer,this.video=t.video,this.dieBecauseUnsupported=t.dieBecauseUnsupported}var o=t("../alphalfa-utils.js");n.prototype={setupRendererContext:function(){this._setupGlContext(this.gl)},getProcessFrameFunc:function(){return this.determineGlRenderFunc()},clearCanvas:function(){this.gl.clear(this.gl.COLOR_BUFFER_BIT)},teardown:function(){var t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,this.vbuffer),t.bufferData(t.ARRAY_BUFFER,1,t.STATIC_DRAW),t.deleteBuffer(this.vbuffer),t.bindBuffer(t.ARRAY_BUFFER,this.texCoordBuffer),t.bufferData(t.ARRAY_BUFFER,1,t.STATIC_DRAW),t.deleteBuffer(this.texCoordBuffer),t.bindTexture(t.TEXTURE_2D,null),t.deleteTexture(this.stackTexture),this.gl=void 0,this.buffer&&(this.bufferCtx=void 0,this.buffer.width=1,this.buffer.height=1,this.buffer.parentNode.removeChild(this.buffer),this.buffer=void 0)},determineGlRenderFunc:function(){return o.isIE()?this.ieProcessGlFrame.bind(this,this.gl,this.output,this.output.width,this.output.height):this.processGlFrame.bind(this,this.gl,this.output)},processGlFrame:function(t,e){this._updateTextureFromVideo(t),t.drawArrays(t.TRIANGLE_STRIP,0,4)},_updateTextureFromVideo:function(t){t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.video)},ieProcessGlFrame:function(t,e,i,n){this._ieUpdateTextureFromVideo(t,i,n),t.drawArrays(t.TRIANGLE_STRIP,0,4)},_ieUpdateTextureFromVideo:function(t,e,i){this.bufferCtx.drawImage(this.video,0,0,e,2*i),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.buffer)},_setupGlContext:function(t){o.isIE()&&(this.doDebug&&console.log("Using alternate IE render mode."),this._ieGlSetup()),t.enableVertexAttribArray(0),t.viewport(0,0,this.output.width,this.output.height),this.doDebug?t.clearColor(0,0,0,.1):t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),this.program=this._compileProgram(t,this.SHADER_VERTEX,this.SHADER_FRAGMENT),t.useProgram(this.program),this._getGlDataLocations(t),this._createAndBindTexCoordData(t),this._createAndBindTexture(t),this._createAndBindVertexData(t)},_ieGlSetup:function(){this.buffer=this.buffer||o.makeBufferCanvas(),this.bufferCtx=this.buffer.getContext("2d")},_getGlDataLocations:function(t){this.aTexCoord_loc=t.getAttribLocation(this.program,"aTexCoord"),this.aPosition_loc=t.getAttribLocation(this.program,"aPosition"),this.uImage_loc=t.getUniformLocation(this.program,"uImage")},_createAndBindVertexData:function(t){this.vbuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.vbuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,1,1,1,-1,-1,1,-1]),t.STATIC_DRAW),t.enableVertexAttribArray(this.aPosition_loc),t.vertexAttribPointer(this.aPosition_loc,2,t.FLOAT,!1,0,0)},_createAndBindTexCoordData:function(t){this.texCoordBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.texCoordBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,.5,0,0,1,.5,1]),t.STATIC_DRAW),t.enableVertexAttribArray(this.aTexCoord_loc),t.vertexAttribPointer(this.aTexCoord_loc,2,t.FLOAT,!1,0,0),t.uniform2f(t.getUniformLocation(this.program,"uHalfTexOffset"),.5,0)},_createAndBindTexture:function(t){this.stackTexture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.stackTexture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST)},_compileProgram:function(t,e,i){var n=t.createShader(t.VERTEX_SHADER);return t.shaderSource(n,e),t.compileShader(n),e=t.createShader(t.FRAGMENT_SHADER),t.shaderSource(e,i),t.compileShader(e),i=t.createProgram(),t.attachShader(i,n),t.attachShader(i,e),t.linkProgram(i),t.getShaderParameter(n,t.COMPILE_STATUS)||console.log("gl.getShaderInfoLog(vs) :: ",t.getShaderInfoLog(n)),t.getShaderParameter(e,t.COMPILE_STATUS)||console.log("gl.getShaderInfoLog(fs) :: ",t.getShaderInfoLog(e)),t.getProgramParameter(i,t.LINK_STATUS)||console.log("gl.getProgramInfoLog(program) :: ",t.getProgramInfoLog(i)),i},SHADER_VERTEX:["","  attribute vec2 aPosition;","  attribute vec2 aTexCoord;","  varying vec2 vTexCoord;","  void main() {","    gl_Position = vec4(aPosition, 0.0, 1.0);","    vTexCoord = aTexCoord;","  }",""].join("\n"),SHADER_FRAGMENT:["","  precision highp float;","  uniform sampler2D uImage;","  uniform vec2 uHalfTexOffset;","  varying vec2 vTexCoord;","  void main() {","    vec4 color = texture2D( uImage, vTexCoord );","    vec4 alpha = texture2D( uImage, vTexCoord + uHalfTexOffset );","    color[3] = alpha[0]; // avg alpha","    gl_FragColor = color;","  }",""].join("\n")},e.exports=n},{"../alphalfa-utils.js":87}],92:[function(t,e,i){function n(t){this.doDebug=t.doDebug,this.output=t.output,this.outputCtx=t.outputCtx,this.outputHeight=t.outputHeight,this.outputWidth=t.outputWidth,this.video=t.video,this.maskUrl=t.maskUrl,this.dieBecauseUnsupported=t.dieBecauseUnsupported}var o=t("../alphalfa-utils.js");n.prototype={setupRendererContext:function(){this._setupMaskContext()},getProcessFrameFunc:function(){return this.processMaskFrame.bind(this,this.video,this.outputCtx,this.outputWidth,this.outputHeight)},clearCanvas:function(){o.clear2DCanvas(this.outputCtx,this.outputWidth,this.outputHeight)},teardown:function(){this.outputCtx=void 0},processMaskFrame:function(t,e,i,n){e.drawImage(t,0,0,i,n)},_setupMaskContext:function(){this.loadMask(this.maskUrl)},loadMask:function(t){var e=this,i=this.mask=new Image;i.addEventListener("load",function(t){e.putImageMask.call(e,i)}),i.src=t},putImageMask:function(t){this.outputCtx.globalCompositeOperation="source-over",this.outputCtx.drawImage(t,0,0,this.outputWidth,this.outputHeight),this.outputCtx.globalCompositeOperation="source-in"}},e.exports=n},{"../alphalfa-utils.js":87}],93:[function(t,e,i){function n(t){this.doDebug=t.doDebug,this.gl=t.gl,this.output=t.output,this.buffer=t.buffer,this.video=t.video,this.dieBecauseUnsupported=t.dieBecauseUnsupported}var o=t("../alphalfa-utils.js");n.prototype={setupRendererContext:function(){this._setupGlContext(this.gl)},getProcessFrameFunc:function(){return this.determineGlRenderFunc()},clearCanvas:function(){this.gl.clear(this.gl.COLOR_BUFFER_BIT)},teardown:function(){var t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,this.vbuffer),t.bufferData(t.ARRAY_BUFFER,1,t.STATIC_DRAW),t.deleteBuffer(this.vbuffer),t.bindBuffer(t.ARRAY_BUFFER,this.texCoordBuffer),t.bufferData(t.ARRAY_BUFFER,1,t.STATIC_DRAW),t.deleteBuffer(this.texCoordBuffer),t.bindTexture(t.TEXTURE_2D,null),t.deleteTexture(this.stackTexture),this.gl=void 0,this.buffer&&(this.bufferCtx=void 0,this.buffer.width=1,this.buffer.height=1,this.buffer.parentNode.removeChild(this.buffer),this.buffer=void 0)},determineGlRenderFunc:function(){return o.isIE()?this.ieProcessGlFrame.bind(this,this.gl,this.output,this.output.width,this.output.height):this.processGlFrame.bind(this,this.gl,this.output)},processGlFrame:function(t,e){this._updateTextureFromVideo(t),t.drawArrays(t.TRIANGLE_STRIP,0,4)},_updateTextureFromVideo:function(t){t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.video)},ieProcessGlFrame:function(t,e,i,n){this._ieUpdateTextureFromVideo(t,i,n),t.drawArrays(t.TRIANGLE_STRIP,0,4)},_ieUpdateTextureFromVideo:function(t,e,i){this.bufferCtx.drawImage(this.video,0,0,e,2*i),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.buffer)},_setupGlContext:function(t){o.isIE()&&(this.doDebug&&console.log("Using alternate IE render mode."),this._ieGlSetup()),t.enableVertexAttribArray(0),t.viewport(0,0,this.output.width,this.output.height),this.doDebug?t.clearColor(0,0,0,.1):t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),this.program=this._compileProgram(t,this.SHADER_VERTEX,this.SHADER_FRAGMENT),t.useProgram(this.program),this._getGlDataLocations(t),this._createAndBindTexCoordData(t),this._createAndBindTexture(t),this._createAndBindVertexData(t)},_ieGlSetup:function(){this.buffer=this.buffer||o.makeBufferCanvas(),this.bufferCtx=this.buffer.getContext("2d")},_getGlDataLocations:function(t){this.aTexCoord_loc=t.getAttribLocation(this.program,"aTexCoord"),this.aPosition_loc=t.getAttribLocation(this.program,"aPosition"),this.uImage_loc=t.getUniformLocation(this.program,"uImage")},_createAndBindVertexData:function(t){this.vbuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.vbuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,1,1,1,-1,-1,1,-1]),t.STATIC_DRAW),t.enableVertexAttribArray(this.aPosition_loc),t.vertexAttribPointer(this.aPosition_loc,2,t.FLOAT,!1,0,0)},_createAndBindTexCoordData:function(t){this.texCoordBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.texCoordBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,.5,1,.5]),t.STATIC_DRAW),t.enableVertexAttribArray(this.aTexCoord_loc),t.vertexAttribPointer(this.aTexCoord_loc,2,t.FLOAT,!1,0,0),t.uniform2f(t.getUniformLocation(this.program,"uHalfTexOffset"),0,.5)},_createAndBindTexture:function(t){this.stackTexture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.stackTexture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST)},_compileProgram:function(t,e,i){var n=t.createShader(t.VERTEX_SHADER);return t.shaderSource(n,e),t.compileShader(n),e=t.createShader(t.FRAGMENT_SHADER),t.shaderSource(e,i),t.compileShader(e),i=t.createProgram(),t.attachShader(i,n),t.attachShader(i,e),t.linkProgram(i),t.getShaderParameter(n,t.COMPILE_STATUS)||console.log("gl.getShaderInfoLog(vs) :: ",t.getShaderInfoLog(n)),t.getShaderParameter(e,t.COMPILE_STATUS)||console.log("gl.getShaderInfoLog(fs) :: ",t.getShaderInfoLog(e)),t.getProgramParameter(i,t.LINK_STATUS)||console.log("gl.getProgramInfoLog(program) :: ",t.getProgramInfoLog(i)),i},SHADER_VERTEX:["","  attribute vec2 aPosition;","  attribute vec2 aTexCoord;","  varying vec2 vTexCoord;","  void main() {","    gl_Position = vec4(aPosition, 0.0, 1.0);","    vTexCoord = aTexCoord;","  }",""].join("\n"),SHADER_FRAGMENT:["","  precision highp float;","  uniform sampler2D uImage;","  uniform vec2 uHalfTexOffset;","  varying vec2 vTexCoord;","  void main() {","    vec4 color = texture2D( uImage, vTexCoord );","    vec4 alpha = texture2D( uImage, vTexCoord + uHalfTexOffset );","    color[3] = alpha[0]; // avg alpha","    gl_FragColor = color;","  }",""].join("\n")},e.exports=n},{"../alphalfa-utils.js":87}],94:[function(t,e,i){function n(t){this.name=t.name,this.frames=t.frames,this.frameSpeed=t.frameSpeed,this.loop=!!t.loop,this.maxLoops=null!=t.maxLoops?t.maxLoops:0,this.onComplete=t.onComplete,this.onCompleteCallback=t.onCompleteCallback,this.currentFrame=0,this.loopCount=0}n.prototype={getClone:function(){return new n({name:this.name,frames:this.frames,frameSpeed:this.frameSpeed,loop:this.loop,maxLoops:this.maxLoops,onComplete:this.onComplete,onCompleteCallback:this.onCompleteCallback})},incrementLoopCount:function(){this.loopCount++},overMaxLoops:function(){return 0!==this.maxLoops&&this.loopCount>=this.maxLoops}},e.exports=n},{}],95:[function(t,e,i){function n(t){this.injectEl=t.injectEl,this.animations={},this.animationConfigs=t.animations,this.autoplayAnimationName=t.autoplay,this.pauseFrame=t.pauseFrame||0,this.sprites={width:t.spriteWidth,height:t.spriteHeight},this.sheet={width:t.sheetWidth,height:t.sheetHeight},this.url=t.url,this.ready=!1,this.init()}var l=t("./animaniac-animation.js");t("../polyfills/request-animation-frame.js");n.prototype={doDebug:!1,log:function(){var t;this.doDebug&&(t=["Animaniac: "].concat(arguments),window.console.log.apply(window.console,t))},init:function(){this.el=document.createElement("div"),this.el.className="animaniac",this.setInitialStyle(),this.prepareCoords()},setInitialStyle:function(){for(var t={display:"block",width:this.sprites.width+"px",height:this.sprites.height+"px",backgroundColor:"transparent",backgroundPosition:"0 0",backgroundRepeat:"no-repeat",backgroundSize:this.sheet.width+"px "+this.sheet.height+"px"},e=Object.keys(t),i=0;i<e.length;i++)this.el.style[e[i]]=t[e[i]]},prepareCoords:function(){this.cellCoords=this.determineCellCoords(),this.pauseCell=this.cellCoords[this.pauseFrame],this.animations=this.processAnimationConfigs(this.animationConfigs),this.applySpritesheet(),this.autoplayAnimationName?this.playAnimation(this.autoplayAnimationName):this.showCoords(this.pauseCell)},determineCellCoords:function(){for(var t=[],e=(this.sheet.cols=Math.round(this.sheet.width/this.sprites.width),this.sheet.rows=Math.round(this.sheet.height/this.sprites.height),1),i=1,n=(this.sprites.width,this.sprites.height,this.sheet.width,this.sheet.height,this.sheet.cols<=1?0:100/(this.sheet.cols-1)),o=this.sheet.rows<=1?0:100/(this.sheet.rows-1);e<=this.sheet.cols&&i<=this.sheet.rows;)if(t.push({x:((e-1)*n).toFixed(5),y:((i-1)*o).toFixed(5)}),e<this.sheet.cols)e++;else{if(!(i<this.sheet.rows))break;e=1,i++}return t},applySpritesheet:function(){this.el.style.backgroundImage="url("+this.url+")",this.injectEl.appendChild(this.el),this.ready=!0},play:function(){this.unpause(),this.playAnimation(this.currentAnimation.name)},pause:function(){this.paused=!0},unpause:function(){this.paused=!1},isPaused:function(){return this.paused},playAnimation:function(t){this.ready||this.log("Not ready! TODO, add Queuer."),this.currentAnimation=this.animations[t].getClone(),this.currentAnimation?(this.unpause(),this.startAnimation()):this.log("Non-existent animation name passed to Animaniac.play()")},startAnimation:function(){this.boundHandleRequestAnimationFrame=this.handleRequestAnimationFrame.bind(this),this.timeSince=0,this.lastTS=Date.now(),this.nextFrame(),window.requestAnimationFrame(this.boundHandleRequestAnimationFrame)},handleRequestAnimationFrame:function(){var t=Date.now();this.timeSince>this.currentAnimation.frameSpeed?(this.nextFrame(),this.timeSince=0):(this.timeSince+=t-this.lastTS,this.lastTS=t),this.isPaused()?this.showCoords(this.pauseCell):window.requestAnimationFrame(this.boundHandleRequestAnimationFrame)},nextFrame:function(){var t=this.currentAnimation,e=t.currentFrame,i=t.frames[e];this.showCoords(i),this.hasNextFrame(t,e)?t.currentFrame++:t.loop&&!t.overMaxLoops()?(t.incrementLoopCount(),t.currentFrame=0):(i=t.onCompleteCallback,this.isValidCallback(i)&&(e=i.args||[],i.callback.apply(i.thisArg,e)),"string"==typeof t.onComplete?this.playAnimation(t.onComplete):this.pause())},isValidCallback:function(t){return!!t&&t.callback&&t.thisArg},hasNextFrame:function(t,e){return!!t.frames[e+1]},showCoords:function(t){var e=t;void 0!==t&&null!=t.x&&null!=t.y||(this.log('Bad coords object passed to "showCoords".'),e=this.pauseCell),this.el.style.backgroundPosition=e.x+"% "+e.y+"%"},setAnimationCoords:function(t){for(var e=0;e<this.animations.length;e++)for(var i=this.animations[e],n=0;n<i.frames.length;n++)i.frames[n]=t[i.frames[n]]},processAnimationConfigs:function(t){null==t&&this.log("Must configure animations!");for(var e={},i=0;i<t.length;i++){for(var n=t[i],o=n.name,s=this.processFrameSeq(n.frames),r=[],a=0;a<s.length;a++){var d=s[a];r.push(this.cellCoords[d])}e[o]=new l({name:o,frames:r,frameSpeed:this.getFrameSpeed(n.fps||24),loop:!!n.loop,maxLoops:n.maxLoops,onComplete:n.onComplete,onCompleteCallback:n.onCompleteCallback})}return e},processFrameSeq:function(t){return Array.isArray(t)?this.processFrameSeqArray(t):"string"==typeof t?this.processFrameSeqString(t):(this.log("Warning, unsupported frame sequence format."),[0])},processFrameSeqArray:function(t){for(var e,i,n=t,o=(n.length,0);o<n.length;)"string"==typeof n[o]?(e=this.processFrameSeqString(n[o]),i=[o,1].concat(e),n.splice.apply(n,i),o+=e.length):o++;return n},processFrameSeqString:function(t){var e=[],i=t.split("-");if(2!==i.length)return[parseInt(i[0],10)];for(var n=0;n<i.length-1;n++)var o=i[n],s=i[n+1],e=e.concat(this.framesBetween(o,s));return e},framesBetween:function(t,e){t=parseInt(t,10),e=parseInt(e,10);return t<e?this._framesBetweenIncremental(t,e):this._framesBetweenDecremental(t,e)},_framesBetweenIncremental:function(t,e){var i=[],n=t;for(i.push(n);++n<=e;)i.push(n);return i},_framesBetweenDecremental:function(t,e){var i=[],n=t;for(i.push(n);--n>=e;)i.push(n);return i},getFrameSpeed:function(t){return 1e3/t}},e.exports=n},{"../polyfills/request-animation-frame.js":100,"./animaniac-animation.js":94}],96:[function(t,e,i){function n(t){t.targetDate||console.warn("Countdowner :: Required argument not provided."),this.el=t.el||document.createElement("div"),this.id="countdowner-"+Date.now()+Math.floor(1e4*Math.random()),this.init(t)}var o=t("./zoolander.js");n.prototype={defaults:{splitChar:"",doPad:!1,hideAfterRelease:!1,periods:["days","hours","minutes","seconds"],periodContainerCss:{display:"inline-block"},periodCountCss:{display:"inline-block"},labels:["Days","Hrs","Mins","Secs"],printLabels:!1,labelsBelow:!0,labelsCss:{display:"inline-block"}},classPrefix:"cd-",init:function(t){this.targetDate=this.determineTargetDate(t.targetDate),this.setConfig(t),t.hideAfterRelease&&this.timeRemaining()<=0||(this.zoo=t.zoolander||new o,this.injectCss(),this.initializeHtml(),this.printLabels&&this.initializeLabels(),this._render(),this.renderBind=this._render.bind(this),clearInterval(this.renderInterval),this.renderInterval=setInterval(this.renderBind,1e3))},setConfig:function(t){var e,i=this.addDefaults(t);for(e in delete i.targetDate,i)i.hasOwnProperty(e)&&(this[e]=i[e])},addDefaults:function(t){var e,i=t;for(e in this.defaults)!this.defaults.hasOwnProperty(e)||this.isDefined(t[e])||(i[e]=this.defaults[e]);return i},determineTargetDate:function(t){var e;return"object"==typeof t&&this.isDefined(t.month)?(e=t.date||t.day,e=new Date(t.year,t.month-1,e)):"object"==typeof t&&t instanceof Date?e=t:"string"==typeof t?e=new Date(t):console.warn("No date or invalid date provided. Aborting Countdowner."),e},makeEl:function(t,e){var e=this.isDefined(e)?e:"div",i=document.createElement(e);if("string"==typeof t)i.classList.add(this.classPrefix+t);else for(var n=0;n<t.length;n++)i.classList.add(this.classPrefix+t[n]);return i},initializeHtml:function(){this.container=this.makeEl("container"),this.container.id=this.id;for(var t=this.periods,e=(this.periodEls=[],t[t.length-1]),i=0;i<t.length;i++){var n=this.makePeriodContainer(t[i]);this.container.appendChild(n),this.periodEls[t[i]]=n,this.splitChar&&""!==this.splitChar&&t[i]!==e&&this.container.appendChild(this.makeSplitContainer())}this.el.innerHTML="",this.el.appendChild(this.container)},appendCountChildren:function(t){var e=this.makeEl("count","div");t.appendChild(e)},makePeriodContainer:function(t){t=this.makeEl([t,"period-container"]);return this.appendCountChildren(t),t},makeSplitContainer:function(){var t=this.makeEl("split-el","span");return t.innerHTML=" "+this.splitChar+" ",t},initializeLabels:function(){for(var t=0;t<this.labels.length;t++){var e=this.makeLabel(this.labels[t],this.periods[t]),i=this.periodEls[this.periods[t]];this.labelsBelow?i.appendChild(e):i.insertBefore(e,i.children[0])}},makeLabel:function(t,e){e=this.makeEl(["label","label-"+e],"span");return e.innerHTML=t,e},msSec:1e3,msMin:6e4,msHour:36e5,msDay:864e5,timeRemaining:function(){var t=Date.now(),t=this.targetDate.valueOf()-t;return 0<t?t:0},calcRemaining:function(){var t={days:0,hours:0,minutes:0,seconds:0},e=this.timeRemaining();if(0!==e)if(t.days=Math.floor(e/this.msDay),e-=t.days*this.msDay,t.hours=Math.floor(e/this.msHour),e-=t.hours*this.msHour,t.minutes=Math.floor(e/this.msMin),e-=t.minutes*this.msMin,t.seconds=Math.floor(e/this.msSec),this.doPad)for(var i in t)t.hasOwnProperty(i)&&(t[i]=this.pad(t[i]));return t},pad:function(t){return 10<=t?t:"0"+t},container:function(){return this.el.children[0]},el:function(t){return arguments.length?(this.el=t,this):this.el},_render:function(){var t=this.calcRemaining();this.periodEls.days.children[0].innerHTML=t.days,this.periodEls.hours.children[0].innerHTML=t.hours,this.periodEls.minutes.children[0].innerHTML=t.minutes,this.periodEls.seconds.children[0].innerHTML=t.seconds},injectCss:function(){var t="#"+this.id,e=t+" ."+this.classPrefix,t=[[t,{"box-sizing":"border-box"}],[t+" *",{"box-sizing":"inherit"}],[e+"period-container",this.periodContainerCss],[e+"count",this.periodCountCss],[e+"label",this.labelsCss]];this.zoo.insertRules(t)},isDefined:function(t){return void 0!==t}},e.exports=n},{"./zoolander.js":118}],97:[function(t,e,i){t("../polyfills/request-animation-frame.js");var E=t("./cuepoint.js"),T=t("../utils/notifier.js"),S={onCuepoint:"onCuepoint"};function n(t){var e,i=T(),n=!1,o=null,s=null,r=!1,a=!1,d=[];function l(t){var e,i,n,o;if(!(t&&0<t.length))return null;for(e=[],i=t.length-1;-1!==i;i--)n=t[i],o=E(n),n.error||e.push(o);return e}function u(t){for(var e,i=null,n=d&&0<d.length?d.length:0,o=0;o<n&&null===i;o++)i=(e=d[o]).time>t?e:i;return i}function c(t){null!==e&&b(),void 0===(e=t)||"VIDEO"!==e.tagName&&"AUDIO"!==e.tagName||(y(),0<e.duration&&p())}function h(t,e){return t.time<e.time?-1:t.time>e.time?1:0}function p(){var t;if(d&&0!==d.length){for(t=d.length-1;-1!==t;t--)d[t].adjustToDuration(e.duration);d.sort(h),o=u(e.currentTime)}}function m(){o&&(o.time,1)&&null!==o.time&&e&&(e.currentTime,1)&&null!==e.currentTime&&o.time<=e.currentTime&&(s=o,n||(s.trigger(e),i.notify(S.onCuepoint,[s,e])),o=u(e.currentTime)),r&&window.requestAnimationFrame(m)}function f(){o=u(e.currentTime)}function g(){r=!0,m()}function v(){r=!1}function _(){r&&"hidden"===document.visibilityState&&e.addEventListener("timeupdate",m),"hidden"!==document.visibilityState&&e.removeEventListener("timeupdate",m)}function y(){a||(a=!0,e.addEventListener("durationchange",p),e.addEventListener("seeked",f),e.addEventListener("playing",g),e.addEventListener("pause",v),e.addEventListener("ended",v),e.addEventListener("abort",v),e.addEventListener("emptied",v),e.addEventListener("error",v),e.addEventListener("stalled",v),e.addEventListener("waiting",v),document.addEventListener("visibilitychange",_))}function b(){a&&(a=!1,e.removeEventListener("durationchange",p),e.removeEventListener("seeked",f),e.removeEventListener("playing",g),e.removeEventListener("pause",v),e.removeEventListener("ended",v),e.removeEventListener("abort",v),e.removeEventListener("emptied",v),e.removeEventListener("error",v),e.removeEventListener("stalled",v),e.removeEventListener("waiting",v),e.removeEventListener("timeupdate",m),document.removeEventListener("visibilitychange",_))}function w(t){((t,e)=>{for(var i,n=!1,o=Object.keys(e),s=o.length,r=0;r<s&&!n;r++)i=o[r],n=t.hasOwnProperty(i);return n})(t,S)?i.subscribe(t):console.warn("CuepointEngine.subscribe() :: observer must have valid notification keys!\n\tValid notification keys = '"+Object.keys(S).join("', '")+"'\n\tObserver:",t)}function A(t){var e=t.cuepoints&&0<t.cuepoints.length?t.cuepoints:[];d=l(e),c(t.media),t.observer&&w(t.observer)}return A(t),{init:A,start:y,stop:b,destroy:function(){b(),i.clear(),r=!1,e=d=s=o=null},getCuepoints:function(){return d},setCuepoints:function(t){t=0<t.length?t:[],d=l(t)},addCuepoint:function(t){E(t).error||(d.push(E(t)),p())},removeCuepoint:function(t){-1<(t=d.indexOf(t))&&(d.splice(t,1),p())},getMedia:function(){return e},setMedia:c,getIgnoreCuepoints:function(){return n},setIgnoreCuepoints:function(t){n=t},subscribe:w,unsubscribe:i.unsubscribe,NOTIFICATIONS:S}}Object.defineProperty(n,"NOTIFICATIONS",{value:S,writable:!1,enumerable:!0,configurable:!1}),e.exports=n},{"../polyfills/request-animation-frame.js":100,"../utils/notifier.js":114,"./cuepoint.js":98}],98:[function(t,e,i){function d(t){var i=(t=>{for(var e,i={},n=t.replace(/(\D{1,})([\d])/g,"$1,$2").split(","),o=0,s=n.length;o<s;o++)i[(e=n[o].split(/(\D{1,})/))[1]]=parseInt(e[0],10);return i})(t),n={m:6e4,s:1e3,ms:1};return Object.keys(i).reduce(function(t,e){return t+i[e]*n[e]},0)}e.exports=function(t){if(!t||!t.hasOwnProperty("time"))return{time:-1,error:"Cuepoint Error: cuepointData is invalid",data:t};var i,n={},e=[],o=t.time,s="string"==typeof o,r=s?o.match(/\-?\d+([%msh]+)/):[],a=r&&0<r.length?r[1]:"ms";switch(!0){case s&&"%"===a:i=parseInt(o,10);break;case!s:i=o;break;case s&&0===o.indexOf("-")||o<0:i=-d(o.substring(1)),a="ms";break;default:i=d(o),a="ms"}return n.timestamp=o,n.endOffset=i<0,n.durationDependent="%"===a||n.endOffset,n.time=((t,e)=>{var i;switch(!0){case"s"===e:i=t;break;case"%"===e:i=t/100;break;default:i=t/1e3}return i})(i,a),n.name=t.hasOwnProperty("name")?t.name:"Unnamed Cuepoint",n.type=t.hasOwnProperty("type")?t.type:"cuepoint",n.data=t.hasOwnProperty("data")?t.data:{},t.hasOwnProperty("callback")&&"function"==typeof t.callback&&(n.callback=t.callback),n.trigger=function(t){return n.callback&&n.callback(n,t),e.push(Date.now()),n},n.reset=function(){e=[]},n.getHistory=function(){return e},n.adjustToDuration=function(t){var e;return"%"===a&&(e=t*(i/100),n.time=e),n.endOffset&&(e=t+i/1e3,n.time=e),n},n}},{}],99:[function(t,e,i){t={AlphalfaPlayer:t("./alphalfa/alphalfa.js"),Animaniac:t("./animaniac/animaniac.js"),Countdowner:t("./countdowner.js"),CuepointEngine:t("./cuepoints/cuepoint-engine.js"),Reely:t("./reely/reely.js"),Uatu:t("./uatu.js"),Zoolander:t("./zoolander.js")};window.ad_design=t,e.exports=t},{"./alphalfa/alphalfa.js":88,"./animaniac/animaniac.js":95,"./countdowner.js":96,"./cuepoints/cuepoint-engine.js":97,"./reely/reely.js":111,"./uatu.js":112,"./zoolander.js":118}],100:[function(t,e,i){for(var s=0,n=["webkit","moz"],o=0;o<n.length&&!window.requestAnimationFrame;++o)window.requestAnimationFrame=window[n[o]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n[o]+"CancelAnimationFrame"]||window[n[o]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,e){var i=(new Date).getTime(),n=Math.max(0,16-(i-s)),o=window.setTimeout(function(){t(i+n)},n);return s=i+n,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})},{}],101:[function(t,e,i){e.exports={DEFAULT_SPRITESHEET:"https://m.media-amazon.com/images/I/21uHhW38EgL.svg",DEFAULT_OVERLAY_SPRITESHEET:"https://m.media-amazon.com/images/G/01/IMDb/design/modules/reely/sprites/reely-overlay._V503633712_.png"}},{}],102:[function(t,e,i){function n(t,e){this.eventBus=t.eventBus,this.spriteDimensions=t.spriteDimensions,this.controlBarConfig=t.controlBarConfig,this.spritesheet=t.spritesheet,this.zoo=t.zoo,this.init(e)}var o=t("./reely-scrubber.js"),s=t("./reely-css-classes.js"),r=t("./reely-el-maker.js"),a=t("./reely-events.js");n.prototype={FADE_DELAY_SECS:2,init:function(t){this.el=r.make("div",s.CONTROL_BAR_CONTAINER),this.el.style.display="none",this.reely=t,this.controlBar=r.make("div",[s.CONTROL_BAR,s.REPEAT_X_SPRITE+"-controlsBG"]),this.appendTableLayoutDivs(this.controlBar),this.injectControlsStyles(),this.populateControls(),this.el.appendChild(this.controlBar),this.controlBarConfig.autohide&&(this.fadeOutBind=this.fadeOut.bind(this),this.resetFadeOutDelay(),this.autohideListen()),this.broadcastInteraction(),this.listen()},populateControls:function(){this.createControlButtons(),this.scrubber=new o({eventBus:this.eventBus,spritesheet:this.spritesheet,spriteDimensions:this.spriteDimensions,zoo:this.zoo}),this.midCell.appendChild(this.scrubber.getEl())},clearFadeOutDelay:function(){clearTimeout(this.fadeOutDelay)},resetFadeOutDelay:function(){this.clearFadeOutDelay(),this.fadeOutDelay=setTimeout(this.fadeOutBind,1e3*this.FADE_DELAY_SECS)},fadeIn:function(){s.remove(this.el,s.TRANSPARENT),this.eventBus.trigger(a.FADE_IN_START)},fadeOut:function(){s.add(this.el,s.TRANSPARENT),this.eventBus.trigger(a.FADE_OUT_START)},broadcastInteraction:function(){this.el.addEventListener("mousemove",this.eventBus.triggers[a.MOUSE_MOVE])},listen:function(){this.eventBus.addEventListener(a.VID_LOADEDDATA,this.onLoadedData,this),this.eventBus.addEventListener(a.VID_PLAY,this.togglePlayPause,this,"play"),this.eventBus.addEventListener(a.VID_PAUSE,this.togglePlayPause,this,"pause"),this.eventBus.addEventListener(a.MUTED,this.toggleMuteUnmute,this,"unmuted"),this.eventBus.addEventListener(a.UNMUTED,this.toggleMuteUnmute,this,"muted"),this.eventBus.addEventListener(a.VID_EXITFULLSCREEN,this.toggleNormalFullscreen,this,"normal"),this.eventBus.addEventListener(a.VID_ENTERFULLSCREEN,this.toggleNormalFullscreen,this,"fullscreen")},autohideListen:function(){this.eventBus.addEventListener(a.MOUSE_IN,this.onMouseIn,this),this.eventBus.addEventListener(a.MOUSE_OUT,this.onMouseOut,this),this.eventBus.addEventListener(a.MOUSE_MOVE,this.onMouseMove,this)},teardown:function(){this.clearFadeOutDelay(),this.scrubber.teardown(),this.el.removeEventListener("mousemove",this.eventBus.triggers[a.MOUSE_MOVE]),this.eventBus.removeEventListener(a.VID_LOADEDDATA,this.onLoadedData,this),this.eventBus.removeEventListener(a.VID_PLAY,this.togglePlayPause,this,"play"),this.eventBus.removeEventListener(a.VID_PAUSE,this.togglePlayPause,this,"pause"),this.eventBus.removeEventListener(a.MUTED,this.toggleMuteUnmute,this,"unmuted"),this.eventBus.removeEventListener(a.UNMUTED,this.toggleMuteUnmute,this,"muted"),this.eventBus.removeEventListener(a.VID_EXITFULLSCREEN,this.toggleNormalFullscreen,this,"normal"),this.eventBus.removeEventListener(a.VID_ENTERFULLSCREEN,this.toggleNormalFullscreen,this,"fullscreen"),this.eventBus.removeEventListener(a.MOUSE_IN,this.onMouseIn,this),this.eventBus.removeEventListener(a.MOUSE_OUT,this.onMouseOut,this),this.eventBus.removeEventListener(a.MOUSE_MOVE,this.onMouseMove,this)},onLoadedData:function(t){this.el.style.display=""},togglePlayPause:function(t){var e=this.isToggled(this.playPause);(!e&&"play"===t||e&&"pause"===t)&&this.toggleTwoState(this.playPause)},toggleMuteUnmute:function(t){var e=this.isToggled(this.muteUnmute);(!e&&"muted"===t||e&&"unmuted"===t)&&this.toggleTwoState(this.muteUnmute)},toggleNormalFullscreen:function(t){var e=this.isToggled(this.fullscreenNormal);(!e&&"fullscreen"===t||e&&"normal"===t)&&this.toggleTwoState(this.fullscreenNormal)},isToggled:function(t){return s.contains(t,s.TOGGLED)},toggleTwoState:function(t){this.isToggled(t)?s.remove(t,s.TOGGLED):s.add(t,s.TOGGLED)},onMouseIn:function(t){this.fadeIn()},onMouseMove:function(t){this.fadeIn(),this.resetFadeOutDelay()},onMouseOut:function(t){this.resetFadeOutDelay()},appendTableLayoutDivs:function(t){this.midCell=r.make("div",s.CONTROL_BAR_MID),this.leftCell=r.make("div",s.CONTROL_BAR_LEFT),this.rightCell=r.make("div",s.CONTROL_BAR_RIGHT),t.appendChild(this.midCell),t.appendChild(this.leftCell),t.appendChild(this.rightCell)},createControlButtons:function(){this.playPause=r.createTwoStateButton("play-pause",[{defaultIconName:"play",hoverIconName:"play-hover"},{defaultIconName:"pause",hoverIconName:"pause-hover"}]),this.muteUnmute=r.createTwoStateButton("mute-unmute",[{defaultIconName:"sound-off",hoverIconName:"sound-off-hover"},{defaultIconName:"sound-on",hoverIconName:"sound-on-hover"}]);var t=this.eventBus.triggerBind(a.PLAY_PAUSE_TOGGLE),e=this;this.playPause.addEventListener("click",function(){return e.reely&&(e.reely.isPausedByUser=e.reely.isPlaying()),t()}),this.leftCell.appendChild(this.playPause),this.muteUnmute.addEventListener("click",this.eventBus.triggerBind(a.MUTE_UNMUTE_TOGGLE)),this.rightCell.appendChild(this.muteUnmute)},addFullscreenButton:function(){s.add(this.midCell,s.CONTROL_BAR_MID+"-fullscreen"),s.add(this.rightCell,s.CONTROL_BAR_RIGHT+"-fullscreen"),this.fullscreenNormal=r.createTwoStateButton("fullscreen-normal",[{defaultIconName:"fullscreen",hoverIconName:"fullscreen-hover"},{defaultIconName:"normal",hoverIconName:"normal-hover"}]),this.fullscreenNormal.addEventListener("click",this.eventBus.triggerBind(a.FULLSCREEN_NORMAL_TOGGLE)),this.rightCell.appendChild(this.fullscreenNormal)},injectControlsStyles:function(){var t=[];t=(t=t.concat(this.getButtonStyles())).concat(this.getControlBarStyles()),this.zoo.insertRules(t)},determineButtonVisualWidth:function(){return this.spriteDimensions.spriteWidth+2*this.spriteDimensions.buttonPadding},determineContainerStyles:function(){var t=this.controlBarConfig,e={position:"absolute",display:"inline-block",height:t.height+"px",width:"100%",transition:"opacity 1s ease"};return"center"===t.anchorX&&(e.margin="0 auto",e.textAlign="center"),e[t.anchorY]=t.offsetY,e},determineBarElStyles:function(){var t=this.controlBarConfig,e={position:"relative",display:"block",height:"inherit",width:t.width,"background-color":"transparent","background-position":"0 0","background-repeat":"repeat-x"};return this.controlBarConfig.hideBG||(e["background-image"]='url("'+this.spritesheet.getSrc()+'")'),"center"===t.anchorX?e.margin="0 auto":e[t.anchorX]=t.offsetX,e},getButtonStyles:function(){return[["."+s.BUTTON_ICON,{height:this.spriteDimensions.spriteHeight+"px",width:this.spriteDimensions.spriteWidth+"px",padding:this.spriteDimensions.buttonPadding+"px"}]]},getControlBarStyles:function(){var t=this.determineButtonVisualWidth(),e=this.determineContainerStyles(),i=this.determineBarElStyles();return[["."+s.CONTROL_BAR_CONTAINER,e],["."+s.FULLSCREEN+" ."+s.CONTROL_BAR_CONTAINER,{bottom:0,top:"auto"}],["."+s.CONTROL_BAR,i],["."+s.FULLSCREEN+" ."+s.CONTROL_BAR,{left:0,right:"auto",width:"100%"}],[["."+s.CONTROL_BAR_LEFT,"."+s.CONTROL_BAR_RIGHT],{display:"inline-block",height:"100%",width:t+"px"}],[["."+s.CONTROL_BAR_RIGHT+"-fullscreen"],{width:2*t+"px"}],["."+s.CONTROL_BAR_LEFT,{float:"left"}],["."+s.CONTROL_BAR_RIGHT,{float:"right"}],["."+s.CONTROL_BAR_MID,{position:"absolute",left:"0",display:"block",height:"100%",width:"100%","box-sizing":"border-box","padding-left":t+"px","padding-right":t+"px"}],["."+s.CONTROL_BAR_MID+"-fullscreen",{"padding-right":2*t+"px"}],[".reely-two-state-fullscreen-normal",{"padding-left":t+"px"}]]}},e.exports=n},{"./reely-css-classes.js":103,"./reely-el-maker.js":104,"./reely-events.js":106,"./reely-scrubber.js":109}],103:[function(t,e,i){e.exports={CONTAINER:"reely-container",VIDEO:"reely-video",OVERLAY_CONTAINER:"reely-overlay-container",OVERLAY_SLATE:"reely-overlay-slate",CONTROL_BAR_CONTAINER:"reely-control-bar-container",CONTROL_BAR:"reely-control-bar",CONTROL_BAR_LEFT:"reely-control-bar-left",CONTROL_BAR_RIGHT:"reely-control-bar-right",CONTROL_BAR_MID:"reely-control-bar-mid",BUTTON:"reely-button",BUTTON_ICON:"reely-button-icon",BUTTON_ICON_LARGE:"reely-button-icon-large",TWO_STATE_BUTTON:"reely-two-state",TWO_STATE_DEFAULT:"reely-two-state-default",TWO_STATE_ALT:"reely-two-state-toggled",REPEAT_X_SPRITE:"reely-repeat-x-sprite",ICON_LARGE:"reely-icon-large",ICON:"reely-icon",ICON_DEFAULT:"reely-default-icon",ICON_HOVER:"reely-hover-icon",ICON_ACTIVE:"reely-toggle-active",ICON_DOWN:"reely-toggle-down",LOADING_SPINNER:"reely-loading-spinner",SCRUBBER_CONTAINER:"reely-scrubber-container",TOGGLED:"reely-toggled",UNSELECTABLE:"reely-unselectable",HIDDEN:"reely-hidden",INVISIBLE:"reely-invisible",TRANSPARENT:"reely-transparent",FULLSCREEN:"reely-fullscreen",add:function(t,e){switch(void 0===e&&console.warn("Attempted to add() an undefined class."),this.mode()){case"modern":return t.classList.add(e);case"oldIE":return t.className+=" "+e}},contains:function(t,e){switch(void 0===e&&console.warn("Attempted to check contains() an undefined class."),this.mode()){case"modern":return t.classList.contains(e);case"oldIE":return-1!==t.className.split(" ").indexOf(e)}},remove:function(t,e){void 0===e&&console.warn("Attempted to remove() an undefined class."),this._removeClass||(this._removeClass=this.removeModes[this.mode()]),this._removeClass(t,e)},removeModes:{modern:function(t,e){t.classList.remove(e)},oldIE:function(t,e){var i=t.className.split(" "),e=i.indexOf(e);-1!==e&&i.splice(e,1),t.className=i.join(" ")}},mode:function(){var t;return this._mode||(t=document.createElement("div"),this._mode="classList"in t?"modern":"oldIE"),this._mode}}},{}],104:[function(t,e,i){var s=t("./reely-css-classes.js");e.exports={make:function(t,e,i){t=document.createElement(t);return t.setAttribute("class",this.arrayWrap(e).join(" ")),i&&(t.id=i),t},createIcon:function(t,e){return this._createIcon(s.ICON,t,e)},createLargeIcon:function(t,e){return this._createIcon(s.ICON_LARGE,t,e)},_createIcon:function(t,e,i){t=this.concatClasses([t,t+"-"+e],i);return this.make("div",t)},createRepeatXSprite:function(t,e){t=this.concatClasses([s.REPEAT_X_SPRITE,s.REPEAT_X_SPRITE+"-"+t],e);return this.make("div",t)},createSpriteEl:function(t,e){return e&&(t=this.concatClasses(t,e)),this.make("div",t)},concatClasses:function(t,e){return e?"string"==typeof e?(t.push(e),t):t.concat(e):t},createTwoStateButton:function(t,e){var i=this.createIcon,n=s.BUTTON_ICON;return this._createTwoStateButton(t,e,n,i)},createLargeTwoStateButton:function(t,e){var i=this.createLargeIcon,n=s.BUTTON_ICON_LARGE;return this._createTwoStateButton(t,e,n,i)},_createTwoStateButton:function(t,e,i,n){var t=this.make("div",[s.TWO_STATE_BUTTON,s.TWO_STATE_BUTTON+"-"+t]),o=this.createButtonState(e[0],s.TWO_STATE_DEFAULT,i,n),e=this.createButtonState(e[1],s.TWO_STATE_ALT,i,n);return t.appendChild(o),t.appendChild(e),t},createButtonState:function(t,e,i,n){return n=n||this.createIcon,i=i||s.BUTTON_ICON,this._createButtonState(t,e,i,n)},_createButtonState:function(t,e,i,n){var o=[s.BUTTON,s.UNSELECTABLE],i=(o.push(i),e&&(o=o.concat(this.arrayWrap(e))),this.make("div",o)),e=n.call(this,t.defaultIconName,s.ICON_DEFAULT),o=n.call(this,t.hoverIconName,s.ICON_HOVER);return i.appendChild(e),i.appendChild(o),i},arrayWrap:function(t){return void 0===t?[]:"[object Array]"!==Object.prototype.toString.call(t)?[t]:t}}},{"./reely-css-classes.js":103}],105:[function(t,e,i){function n(){this.init()}var o=t("./reely-events.js");n.prototype={reelyEvents:[],init:function(){this.triggers={},this.listeners={},this.reelyEvents=this.getReelyEventsArray();for(var t=0;t<this.reelyEvents.length;t++){var e=this.reelyEvents[t];this.triggers[e]=this.triggerBind(e),this.listeners[e]=[]}},getReelyEventsArray:function(){var t,e=[];for(t in o)o.hasOwnProperty(t)&&e.push(o[t]);return e},addEventListener:function(t,e,i){this.listeners[t]||console.warn("Attempted to addEventListener with unsupported event :: ",t);var n=Array.prototype.slice.call(arguments);n.splice(0,3),this.listeners[t].push({callback:e,context:i,args:n})},removeEventListener:function(t,e,i){this.listeners[t]||console.warn("Attempted to removeEventListener with unsupported event :: ",t);for(var n,o=this.listeners[t].slice(),s=0;s<o.length;s++)if((n=o[s]).callback===e&&n.context===i){o.splice(s,1);break}this.listeners[t]=o},triggerBind:function(t,e){return this.trigger.bind(this,t)},trigger:function(t){this.listeners[t]||console.warn("Attempted to trigger an unsupported event :: ",t);for(var e,i,n=Array.prototype.slice.call(arguments),o=(n.splice(0,1),this.listeners[t]),s=0;s<o.length;s++)i=(e=o[s]).args.concat(n),e.callback.apply(e.context,i)}},e.exports=n},{"./reely-events.js":106}],106:[function(t,e,i){e.exports={STARTED:"started",PLAY_PAUSE_TOGGLE:"playPauseToggle",MUTE_UNMUTE_TOGGLE:"muteUnmuteToggle",FULLSCREEN_NORMAL_TOGGLE:"fullscreenNormalToggle",SCRUBBER_BAR_CLICK:"scrubberBarClick",MOUSE_IN:"mouseIn",MOUSE_OUT:"mouseOut",MOUSE_MOVE:"mouseMove",MUTED:"muted",UNMUTED:"unmuted",VID_ENTERFULLSCREEN:"video:enterfullscreen",VID_EXITFULLSCREEN:"video:exitfullscreen",VID_LOADSTART:"video:loadstart",VID_LOADEDMETADATA:"video:loadedmetadata",VID_LOADEDDATA:"video:loadeddata",VID_CANPLAY:"video:canplay",VID_CANPLAYTHROUGH:"video:canplaythrough",VID_WAITING:"video:waiting",VID_PROGRESS:"video:progress",VID_SUSPEND:"video:suspend",VID_PLAY:"video:play",VID_PLAYING:"video:playing",VID_PAUSE:"video:pause",VID_TIMEUPDATE:"video:timeupdate",VID_ENDED:"video:ended",FADE_OUT_START:"reely:fadeoutstart",FADE_IN_START:"reely:fadeinstart"}},{}],107:[function(t,e,i){function n(t){this.eventBus=t.eventBus,this.zoo=t.zoo,this.init()}var o=t("./reely-css-classes.js"),s=t("./reely-el-maker.js"),r=t("./reely-events.js");n.prototype={PROGRESS_TICKS_TO_SHOW:5,init:function(){this.el=s.make("div",o.LOADING_SPINNER+"-outer-container"),this.innerContainer=s.make("div",o.LOADING_SPINNER+"-inner-container"),this.spinner=s.make("div",o.LOADING_SPINNER),this.innerContainer.appendChild(this.spinner),this.el.appendChild(this.innerContainer),this.injectLoadingSpinnerCSS(),this.progressTicks=0,this.listen()},listen:function(){this.eventBus.addEventListener(r.VID_LOADEDMETADATA,this.onLoadedMetadata,this),this.eventBus.addEventListener(r.VID_CANPLAY,this.onCanPlay,this),this.eventBus.addEventListener(r.VID_PROGRESS,this.onProgress,this),this.eventBus.addEventListener(r.VID_SUSPEND,this.onSuspend,this),this.eventBus.addEventListener(r.VID_TIMEUPDATE,this.onTimeUpdate,this),this.eventBus.addEventListener(r.VID_PLAY,this.onPlay,this),this.eventBus.addEventListener(r.VID_PAUSE,this.onPause,this)},teardown:function(){this.eventBus.removeEventListener(r.VID_LOADEDMETADATA,this.onLoadedMetadata,this),this.eventBus.removeEventListener(r.VID_CANPLAY,this.onCanPlay,this),this.eventBus.removeEventListener(r.VID_PROGRESS,this.onProgress,this),this.eventBus.removeEventListener(r.VID_SUSPEND,this.onSuspend,this),this.eventBus.removeEventListener(r.VID_TIMEUPDATE,this.onTimeUpdate,this),this.eventBus.removeEventListener(r.VID_PLAY,this.onPlay,this),this.eventBus.removeEventListener(r.VID_PAUSE,this.onPause,this)},onPlay:function(){this.isPlaying=!0,this.progressTicks=0},onPause:function(){this.isPlaying=!1,this.progressTicks=0},onLoadedMetadata:function(){this.show()},onCanPlay:function(){this.hide()},onSuspend:function(){this.progressTicks=0},onProgress:function(){this.isPlaying&&(this.progressTicks++,this.progressTicks>=this.PROGRESS_TICKS_TO_SHOW)&&this.show()},onTimeUpdate:function(){this.progressTicks=0,this.hide()},hide:function(){this.isHidden||(this.isHidden=!0,o.add(this.el,o.HIDDEN),o.remove(this.spinner,o.TRANSPARENT))},show:function(){this.isHidden&&(this.isHidden=!1,o.remove(this.el,o.HIDDEN),o.remove(this.spinner,o.TRANSPARENT))},injectLoadingSpinnerCSS:function(){var t="loading-spinner-spin";this.zoo.insertKeyframes(t,this.getSpinnerKeyframes());var e=(e=[]).concat(this.getSpinnerStyles());this.zoo.insertRules(e),this.zoo.insertAnimation("."+o.LOADING_SPINNER,"animation",t+" 1.6s linear infinite")},getSpinnerKeyframes:function(){return{"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(359deg)"}}},getSpinnerStyles:function(){return[["."+o.LOADING_SPINNER+"-outer-container",{position:"absolute",top:"50%",left:"50%",height:0,width:0}],["."+o.LOADING_SPINNER+"-inner-container",{display:"block",height:"64px",width:"64px",transform:"translate(-50%, -50%)"}],["."+o.LOADING_SPINNER,{display:"block","box-sizing":"border-box",height:"64px",width:"64px",background:"transparent","border-radius":"50%","border-top":"7px solid rgba(255, 255, 255, 1)","border-right":"7px solid rgba(255, 255, 255, 0.5)","border-bottom":"7px solid rgba(255, 255, 255, 0.5)","border-left":"7px solid rgba(255, 255, 255, 0.5)",transition:"opacity 1s ease-out"}]]}},e.exports=n},{"./reely-css-classes.js":103,"./reely-el-maker.js":104,"./reely-events.js":106}],108:[function(t,e,i){function n(t,e){this.eventBus=t.eventBus,this.spritesheet=t.spritesheet,this.spriteDimensions=t.spriteDimensions,this.slate=t.slate,this.zoo=t.zoo,this.loadingSpinner=new a(t),this.init(e)}var o=t("./reely-css-classes.js"),s=t("./reely-el-maker.js"),r=t("./reely-events.js"),a=t("./reely-loading-spinner.js");n.prototype={init:function(t){this.el=s.make("div",o.OVERLAY_CONTAINER),this.reely=t,this.isPlaying(!1),this.isEnded(!1),this.showSlate(),this.playReplay=s.createLargeTwoStateButton("overlay-play-pause",[{defaultIconName:"overlay-play",hoverIconName:"overlay-play-hover"},{defaultIconName:"overlay-replay",hoverIconName:"overlay-replay-hover"}]),this.el.appendChild(this.playReplay),this.el.appendChild(this.loadingSpinner.el),this.hide(),this.broadcastInteraction(),this.injectOverlayStyles(),this.listen()},hide:function(){o.add(this.playReplay,o.TRANSPARENT)},show:function(){o.remove(this.playReplay,o.TRANSPARENT)},hideSlate:function(){o.remove(this.el,o.OVERLAY_SLATE)},showSlate:function(){o.add(this.el,o.OVERLAY_SLATE)},listen:function(){this.eventBus.addEventListener(r.VID_CANPLAY,this.onCanPlay,this),this.eventBus.addEventListener(r.SCRUBBER_BAR_CLICK,this.onScrubberBarClick,this),this.eventBus.addEventListener(r.VID_PLAY,this.onPlay,this),this.eventBus.addEventListener(r.VID_PAUSE,this.onPause,this),this.eventBus.addEventListener(r.VID_ENDED,this.onVideoEnded,this)},teardown:function(){this.loadingSpinner.teardown(),this.el.removeEventListener("click",this.eventBus.triggers[r.PLAY_PAUSE_TOGGLE]),this.el.removeEventListener("mouseenter",this.eventBus.triggers[r.MOUSE_IN]),this.el.removeEventListener("mouseleave",this.eventBus.triggers[r.MOUSE_OUT]),this.el.removeEventListener("mousemove",this.eventBus.triggers[r.MOUSE_MOVE]),this.eventBus.removeEventListener(r.VID_CANPLAY,this.onLoadedMetadata,this),this.eventBus.removeEventListener(r.SCRUBBER_BAR_CLICK,this.onScrubberBarClick,this),this.eventBus.removeEventListener(r.VID_PLAY,this.onPlay,this),this.eventBus.removeEventListener(r.VID_PAUSE,this.onPause,this),this.eventBus.removeEventListener(r.VID_ENDED,this.onVideoEnded,this)},broadcastInteraction:function(){var t=this.eventBus.triggers[r.PLAY_PAUSE_TOGGLE],e=this;this.el.addEventListener("click",function(){return e.reely&&(e.reely.isPausedByUser=e.reely.isPlaying()),t()}),this.el.addEventListener("mouseenter",this.eventBus.triggers[r.MOUSE_IN]),this.el.addEventListener("mouseleave",this.eventBus.triggers[r.MOUSE_OUT]),this.el.addEventListener("mousemove",this.eventBus.triggers[r.MOUSE_MOVE])},onCanPlay:function(){this.isPlaying()||this.show()},onScrubberBarClick:function(){this.setToPlayIcon(),this.hideSlate()},onPlay:function(){this.setToPlayIcon(),this.isEnded(!1),this.isPlaying(!0),this.hide(),this.hideSlate()},onPause:function(){this.isPlaying(!1),this.show()},onVideoEnded:function(){this.setToReplayIcon(),this.isEnded(!0),this.show(),this.showSlate()},setToPlayIcon:function(){o.remove(this.playReplay,o.TOGGLED)},setToReplayIcon:function(){o.add(this.playReplay,o.TOGGLED)},isPlaying:function(t){return null!=t&&(this._isPlaying=t),this._isPlaying},isEnded:function(t){return null!=t&&(this._isEnded=t),this._isEnded},injectOverlayStyles:function(){var t=[];t=(t=(t=(t=t.concat(this.getContainerStyles())).concat(this.getSlateStyles())).concat(this.getButtonStyles())).concat(this.getHoverOverrideStyles()),this.zoo.insertRules(t)},getContainerStyles:function(){return[["."+o.OVERLAY_CONTAINER,{position:"absolute",top:0,left:0,display:"block",height:"100%",width:"100%",cursor:"pointer","text-align":"center"}],["."+o.OVERLAY_CONTAINER+" *",{visibility:"inherit"}]]},getSlateStyles:function(){return this.slate?[["."+o.OVERLAY_SLATE,{background:"url("+this.slate+") no-repeat center center transparent","background-size":"contain"}]]:[]},getButtonStyles:function(){return[["."+o.OVERLAY_CONTAINER+" ."+o.TWO_STATE_BUTTON,{top:"50%",left:"50%"}],["."+o.OVERLAY_CONTAINER+" ."+o.BUTTON_ICON_LARGE,{transform:"translate(-50%, -50%)"}],["."+o.BUTTON_ICON_LARGE,{height:this.spriteDimensions.overlaySpriteHeight+"px",width:this.spriteDimensions.overlaySpriteWidth+"px",padding:this.spriteDimensions.buttonPadding+"px"}]]},getHoverOverrideStyles:function(){var t=o;return[[["."+t.OVERLAY_CONTAINER+" ."+t.TWO_STATE_BUTTON+" ."+t.TWO_STATE_DEFAULT,"."+t.OVERLAY_CONTAINER+" ."+t.TWO_STATE_BUTTON+" ."+t.TWO_STATE_DEFAULT],{visibility:"inherit"}],[["."+t.OVERLAY_CONTAINER+" ."+t.BUTTON+" ."+t.ICON_DEFAULT,"."+t.OVERLAY_CONTAINER+":hover ."+t.BUTTON+" ."+t.ICON_HOVER],{opacity:1}],[["."+t.OVERLAY_CONTAINER+":hover ."+t.BUTTON+" ."+t.ICON_DEFAULT,"."+t.OVERLAY_CONTAINER+" ."+t.BUTTON+" ."+t.ICON_HOVER],{opacity:0}],[["."+t.OVERLAY_CONTAINER+":hover ."+t.BUTTON+" ."+t.ICON_DEFAULT,"."+t.OVERLAY_CONTAINER+" ."+t.BUTTON+" ."+t.ICON_HOVER],{transition:"opacity 0.2s linear"}],["."+t.OVERLAY_CONTAINER+":hover ."+t.BUTTON+" ."+t.ICON_DEFAULT,{transition:"opacity 0s linear 0.2s"}]]}},e.exports=n},{"./reely-css-classes.js":103,"./reely-el-maker.js":104,"./reely-events.js":106,"./reely-loading-spinner.js":107}],109:[function(t,e,i){function n(t){this.eventBus=t.eventBus,this.spritesheet=t.spritesheet,this.spriteDimensions=t.spriteDimensions,this.zoo=t.zoo,this.init()}var o=t("./reely-css-classes.js"),s=t("./reely-el-maker.js"),r=t("./reely-events.js");n.prototype={init:function(){this.el=s.make("div",o.SCRUBBER_CONTAINER),this.el.addEventListener("click",this.onScrubberClick.bind(this)),this.els=this.createScrubberBarEls(),this.appendEls(),this.injectScrubberStyles(),this.listen()},getEl:function(){return this.el},appendEls:function(){this.el.appendChild(this.els.bg),this.el.appendChild(this.els.buffered),this.el.appendChild(this.els.played),this.el.appendChild(this.els.thumb)},createScrubberBarEls:function(){var t={};return t.bg=s.createRepeatXSprite("scrubber-bg"),t.bg.style.width="100%",t.played=s.createRepeatXSprite("scrubber-played-bg"),t.played.style.width=0,t.buffered=s.createRepeatXSprite("scrubber-buffered-bg"),t.buffered.style.width=0,t.thumb=s.createButtonState({defaultIconName:"scrubber-tab",hoverIconName:"scrubber-tab-hover"},o.BUTTON+"-scrubber-tab"),t},listen:function(){this.eventBus.addEventListener(r.VID_TIMEUPDATE,this.onTimeUpdate,this),this.eventBus.addEventListener(r.VID_PLAY,this.onPlay,this)},teardown:function(){this.eventBus.removeEventListener(r.VID_TIMEUPDATE,this.onTimeUpdate,this),this.eventBus.removeEventListener(r.VID_PLAY,this.onPlay,this)},onPlay:function(t){this.lastUpdateMs=Date.now()},onTimeUpdate:function(t){var e,i=Date.now(),t=(this.lastUpdateMs&&(e=(i-this.lastUpdateMs)/1e3),t.target),n=t.currentTime/t.duration,n=(this.setScrubberBar(n,e),this.determineBufferedFraction(t.buffered,t.duration));this.setBufferBar(n),this.lastUpdateMs=i},setScrubberTransition:function(t){t?(this.els.played.style.transition="width "+t+"s linear",this.els.thumb.style.transition="left "+t+"s linear"):(this.els.played.style.transition="",this.els.thumb.style.transition="")},onScrubberClick:function(t){o.contains(t.target,"reely-icon")||(t=(void 0!==t.offsetX?t.offsetX:t.layerX)/this.el.clientWidth,this.eventBus.trigger(r.SCRUBBER_BAR_CLICK,{clickedFraction:t}))},setScrubberBar:function(t,e){this.playedFraction=t,this.transitionInS=e,this.setScrubberTransition(this.transitionInS||void 0);t=100*this.playedFraction;this.els.played.style.width=t+"%",this.els.thumb.style.left=t+"%"},setBufferBar:function(t){this.els.buffered.style.width=100*t+"%"},determineBufferedFraction:function(t,e){for(var i=0,n=0,o=0;o<t.length;o++)n+=t.end(0)-t.start(0);return i=0<n?n/e:i},injectScrubberStyles:function(){var t=[];t=(t=t.concat(this.getScrubberBarStyles())).concat(this.getScrubberThumbOverrideStyles()),this.zoo.insertRules(t)},getScrubberBarStyles:function(){return[["."+o.SCRUBBER_CONTAINER,{position:"relative",height:"100%",width:"100%","box-sizing":"border-box",overflow:"initial","padding-top":this.spriteDimensions.buttonPadding+"px","padding-bottom":this.spriteDimensions.buttonPadding+"px"}],["."+o.BUTTON+"-scrubber-tab",{position:"absolute",top:0,left:0,transform:"translateX(-"+this.spriteDimensions.spriteWidth/2+"px)","padding-left":0,"padding-right":0,"pointer-events":"none"}]]},getScrubberThumbOverrideStyles:function(){return[["."+o.SCRUBBER_CONTAINER+" ."+o.ICON_HOVER,{left:0}]]}},e.exports=n},{"./reely-css-classes.js":103,"./reely-el-maker.js":104,"./reely-events.js":106}],110:[function(t,e,i){function n(t){this.spriteDimensions=t.spriteDimensions,this.controlBarConfig=t.controlBarConfig,this.zoo=t.zoo,this.spritesheetUrls=this.determineSpritesheetUrls(t.spritesheetUrls),this.overlaySpritesheetUrls=this.determineOverlaySpritesheetUrls(t.overlaySpritesheetUrls),this.init()}var o=t("./reely-css-classes.js"),s=t("./reely-config.js");n.prototype={TEMP_FORCE_PNG_SPRITESHEET:!0,init:function(){this.doesSupportSVG=this.supportsSVG(),this.spritesheetSrc=this.determineSpritesheetMode(this.spritesheetUrls),this.overlaySpritesheetSrc=this.determineSpritesheetMode(this.overlaySpritesheetUrls),this.spritesData=this.initSpritesData();var e=new Image;e.addEventListener("load",function(t){document.body.appendChild(e);t=(t.path||t.composedPath&&t.composedPath())[0];this.rows=t.height/t.width*2,this.injectSpritesheetCSS(),document.body.removeChild(e)}.bind(this)),e.style.visibility="hidden",e.style.position="fixed",e.style.left="-9999px",e.style.top="-9999px",e.style.zIndex="-9999",e.style.pointerEvents="none",e.src=this.spritesheetSrc},getSrc:function(){return this.spritesheetSrc},getOverlaySrc:function(){return this.overlaySpritesheetSrc},supportsSVG:function(){return"undefined"!=typeof SVGRect},determineSpritesheetMode:function(t){return!this.TEMP_FORCE_PNG_SPRITESHEET&&this.doesSupportSVG&&t.svg?t.svg:t.png},initSpritesData:function(){var t={},e=this.addControlsBGData(t,0);return e=this.addRepeatXData(t,e),this.addIconData(t,e),this.addLargeIconData(t),t},addControlsBGData:function(t,e){var i=this.controlBarConfig.height;return t.controlsBG={type:"repeat-x",h:i,x:0,y:e},e+i},addRepeatXData:function(t,e){for(var i=e,n=this.spriteDimensions.spriteHeight,o=["scrubber-bg","scrubber-played-bg","scrubber-buffered-bg"],s=0;s<o.length;s++)t[o[s]]={type:"repeat-x",h:n,x:0,y:i},i+=n;return i},addIconData:function(t,e){for(var i,n,o=this.spriteDimensions.spriteHeight,s=this.spriteDimensions.spriteWidth,r=["scrubber-tab","scrubber-tab-hover","scrubber-tabDown","","play","play-hover","pause","pause-hover","sound-off","sound-off-hover","sound-on","sound-on-hover","fullscreen","fullscreen-hover","normal","normal-hover"],a=e,d=0;d<r.length;d++)n=d%2,""!==(i=r[d])&&(t[i]={type:"icon",w:s,h:o,x:n?s:0,y:a}),a=n?a+o:a;return a},addLargeIconData:function(t,e){for(var i=this.spriteDimensions.overlaySpriteWidth,n=this.spriteDimensions.overlaySpriteHeight,o=["overlay-play","overlay-play-hover","overlay-replay","overlay-replay-hover"],s=0,r=0;r<o.length;r++)t[o[r]]={type:"icon-large",w:i,h:n,x:0,y:s},s+=n;return s},determineSpritesheetUrls:function(t){var e={png:s.DEFAULT_SPRITESHEET};return this._determineSpritesheetUrls(t,e)},determineOverlaySpritesheetUrls:function(t){var e={png:s.DEFAULT_OVERLAY_SPRITESHEET};return this._determineSpritesheetUrls(t,e)},_determineSpritesheetUrls:function(t,e){var i={};return t&&Object.keys(t).length&&t.png?i.png=t.png:i=e,i},injectSpritesheetCSS:function(){var t=[];t=(t=(t=t.concat(this.getSpriteStyles())).concat(this.getOverlaySpriteStyles())).concat(this.getIndividualSpriteStyles()),this.zoo.insertRules(t)},getSpriteStyles:function(){return[[["."+o.ICON,"."+o.REPEAT_X_SPRITE],{height:this.spriteDimensions.spriteHeight+"px",display:"inline-block","background-image":"url("+this.getSrc()+")","background-color":"transparent"}]]},getOverlaySpriteStyles:function(){return[["."+o.ICON_LARGE,{display:"inline-block",height:this.spriteDimensions.overlaySpriteHeight+"px",width:this.spriteDimensions.overlaySpriteWidth+"px","background-image":"url("+this.getOverlaySrc()+")","background-color":"transparent"}]]},getIndividualSpriteStyles:function(){var t,e,i=[],n={icon:this.getIconCSS,"repeat-x":this.getRepeatXSpriteCSS,"icon-large":this.getIconLargeCSS};for(e in this.spritesData)this.spritesData.hasOwnProperty(e)&&(t=n[(t=this.spritesData[e]).type].call(this,e,t),i.push(t));return i},getIconCSS:function(t,e){var i=this.spriteDimensions;return["."+o.ICON+"-"+t,{width:this.spriteDimensions.spriteWidth+"px","background-position":"-"+e.x+"px -"+e.y+"px","background-repeat":"no-repeat","background-size":2*i.spriteWidth+"px "+i.spriteHeight*this.rows+"px"}]},getRepeatXSpriteCSS:function(t,e){var i=this.spriteDimensions;return["."+o.REPEAT_X_SPRITE+"-"+t,{position:t.includes("controls")?"relative":"absolute","max-width":"100%","background-position":"0 -"+e.y+"px","background-repeat":"repeat-x","background-size":2*i.spriteWidth+"px "+i.spriteHeight*this.rows+"px"}]},getIconLargeCSS:function(t,e){return["."+o.ICON_LARGE+"-"+t,{"background-position":"0 -"+e.y+"px","background-repeat":"no-repeat"}]}},e.exports=n},{"./reely-config.js":101,"./reely-css-classes.js":103}],111:[function(t,e,i){function n(t){this.injectEl=t.injectEl,this.src=t.src,this.slate=t.slate||"",this.fullscreen=t.fullscreen||!1,this.autoplay=t.autoplay||!1,this.autosound=t.autosound||!1,this.playsInline=t.playsInline||!0,this.spritesheetUrls=t.spritesheets||{},this.overlaySpritesheetUrls=t.overlaySpritesheets||{},this.iframeId=t.iframeId,this.spriteDimensions=this.determineSpriteDimensionsConfig(t.spritesheets),this.setMediaKey=null,this.lastPermission="",this.hasSubscribed=!1,this.shouldObeyMediaInteroperability=!1,this.isInWeblab=!1,this.isPausedByUser=!t.autoplay,this.controlBarConfig=this.determineControlBarConfig(t.controlBar||{}),this.onScreenChange=this.onScreenChange.bind(this),this.onVolumeChange=this.onVolumeChange.bind(this),t.zoolander&&(this.zoo=t.zoolander),this.setInitialDebugMode(),this.init()}var o=t("./reely-event-bus.js"),s=t("./reely-controls.js"),r=t("./reely-overlay.js"),a=t("./reely-spritesheet.js"),d=t("../zoolander.js"),l=t("./reely-css-classes.js"),u=t("./reely-el-maker.js"),c=t("./reely-events.js"),h=t("../utils/weblab"),p=t("../utils/bridge").getBridge,m=t("../utils/url"),f="granted",g="pending";n.prototype={doDebug:!1,log:function(t){this.reelyDebug&&console.log("[reely]: ",t),window.top.Tarnhelm&&window.top.Tarnhelm.log&&window.top.Tarnhelm.log("[reely]: "+t)},init:function(){this.el=u.make("div",l.CONTAINER),this.shouldObeyMediaInteroperability=h.shouldObeyMediaInteroperability(),this.isInWeblab=h.isInWeblab(h.autoplayId),this.shouldObeyMediaInteroperability&&this.subscribeToMediaNotifications(),this.initZoolander(),this.injectPlayerStyles(),this.hide(),this.initChildren(),this.videoStarted=!1,this.videoEl=this.createVideoEl(),this.broadcast(),this.listen(),this.el.appendChild(this.videoEl),this.el.appendChild(this.overlay.el),this.el.appendChild(this.controls.el),this.injectEl.appendChild(this.el);this.autoplay&&this.videoEl&&3<=this.videoEl.readyState&&!this.isPlaying()&&this.isInWeblab&&this.play()},initZoolander:function(){var t,e;this.zoo||((t=this.injectEl.id)||(e=Date.now()+1e3*Math.floor(Math.random()),this.injectEl.id=t="reely-container-parent-"+e),this.zoo=new d({id:t,prefixId:t}))},initChildren:function(){this.eventBus=new o,this.spritesheet=new a({spritesheetUrls:this.spritesheetUrls,overlaySpritesheetUrls:this.overlaySpritesheetUrls,spriteDimensions:this.spriteDimensions,controlBarConfig:this.controlBarConfig,zoo:this.zoo});var t={eventBus:this.eventBus,spritesheet:this.spritesheet,slate:this.slate,spriteDimensions:this.spriteDimensions,controlBarConfig:this.controlBarConfig,zoo:this.zoo};this.overlay=new r(t,this),this.controls=new s(t,this)},play:function(){this.shouldObeyMediaInteroperability?this.requestPlayback({userInitiated:!0}):this.isPlaying()||this.eventBus.trigger(c.PLAY_PAUSE_TOGGLE)},pause:function(t){this.isPlaying()?(this.eventBus.trigger(c.PLAY_PAUSE_TOGGLE),this.shouldObeyMediaInteroperability&&(t&&t.ended?this.setMediaEnded():this.setMediaPaused())):this.shouldObeyMediaInteroperability&&t&&t.ended&&this.setMediaEnded()},isPlaying:function(){return!!this.videoEl&&!this.videoEl.paused},reset:function(){this.videoEl.currentTime=0,this.pause()},unmute:function(){this.isMuted()&&(this.videoEl.muted=!1)},mute:function(){this.isMuted()||(this.videoEl.muted=!0)},isMuted:function(){return this.videoEl.muted||0===this.videoEl.volume},onVolumeChange:function(){var t=this.controls.isToggled(this.controls.muteUnmute);t&&this.isMuted()?this.eventBus.trigger(c.MUTED):t||this.isMuted()||this.eventBus.trigger(c.UNMUTED)},normalScreenMode:function(){this.isFullscreen()&&(document.exitFullscreen?(document.exitFullscreen(),this.setNormalPlayerBar()):document.webkitExitFullscreen?(document.webkitExitFullscreen(),this.setNormalPlayerBar()):document.mozCancelFullScreen?(document.mozCancelFullScreen(),this.setNormalPlayerBar()):document.msExitFullscreen?(document.msExitFullscreen(),this.setNormalPlayerBar()):this.videoEl.webkitExitFullscreen&&(this.videoEl.webkitExitFullscreen(),this.setNormalPlayerBar()))},fullscreenMode:function(){this.isFullscreen()||(this.el.requestFullscreen?this.el.requestFullscreen():this.el.webkitRequestFullscreen?this.el.webkitRequestFullscreen():this.el.msRequestFullscreen?this.el.msRequestFullscreen():this.el.mozRequestFullScreen?this.el.mozRequestFullScreen():this.videoEl.webkitEnterFullscreen&&this.videoEl.webkitEnterFullscreen())},isFullscreen:function(){return this.el.fullscreen},supportsFullscreen:function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled||document.mozFullScreenEnabled||this.videoEl&&this.videoEl.webkitSupportsFullscreen},hide:function(){l.add(this.el,l.HIDDEN)},show:function(){l.remove(this.el,l.HIDDEN)},requestPlayback:function(t){var e=this,t=t||{};return this.hasSubscribed?this.lastPermission===f&&this.videoEl?(this.videoEl.play(),this.setMediaPlay()):void p().requestPlayback({name:this.iframeId||"reely",userInitiated:!!t.userInitiated,videoFrame:this.getVideoFrame()}).then(function(t){e.log("requestPlayback success"),e.onMediaPermissionsChanged(t)},function(t){e.log("requestPlayback error: "+JSON.stringify(t))}):this.subscribeToMediaNotifications({shouldRequestPlayback:!0})},setMediaPlay:function(){p().isMediaOrchestratorBridge?this.setStatus("setMediaPlay",{isReely:!0}):this.setStatus("setMediaPlay")},setMediaPaused:function(){this.setStatus("setMediaPaused")},setMediaEnded:function(){this.setStatus("setMediaEnded")},setStatus:function(e,t){var i,n,o;this.shouldObeyMediaInteroperability&&(this.log(e),i=this,n=p()[e],o={key:this.setMediaKey,permission:this.lastPermission},(t?n(o,t):n(o)).then(function(t){i.log(e+" success")},function(t){i.log(e+" error: "+JSON.stringify(t))}))},subscribeToMediaNotifications:function(t){var e,i,t=!!(t||{}).shouldRequestPlayback;this.hasSubscribed||(e=p(),i={onMediaPermissionsChanged:this.onMediaPermissionsChanged.bind(this)},e.isMediaOrchestratorBridge&&(i.name=this.iframeId||"reely"),this.hasSubscribed=e.subscribe(i),this.log("subscribeToMediaNotifications: "+this.hasSubscribed),t&&this.requestPlayback({userInitiated:!1}))},onMediaPermissionsChanged:function(t){if(t&&t.permission){var e=t.permission.toLowerCase();switch(this.setMediaKey=t.key,this.lastPermission=t.permission,e){case f:this.log("onMediaPermissionsChanged: "+f),this.videoEl&&!this.isPausedByUser?(this.videoEl.play(),this.setMediaPlay()):this.log("isPausedByUser: "+this.isPausedByUser+", ignoring "+f+" permission");break;case"denied":this.log("onMediaPermissionsChanged: denied"),this.pause();break;case g:this.log("onMediaPermissionsChanged: "+g);break;default:this.log("onMediaPermissionsChanged unexpected permission: "+e)}}},getVideoFrame:function(){var t=this.videoEl?this.videoEl.getBoundingClientRect():{},e=window.top.Tarnhelm&&window.top.Tarnhelm.getDeviceInfo(),i=0,n=(this.videoEl&&this.videoEl.ownerDocument&&this.videoEl.ownerDocument.defaultView&&(i=this.videoEl.ownerDocument.defaultView.innerWidth),window.top.innerWidth),i=(i-n)/2,n={x:0<i&&"inline20"===this.iframeId?t.x-i:t.x,y:t.y,width:t.width,height:t.height};return p().isMediaOrchestratorBridge&&e.isMobileSite&&(i=(t=(i=this.videoEl&&this.videoEl.ownerDocument&&this.videoEl.ownerDocument.defaultView)?i.frameElement||i.iframe:null)?t.getBoundingClientRect():{x:0,y:0},n.x+=i.x+window.scrollX,n.y+=i.y+window.scrollY),e&&!e.isIMDbApp&&this.isFullscreen()&&(n.isFullscreen=!0),n},getEventBus:function(){return this.eventBus},broadcast:function(){this.passVideoEvents()},passVideoEvents:function(){this.log("passVideoEvents"),(this.doDebug||this.reelyDebug)&&this.passDebugEventLog(),this.videoEl.addEventListener("loadstart",this.eventBus.triggers[c.VID_LOADSTART]),this.videoEl.addEventListener("loadedmetadata",this.eventBus.triggers[c.VID_LOADEDMETADATA]),this.videoEl.addEventListener("loadeddata",this.eventBus.triggers[c.VID_LOADEDDATA]),this.videoEl.addEventListener("canplay",this.eventBus.triggers[c.VID_CANPLAY]),this.videoEl.addEventListener("canplaythrough",this.eventBus.triggers[c.VID_CANPLAYTHROUGH]),this.videoEl.addEventListener("waiting",this.eventBus.triggers[c.VID_WAITING]),this.videoEl.addEventListener("progress",this.eventBus.triggers[c.VID_PROGRESS]),this.videoEl.addEventListener("suspend",this.eventBus.triggers[c.VID_SUSPEND]),this.videoEl.addEventListener("play",this.eventBus.triggers[c.VID_PLAY]),this.videoEl.addEventListener("pause",this.eventBus.triggers[c.VID_PAUSE]),this.videoEl.addEventListener("timeupdate",this.eventBus.triggers[c.VID_TIMEUPDATE]),this.videoEl.addEventListener("ended",this.eventBus.triggers[c.VID_ENDED]),this.videoEl.addEventListener("volumechange",this.onVolumeChange),this.el.addEventListener("fullscreenchange",this.onScreenChange),this.el.addEventListener("mozfullscreenchange",this.onScreenChange),this.el.addEventListener("MSFullscreenChange",this.onScreenChange),this.el.addEventListener("webkitfullscreenchange",this.onScreenChange)},passDebugEventLog:function(){for(var t=["canplay","canplaythrough","loadeddata","loadedmetadata","loadstart","pause","play"],e=0;e<t.length;e++)this.videoEl.addEventListener(t[e],this.debugLog)},debugLog:function(t){window&&window.console&&window.console.log&&window.console.log("Media Event :: type :: ",t.type)},listen:function(){this.log("listen"),this.eventBus.addEventListener(c.VID_LOADEDMETADATA,this.onLoadedMetadata,this),this.eventBus.addEventListener(c.VID_LOADEDDATA,this.onLoadedData,this),this.eventBus.addEventListener(c.VID_PLAY,this.onPlay,this),this.eventBus.addEventListener(c.VID_ENDED,this.onVideoEnded,this),this.eventBus.addEventListener(c.PLAY_PAUSE_TOGGLE,this.onPlayPauseClick,this),this.eventBus.addEventListener(c.MUTE_UNMUTE_TOGGLE,this.onMuteUnmuteClick,this),this.eventBus.addEventListener(c.FULLSCREEN_NORMAL_TOGGLE,this.onFullscreenNormalClick,this),this.eventBus.addEventListener(c.SCRUBBER_BAR_CLICK,this.onScrubberBarClick,this),this.eventBus.addEventListener(c.VID_CANPLAY,this.onCanPlay,this)},teardown:function(){this.pause({ended:!0}),this.mute(),this.videoEl.removeEventListener("loadstart",this.eventBus.triggers[c.VID_LOADSTART]),this.videoEl.removeEventListener("loadedmetadata",this.eventBus.triggers[c.VID_LOADEDMETADATA]),this.videoEl.removeEventListener("loadeddata",this.eventBus.triggers[c.VID_LOADEDDATA]),this.videoEl.removeEventListener("canplay",this.eventBus.triggers[c.VID_CANPLAY]),this.videoEl.removeEventListener("canplaythrough",this.eventBus.triggers[c.VID_CANPLAYTHROUGH]),this.videoEl.removeEventListener("waiting",this.eventBus.triggers[c.VID_WAITING]),this.videoEl.removeEventListener("progress",this.eventBus.triggers[c.VID_PROGRESS]),this.videoEl.removeEventListener("suspend",this.eventBus.triggers[c.VID_SUSPEND]),this.videoEl.removeEventListener("play",this.eventBus.triggers[c.VID_PLAY]),this.videoEl.removeEventListener("pause",this.eventBus.triggers[c.VID_PAUSE]),this.videoEl.removeEventListener("timeupdate",this.eventBus.triggers[c.VID_TIMEUPDATE]),this.videoEl.removeEventListener("ended",this.eventBus.triggers[c.VID_ENDED]),this.videoEl.removeEventListener("volumechange",this.onVolumeChange),this.videoEl.removeEventListener("click",this.eventBus.triggers[c.PLAY_PAUSE_TOGGLE]),this.el.removeEventListener("fullscreenchange",this.onScreenChange),this.el.removeEventListener("mozfullscreenchange",this.onScreenChange),this.el.removeEventListener("MSFullscreenChange",this.onScreenChange),this.el.removeEventListener("webkitfullscreenchange",this.onScreenChange),this.eventBus.removeEventListener(c.STARTED,this.onPlay,this),this.eventBus.removeEventListener(c.VID_LOADEDMETADATA,this.onLoadedMetadata,this),this.eventBus.removeEventListener(c.VID_LOADEDDATA,this.onLoadedData,this),this.eventBus.removeEventListener(c.PLAY_PAUSE_TOGGLE,this.onPlayPauseClick,this),this.eventBus.removeEventListener(c.MUTE_UNMUTE_TOGGLE,this.onMuteUnmuteClick,this),this.eventBus.removeEventListener(c.SCRUBBER_BAR_CLICK,this.onScrubberBarClick,this),this.eventBus.removeEventListener(c.VID_CANPLAY,this.onCanPlay,this),this.zoo.teardown(),this.overlay.teardown(),this.controls.teardown(),this.removeNodes()},removeNodes:function(){this.injectEl.removeChild(this.el),this.videoEl=null,this.overlay.el=null,this.controls.el=null,this.el=null},onPlay:function(){this.videoStarted||(this.videoStarted=!0,this.eventBus.triggers[c.STARTED](),this.eventBus.removeEventListener(c.STARTED,this.onPlay,this))},onVideoEnded:function(){this.pause({ended:!0})},onPlayPauseClick:function(){this.videoEl.paused?this.shouldObeyMediaInteroperability?this.requestPlayback({userInitiated:!0}):this.videoEl.play():(this.videoEl.pause(),this.shouldObeyMediaInteroperability&&this.setMediaPaused())},onMuteUnmuteClick:function(t){this.isMuted()?(this.videoEl.volume=1,this.unmute()):this.mute()},setNormalPlayerBar:function(){l.remove(this.el,l.FULLSCREEN),this.el.fullscreen=!1,this.eventBus.trigger(c.VID_EXITFULLSCREEN)},onScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||this.videoEl&&this.videoEl.webkitDisplayingFullscreen?(l.add(this.el,l.FULLSCREEN),this.el.fullscreen=!0,this.eventBus.trigger(c.VID_ENTERFULLSCREEN)):this.setNormalPlayerBar()},onFullscreenNormalClick:function(t){this.isFullscreen()?this.normalScreenMode():this.fullscreenMode()},onScrubberBarClick:function(t){t=t.clickedFraction;this.videoEl.currentTime=this.videoEl.duration*t},onLoadedMetadata:function(t){this.log("onLoadedMetadata"),this.fullscreen&&(this.supportsFullscreen()?this.controls.addFullscreenButton():this.log("Fullscreen not supported. Disabling.")),this.needsAspectInjection()&&this.injectAspectStyles()},checkIsPlayingAndIsInWeblab:function(){return this.autoplay&&!this.isPlaying()&&this.isInWeblab},playbackOnMediaInterop:function(){this.shouldObeyMediaInteroperability?this.requestPlayback({userInitiated:!1}):this.videoEl.play()},onLoadedData:function(t){this.log("onLoadedData"),this.show(),this.checkIsPlayingAndIsInWeblab()&&this.playbackOnMediaInterop()},onCanPlay:function(t){this.log("onCanPlay"),(this.checkIsPlayingAndIsInWeblab()||this.autoplay)&&this.playbackOnMediaInterop()},createVideoEl:function(){var t=u.make("video",l.VIDEO),e=(t.volume=1,t.preload=!0,this.slate&&(t.poster=this.slate),this.playsInline&&(t.setAttribute("webkit-playsinline",""),t.setAttribute("playsinline","")),this.autosound);return t.muted=!e,e&&this.eventBus.trigger(c.UNMUTED),this.addSources(t),t},addSources:function(t){var e,i=/\.([a-z0-9]{2,4})$/.exec(this.src),i=(i?(i=this.createSource(this.src,i[1]),t.appendChild(i)):(i=this.createSource(this.src,"mp4"),e=this.createSource(this.src,"webm"),t.appendChild(i),t.appendChild(e)),document.createElement("p"));i.innerHTML="Sorry, your browser does not support HTML5 video.",t.appendChild(i)},createSource:function(t,e){var i=document.createElement("source");return i.src=new RegExp("\\."+e+"$").test(t)?t:t+"."+e,i.type="video/"+e,i},determineControlBarConfig:function(t){var e=this.controlBarDefaults(),i=t;if(!i)return e;for(var n,o=e,s=(null==i.autohide&&null!=i.autoHide&&(i.autohide=i.autoHide,delete i.autoHide),["width","autohide","anchorX","offsetX","anchorY","offsetY","hideBG"]),r=0;r<s.length;r++)null!=i[n=s[r]]&&(o[n]=this.addPxIfNumber(i[n]));return o},controlBarDefaults:function(){return{height:1.5*this.spriteDimensions.spriteHeight,autohide:!0,anchorX:"center",offsetX:0,anchorY:"bottom",offsetY:0,width:"100%",hideBG:!1}},addPxIfNumber:function(t){return"number"==typeof t?t+"px":t},determineSpriteDimensionsConfig:function(t){var e=this.spriteDimensionsDefaults();return t&&t.buttonSize?{buttonPadding:.25*(t=t.buttonSize),spriteHeight:t,spriteWidth:t,overlaySpriteHeight:100,overlaySpriteWidth:100}:e},spriteDimensionsDefaults:function(){return{buttonPadding:5,spriteHeight:20,spriteWidth:20,overlaySpriteHeight:100,overlaySpriteWidth:100}},injectPlayerStyles:function(){var t=[];t=(t=(t=(t=(t=t.concat(this.getUtilityStyles())).concat(this.getPlayerStyles())).concat(this.getIconStyles())).concat(this.getButtonStyles())).concat(this.getTwoStateStyles()),this.zoo.insertRules(t)},getUtilityStyles:function(){return[["."+l.UNSELECTABLE,{"user-select":"none"}],["."+l.HIDDEN,{display:"none"}],["."+l.INVISIBLE,{visibility:"hidden"}],["."+l.TRANSPARENT,{opacity:0}]]},getPlayerStyles:function(){return[["."+l.CONTAINER,{position:"relative","z-index":1,display:"block",width:"100%",height:"100%",margin:"0 auto","background-color":"black",overflow:"visible"}],["."+l.VIDEO,{position:"absolute","z-index":-1,top:0,left:0,height:"100%",width:"100%",cursor:"pointer"}]]},getIconStyles:function(){return[[["."+l.ICON,"."+l.ICON_HOVER],{position:"absolute"}],["."+l.ICON_HOVER,{top:this.spriteDimensions.buttonPadding+"px",left:this.spriteDimensions.buttonPadding+"px"}]]},getButtonStyles:function(){return[["."+l.BUTTON,{cursor:"pointer"}],[["."+l.BUTTON+" ."+l.ICON_DEFAULT,"."+l.BUTTON+":hover ."+l.ICON_HOVER],{opacity:1}],[["."+l.BUTTON+":hover ."+l.ICON_DEFAULT,"."+l.BUTTON+" ."+l.ICON_HOVER],{opacity:0}],[["."+l.BUTTON+":hover ."+l.ICON_DEFAULT,"."+l.BUTTON+" ."+l.ICON_HOVER],{transition:"opacity 0.2s linear"}],["."+l.BUTTON+":hover ."+l.ICON_DEFAULT,{transition:"opacity 0s linear 0.2s"}]]},getTwoStateStyles:function(){return[[["."+l.TWO_STATE_BUTTON,"."+l.TWO_STATE_BUTTON+" ."+l.TWO_STATE_DEFAULT,"."+l.TWO_STATE_BUTTON+" ."+l.TWO_STATE_ALT],{position:"absolute"}],["."+l.TWO_STATE_BUTTON,{display:"inline-block"}],[["."+l.TWO_STATE_BUTTON+" ."+l.TWO_STATE_DEFAULT,"."+l.TWO_STATE_BUTTON+"."+l.TOGGLED+" ."+l.TWO_STATE_ALT],{opacity:1,visibility:"visible"}],[["."+l.TWO_STATE_BUTTON+"."+l.TOGGLED+" ."+l.TWO_STATE_DEFAULT,"."+l.TWO_STATE_BUTTON+" ."+l.TWO_STATE_ALT],{opacity:0,visibility:"hidden"}]]},needsAspectInjection:function(){return 0===this.el.parentNode.clientHeight},injectAspectStyles:function(){var t=this.determineLoadedVideoDimensions(),t=(t.height/t.width*100).toFixed(4);this.aspectRule=this.zoo.insertRule("."+l.CONTAINER,{"padding-top":t+"%"})},determineLoadedVideoDimensions:function(){return{width:this.videoEl.videoWidth,height:this.videoEl.videoHeight}},setInitialDebugMode:function(){var t=m.getQueryParam("reelyDebug");"1"!==t&&"true"!==t||(this.reelyDebug=!0,console.log("Reely video logs enabled."))}},e.exports=n},{"../utils/bridge":113,"../utils/url":115,"../utils/weblab":116,"../zoolander.js":118,"./reely-controls.js":102,"./reely-css-classes.js":103,"./reely-el-maker.js":104,"./reely-event-bus.js":105,"./reely-events.js":106,"./reely-overlay.js":108,"./reely-spritesheet.js":110}],112:[function(t,e,i){var h={adCustomAction1001:!0,adCustomAction1002:!0,adCustomAction1003:!0,adCustomAction1004:!0,adCustomAction1005:!0,adCustomAction1006:!0,adCustomAction1007:!0,adCustomAction1008:!0,adCustomAction1009:!0,adCustomAction1031:!0,adCustomAction1032:!0,adCustomAction1033:!0,adCustomAction1034:!0,adCustomAction1035:!0,adCustomAction1036:!0,adCustomAction1037:!0,adCustomAction1038:!0,adCustomAction1039:!0,adCustomAction1040:!0,adCustomAction1041:!0,adCustomAction1042:!0,adCustomAction1043:!0,adCustomAction1044:!0,adCustomAction1045:!0,adCustomAction1046:!0,adCustomAction1047:!0,adCustomAction1048:!0,adCustomAction1049:!0,adCustomAction1050:!0,adCustomAction1101:!0,adCustomAction1102:!0,adCustomAction1103:!0,adCustomAction1104:!0,adCustomAction1105:!0,adCustomAction1106:!0,adCustomAction1107:!0,adCustomAction1108:!0,adCustomAction1109:!0,adCustomAction1110:!0,adCustomAction1111:!0,adCustomAction1112:!0,adCustomAction1113:!0,adCustomAction1114:!0,adCustomAction1115:!0,adCustomAction1116:!0,adCustomAction1117:!0,adCustomAction1118:!0,adCustomAction1119:!0,adCustomAction1120:!0,adCustomAction1201:!0,adCustomAction1202:!0,adCustomAction1203:!0,adCustomAction1204:!0,adCustomAction1205:!0,adCustomAction1206:!0,adCustomAction1207:!0,adCustomAction1208:!0,adCustomAction1209:!0,adCustomAction1210:!0,adCustomAction1211:!0,adCustomAction1212:!0,adCustomAction1213:!0,adCustomAction1214:!0,adCustomAction1215:!0,adCustomAction1216:!0,adCustomAction1217:!0,adCustomAction1218:!0,adCustomAction1219:!0,adCustomAction1220:!0,adCustomAction1301:!0,adCustomAction1302:!0,adCustomAction1303:!0,adCustomAction1304:!0,adCustomAction1305:!0,adCustomAction1306:!0,adCustomAction1307:!0,adCustomAction1308:!0,adCustomAction1309:!0,adCustomAction1310:!0,adCustomAction1311:!0,adCustomAction1312:!0,adCustomAction1313:!0,adCustomAction1314:!0,adCustomAction1315:!0,adCustomAction1316:!0,adCustomAction1317:!0,adCustomAction1318:!0,adCustomAction1319:!0,adCustomAction1320:!0,adCustomAction1321:!0,adCustomAction1322:!0,adCustomAction1323:!0,adCustomAction1324:!0,adCustomAction1325:!0,adCustomAction1326:!0,adCustomAction1327:!0,adCustomAction1328:!0,adCustomAction1329:!0,adCustomAction1330:!0,adCustomAction1331:!0,adCustomAction1332:!0,adCustomAction1333:!0,adCustomAction1334:!0,adCustomAction1335:!0,adCustomAction1336:!0,adCustomAction1337:!0,adCustomAction1338:!0,adCustomAction1339:!0,adCustomAction1340:!0,adCustomAction1341:!0,adCustomAction1342:!0,adCustomAction1343:!0,adCustomAction1344:!0,adCustomAction1345:!0};e.exports=function(){for(var d={},i=5,n=2,o=1,t=1e3,e=[];t<=1499;t++){var s="adCustomAction"+t;h[s]||e.push(s)}var p,m,l=[],u=!1;function r(t){return isNaN(t)?e.length?e.shift():(console&&console.warn&&console.warn("WARNING: out of tracking actions!"),""):"adCustomAction"+(1!==t?t:"")}function a(t){var e;return isNaN(t)?o<=10?(e="tabClick"+(1!==o?o:""),o++,e):r():"tabClick"+(1!==t?t:"")}function f(t){var e;return isNaN(t)?Array.isArray(t)&&5===t.length?{"media/start":isNaN(t[0])?t[0]:r(t[0]),"media/firstQuartile":isNaN(t[1])?t[1]:r(t[1]),"media/midpoint":isNaN(t[2])?t[2]:r(t[2]),"media/thirdQuartile":isNaN(t[3])?t[3]:r(t[3]),"media/complete":isNaN(t[4])?t[4]:r(t[4])}:n<=i?(e=1!==n?n:"",n++,{"media/start":"videoStart"+e,"media/firstQuartile":"videoFirstQuartile"+e,"media/midpoint":"videoMidpoint"+e,"media/thirdQuartile":"videoThirdQuartile"+e,"media/complete":"videoComplete"+e}):{"media/start":r(),"media/firstQuartile":r(),"media/midpoint":r(),"media/thirdQuartile":r(),"media/complete":r()}:{"media/start":"videoStart"+(e=1!==t?t:""),"media/firstQuartile":"videoFirstQuartile"+e,"media/midpoint":"videoMidpoint"+e,"media/thirdQuartile":"videoThirdQuartile"+e,"media/complete":"videoComplete"+e}}function c(t,e,i){if(t[e])for(var n in i)t[e][n]?t[e][n]=[].concat(t[e][n],i[n]):t[e][n]=i[n];else t[e]=i}return p={alphalfa:{isMedia:!0},animaniac:{},gallery:{"click/clickPrev":a,"click/clickNext":a,"intent/swipeLeft":r,"intent/swipeRight":r},graphic:{},"minimal-video":{isMedia:!0},panel:{},reely:{isMedia:!0},rotator:{"intent/navigateRotator":r},rotatorbutton:{"click/click":a},"slider-rotator":{"click/clickPrev":a,"click/clickNext":a,"intent/swipeLeft":r,"intent/swipeRight":r}},m={click:{tracker:a,string:"click/click"},hoverIn:{tracker:r,string:"intent/hoverIn"},hoverOut:{tracker:r,string:"intent/hoverOut"}},{trackingConsumer:function(t){var e,i,n,o,s=t.eventType+"/"+(t.data&&t.data.eventSubType?t.data.eventSubType:""),r=d[t.unitName],a=[];if(r&&r[t.componentName])if(0<(a=r[t.componentName][s]?a.concat(r[t.componentName][s]):a).length){for(n=0;n<a.length;n++){for(i=0,o=l.length;i<o;i++)l[i](a[n],t,!1);u&&console.log("tracking "+a[n]+". "+t.componentName+" in "+t.unitName+" emitted "+s,t)}if(r&&r.global&&r.global[s]&&(e=r.global[s])){for(i=0,o=l.length;i<o;i++)l[i](e,t,!0);u&&console.log("tracking "+e+" as a global event. "+t.componentName+" in "+t.unitName+" emitted "+s,t)}}else u&&console.warn("tracking attempted, but couldn't find the event in the map. ",t);else u&&console.warn("attempt to track event on unmapped component: "+t.componentName+":"+t.eventType+"/"+t.data.eventSubType,t)},addToTrackingMap:function(t){var e,i,n,o,s={};if(t.trackingConfigs)for(e=0,i=t.trackingConfigs.length;e<i;e++)if((n=t.trackingConfigs[e]).componentName&&n.data&&n.data.trackingNumber&&n.trackingType)switch(n.trackingType){case"tab":c(s,n.componentName,{"click/click":a(n.data.trackingNumber)});break;case"video":c(s,n.componentName,f(n.data.trackingNumber));break;case"custom":c(s,n.componentName,{"click/click":r(n.data.trackingNumber)});break;default:c(s,n.componentName,{"click/click":n.trackingType})}else n.componentName&&n.trackingType&&c(s,n.componentName,{"click/click":n.trackingType});else for(s.global=f(1),e=0,i=(o=t.children).length;e<i;e++)!function t(e,i){var n,o,s,r,a=e.type,d={},l=!0,u=!0,c=p[a];if(u=(!e.video||!e.video.loop)&&u){if(e.actions)for(s in m)void 0!==e.actions[s]&&e.actions[s].length&&(d[m[s].string]=m[s].tracker(),l=!1);if(c)for(s in c)if("function"==typeof c[s])d[s]=c[s](),l=!1;else if("isMedia"===s&&!0===c[s]){var h=f();for(r in h)d[r]=h[r];l=!1}!1===l&&(e.description&&(d.label=e.description),i[e.name]=d)}if(e.children)for(n=0,o=e.children.length;n<o;n++)t(e.children[n],i)}(o[e],s);d[t.name]=s},getReadableTrackingMap:function(){var t,e,i,n="";for(t in d)for(e in d[t])for(i in d[t][e])"label"!==i&&(n+=t+": "+(d[t][e].label?'"'+d[t][e].label+'"':e)+" "+i+" = "+d[t][e][i]+"\n");return n},getTrackingMap:function(){return d},addConsumerCallback:function(t){"function"==typeof t&&l.push(t)},setDebug:function(t){u=!!t}}}},{}],113:[function(t,e,i){e.exports={getBridge:function(){return window.NativeWebBridge||(window.top.ad_utils&&window.top.ad_utils.mediaOrchestratorBridge?window.top.ad_utils.mediaOrchestratorBridge:void 0)}}},{}],114:[function(t,e,i){function r(t,e){return t.hasOwnProperty(e)&&"function"==typeof t[e]&&"function"==typeof t[e].apply}function a(t){var e;switch(!0){case"object"==typeof t&&t.hasOwnProperty("length"):e=t;break;case"object"==typeof t&&null===t:e=[t];break;default:e=[]}return e}e.exports=function(){var s=[];return{notifyObserver:function(t,e,i){t=s.indexOf(t),i=a(i);-1<t&&r(s[t],e)&&s[t][e].apply(s[t],i)},notify:function(t,e){for(var i=s.length,n=0,o=a(e);n<i;n++)r(s[n],t)&&s[n][t].apply(s[n],o)},subscribe:function(t){s.push(t)},unsubscribe:function(t){t=s.indexOf(t);-1<t&&s.splice(t,1)},clear:function(){s=[]}}}},{}],115:[function(t,e,i){e.exports={getQueryParam:function(t){return new URLSearchParams(window.location.search).get(t)||""}}},{}],116:[function(t,e,i){var n=t("./bridge").getBridge;e.exports={shouldObeyMediaInteroperability:function(){var t=window.top.Tarnhelm&&window.top.Tarnhelm.getDeviceInfo();return!(void 0===n()||!t)&&(!!t.isIMDbApp||window.top.ad_utils&&window.top.ad_utils.isResponsive())},isInWeblab:function(t){return null!==document.getElementById(t)},autoplayId:"TARNHELM_528955"}},{"./bridge":113}],117:[function(t,e,i){var n=(()=>{var t,e="-webkit",i="-moz",n="-ms",s={"box-shadow":[e],transform:[e,n,i,"-o"],perspective:[e,n],"box-sizing":[e,n,i],"background-size":[e],"user-select":[e,i,n],animation:[e,i,"-o"],transition:[e,i,"-o"],filter:[e,i,n,"-o"]},o=[];for(t in s)s.hasOwnProperty(t)&&o.push(t);return{needsFixer:function(t){return-1!==o.indexOf(t)},prefixedProps:function(t){var e=[t];if(this.needsFixer(t))for(var i,n=s[t],o=0;o<n.length;o++)i=n[o]+"-"+t,e.push(i);return e}}})();e.exports=n},{}],118:[function(t,e,i){function o(t,e,i){this.index=t,this.selector=e,this.styleText=i}function n(t){this.doc=this._determineDocument(t),this.styleElId=this._determineStyleElId(t),this.styleEl=this._createStyleEl(this.styleElId),this.prefixId=this._determinePrefixId(t),this.doc.head.appendChild(this.styleEl),this.ss=this.styleEl.sheet,this.isFrozen=!1,this._useInsertRule="insertRule"in this.ss,this._rulesKey=this._determineRulesKey(),this._animPrefix=this._determineAnimationPrefix(),this.NULLSELECTOR=".NULLRULE"+this.styleElId}var s=t("./zoofixer.js");e.exports=(n.prototype={rules:function(){return this.ss[this._rulesKey]},teardown:function(){this.doc=null,this.ss=null,this.styleEl=null},freeze:function(){this.isFrozen=!0},unfreeze:function(){this.isFrozen=!1},insertRule:function(t,e){if(!this.isFrozen){if(t&&e)return t=this._determineSelectors(t),e=this._determineStylesText(e),this._insertRule(t,e);console.warn("Bad selectors and/or stylesObj provided to Zoolander.")}},insertRules:function(t){if(!this.isFrozen){for(var e=[],i=0;i<t.length;i++){var n=t[i],o=n[0],o=this.insertRule(o,n[1]);e.push(o)}return e}},deleteRule:function(t){void 0===t||this.isFrozen||(this.ss.deleteRule(t.index),this._attemptInsert(this.NULLSELECTOR,"",t.index))},insertKeyframes:function(t,e){t="@"+this._animPrefix+"keyframes "+t,e=this._determineKeyframesStyleText(e);return this._insertRule(t,e,!0)},insertAnimation:function(t,e,i){t=this._determineSelectors(t),e=this._animPrefix+e+": "+i;return this._insertRule(t,e)},_insertRule:function(e,i,t){var n=this.rules().length;try{this._attemptInsert(e,i,n,t)}catch(t){return void console.warn("Zoolander failed to insertRule :: "+t,e,"{",i,"}")}return new o(n,e,i)},_attemptInsert:function(t,e,i,n){this._useInsertRule?this.ss.insertRule(t+" {"+e+"}",i):this.ss.addRule(t,e,i)},_createStyleEl:function(t){var t="imdb_ad_design_injected_"+t,e=this.doc.getElementById(t);return e||((e=this.doc.createElement("style")).type="text/css",e.id=t,e.appendChild(this.doc.createTextNode(""))),e},_determineStyleElId:function(t){return t&&t.id?t.id:Date.now()+Math.floor(10*Math.random())},_determineDocument:function(t){return t&&t.document?t.document:document},_determinePrefixId:function(t){var t=t&&t.prefixId?t.prefixId:"";return t?" "===(t="#"===t.charAt(0)?t:"#"+t).charAt(t.length-1)?t:t+" ":""},_isArr:function(t){return"[object Array]"===Object.prototype.toString.call(t)},_determineSelectors:function(t){var e,i,n=this.prefixId;return"string"==typeof t&&-1!==t.indexOf(",")?e=t.split(","):this._isArr(t)?e=t:i=t,e?this._concatSelectors(e,n):n+" "+i},_concatSelectors:function(t,e){for(var i="",n=0;n<t.length;n++)i+=e+" "+t[n],n!==t.length-1&&(i+=", ");return i},_determineAnimationPrefix:function(){for(var t=["webkit","Moz","ms"],e=this.doc.createElement("div"),i="",n=0;n<t.length;n++)if(void 0!==e.style[t[n]+"AnimationName"]){i="-"+t[n].toLowerCase()+"-";break}return i},_determineStylesText:function(t){var e,i="";for(e in t)t.hasOwnProperty(e)&&(i+=this._buildStyleDeclaration(e,t[e]));return i},_buildStyleDeclaration:function(t,e){if(s.needsFixer(t)){for(var i="",n=s.prefixedProps(t),o=0;o<n.length;o++)i+=n[o]+": "+e+"; ";return i}return t+": "+e+"; "},_determineKeyframesStyleText:function(t){var e,i,n="";for(e in t)t.hasOwnProperty(e)&&(i=this._determineStylesText(t[e]),n+=this._buildKeyframeStylesText(e,i));return n},_buildKeyframeStylesText:function(t,e){return t+" { "+e+" } "},_determineRulesKey:function(){return"cssRules"in this.ss?"cssRules":"rules"}}).constructor=n},{"./zoofixer.js":117}],119:[function(t,i,n){!function(I){!function(){var t,e;t=this,e=function(){var n="undefined"!=typeof Map?Map:(Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){t=o(this.__entries__,t),t=this.__entries__[t];return t&&t[1]},t.prototype.set=function(t,e){var i=o(this.__entries__,t);~i?this.__entries__[i][1]=e:this.__entries__.push([t,e])},t.prototype.delete=function(t){var e=this.__entries__,t=o(e,t);~t&&e.splice(t,1)},t.prototype.has=function(t){return!!~o(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var i=0,n=this.__entries__;i<n.length;i++){var o=n[i];t.call(e,o[1],o[0])}},t);function t(){this.__entries__=[]}function o(t,i){var n=-1;return t.some(function(t,e){return t[0]===i&&(n=e,!0)}),n}var i="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,e=void 0!==I&&I.Math===Math?I:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),d="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(e):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)},l=2;var s=["top","right","bottom","left","width","height","size","weight"],r="undefined"!=typeof MutationObserver,a=(u.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},u.prototype.removeObserver=function(t){var e=this.observers_,t=e.indexOf(t);~t&&e.splice(t,1),!e.length&&this.connected_&&this.disconnect_()},u.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},u.prototype.updateObservers_=function(){var t=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return t.forEach(function(t){return t.broadcastActive()}),0<t.length},u.prototype.connect_=function(){i&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),r?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},u.prototype.disconnect_=function(){i&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},u.prototype.onTransitionEnd_=function(t){var t=t.propertyName,e=void 0===t?"":t;s.some(function(t){return!!~e.indexOf(t)})&&this.refresh()},u.getInstance=function(){return this.instance_||(this.instance_=new u),this.instance_},u.instance_=null,u);function u(){function t(){s&&(s=!1,n()),r&&i()}function e(){d(t)}function i(){var t=Date.now();if(s){if(t-a<l)return;r=!0}else r=!(s=!0),setTimeout(e,o);a=t}var n,o,s,r,a;this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=(n=this.refresh.bind(this),r=s=!(o=20),a=0,i)}var c=function(t,e){for(var i=0,n=Object.keys(e);i<n.length;i++){var o=n[i];Object.defineProperty(t,o,{value:e[o],enumerable:!1,writable:!1,configurable:!0})}return t},h=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||e},p=y(0,0,0,0);function m(t){return parseFloat(t)||0}function f(i){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return t.reduce(function(t,e){return t+m(i["border-"+e+"-width"])},0)}function g(t){var e,i,n,o,s,r,a=t.clientWidth,d=t.clientHeight;return a||d?(i=(e=(t=>{for(var e={},i=0,n=["top","right","bottom","left"];i<n.length;i++){var o=n[i],s=t["padding-"+o];e[o]=m(s)}return e})(r=h(t).getComputedStyle(t))).left+e.right,n=e.top+e.bottom,o=m(r.width),s=m(r.height),"border-box"===r.boxSizing&&(Math.round(o+i)!==a&&(o-=f(r,"left","right")+i),Math.round(s+n)!==d)&&(s-=f(r,"top","bottom")+n),t!==h(t).document.documentElement&&(r=Math.round(o+i)-a,t=Math.round(s+n)-d,1!==Math.abs(r)&&(o-=r),1!==Math.abs(t))&&(s-=t),y(e.left,e.top,o,s)):p}var v="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof h(t).SVGGraphicsElement}:function(t){return t instanceof h(t).SVGElement&&"function"==typeof t.getBBox};function _(t){var e;return i?v(t)?y(0,0,(e=(e=t).getBBox()).width,e.height):g(t):p}function y(t,e,i,n){return{x:t,y:e,width:i,height:n}}w.prototype.isActive=function(){var t=_(this.target);return(this.contentRect_=t).width!==this.broadcastWidth||t.height!==this.broadcastHeight},w.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t};var b=w;function w(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=y(0,0,0,0),this.target=t}var A=function(t,e){i=(e=e).x,n=e.y,s=e.width,e=e.height,o="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,o=Object.create(o.prototype),c(o,{x:i,y:n,width:s,height:e,top:n,right:i+s,bottom:e+n,left:i});var i,n,o,s=o;c(this,{target:t,contentRect:s})},E=(T.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof h(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new b(t)),this.controller_.addObserver(this),this.controller_.refresh())}},T.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof h(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},T.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},T.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},T.prototype.broadcastActive=function(){var t,e;this.hasActive()&&(t=this.callbackCtx_,e=this.activeObservations_.map(function(t){return new A(t.target,t.broadcastRect())}),this.callback_.call(t,e,t),this.clearActive())},T.prototype.clearActive=function(){this.activeObservations_.splice(0)},T.prototype.hasActive=function(){return 0<this.activeObservations_.length},T);function T(t,e,i){if(this.activeObservations_=[],this.observations_=new n,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=i}var S=new("undefined"!=typeof WeakMap?WeakMap:n),C=function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var i=a.getInstance(),e=new E(e,i,this);S.set(this,e)};return["observe","unobserve","disconnect"].forEach(function(e){C.prototype[e]=function(){var t;return(t=S.get(this))[e].apply(t,arguments)}}),void 0!==e.ResizeObserver?e.ResizeObserver:C},"object"==typeof n&&void 0!==i?i.exports=e():"function"==typeof define&&define.amd?define(e):t.ResizeObserver=e()}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],120:[function(b,B,j){var i,t,e,n,o,s,r,a,w="undefined"!=typeof window?window:void 0,F=void 0,A={version:"v2.2.4",settings:{}},U=0,E="riot-",T=E+"tag",S="string",C="object",I="undefined",V="function",H=/^(?:opt(ion|group)|tbody|col|t[rhd])$/,W=["_item","_id","update","root","mount","unmount","mixin","isMounted","isLoop","tags","parent","opts","trigger","on","off","one"],G=0|(w&&w.document||{}).documentMode,N=Array.isArray;function z(){return o.href.split("#")[1]||""}function d(t){return t.split("/")}function l(t){(t=t.type?z():t)!=a&&(s.trigger.apply(null,["H"].concat(d(t))),a=t)}A.observable=function(s){var r={},e=0;return(s=s||{}).on=function(t,i){return R(i)&&(typeof i.id===I&&(i._id=e++),t.replace(/\S+/g,function(t,e){(r[t]=r[t]||[]).push(i),i.typed=0<e})),s},s.off=function(t,o){return"*"==t?r={}:t.replace(/\S+/g,function(t){if(o)for(var e,i=r[t],n=0;e=i&&i[n];++n)e._id==o._id&&i.splice(n--,1);else r[t]=[]}),s},s.one=function(e,i){return s.on(e,function t(){s.off(e,t),i.apply(s,arguments)})},s.trigger=function(t){for(var e,i=[].slice.call(arguments,1),n=r[t]||[],o=0;e=n[o];++o)e.busy||(e.busy=1,e.apply(s,e.typed?[t].concat(i):i),n[o]!==e&&o--,e.busy=0);return r.all&&"all"!=t&&s.trigger.apply(s,["all",t].concat(i)),s},s},A.mixin=(i={},function(t,e){if(!e)return i[t];i[t]=e}),t=A,e="hashchange",(n=w)&&(o=n.location,s=t.observable(),r=!1,(t=t.route=function(t){t[0]?l(o.hash=t):s.on("H",t)}).exec=function(t){t.apply(null,d(z()))},t.parser=function(t){d=t},t.stop=function(){r&&(n.removeEventListener?n.removeEventListener(e,l,!1):n.detachEvent("on"+e,l),s.off("*"),r=!1)},t.start=function(){r||(n.addEventListener?n.addEventListener(e,l,!1):n.attachEvent("on"+e,l),r=!0)},t.start()),X=/[{}]/g;var q,Y,u,X,c,K,$,O=function(t){var e=A.settings.brackets||"{ }";return q!==e&&(u=(q=e).split(" "),Y=u.map(function(t){return t.replace(/(?=.)/g,"\\")})),t instanceof RegExp?"{ }"===e?t:new RegExp(t.source.replace(X,function(t){return Y[~~("}"===t)]}),t.global?"g":""):u[t]},D=(c={},K='"in d?d:'+(w?"window).":"global)."),$=/(['"\/])(?:[^\\]*?|\\.|.)*?\1|\.\w*|\w*:|\b(?:(?:new|typeof|in|instanceof) |(?:this|true|false|null|undefined)\b|function\s*\()|([A-Za-z_$]\w*)/g,function(t,e){return t&&(c[t]||(c[t]=((t,e)=>t.indexOf(O(0))<0?(t=t.replace(/\n|\r\n?/g,"\n"),function(){return t}):(t=t.replace(O(/\\{/g),"￰").replace(O(/\\}/g),"￱"),e=((i,t)=>{var n=[];return t.map(function(t,e){e=i.indexOf(t),n.push(i.slice(0,e),t),i=i.slice(e+t.length)}),i&&n.push(i),n})(t,Z(t,O(/{/),O(/}/))),t=2!==e.length||e[0]?"["+e.map(function(t,e){return e%2?Q(t,!0):'"'+t.replace(/\n|\r\n?/g,"\\n").replace(/"/g,'\\"')+'"'}).join(",")+'].join("")':Q(e[1]),new Function("d","return "+t.replace(/\uFFF0/g,O(0)).replace(/\uFFF1/g,O(1))+";")))(t)))(e)});function Q(t,e){return t=t.replace(/\n|\r\n?/g," ").replace(O(/^[{ ]+|[ }]+$|\/\*.+?\*\//g),""),/^\s*[\w- "']+ *:/.test(t)?"["+Z(t,/["' ]*[\w- ]+["' ]*:/,/,(?=["' ]*[\w- ]+["' ]*:)|}|$/).map(function(t){return t.replace(/^[ "']*(.+?)[ "']*: *(.+?),? *$/,function(t,e,i){return i.replace(/[^&|=!><]+/g,J)+'?"'+e+'":"",'})}).join("")+'].join(" ").trim()':J(t,e)}function J(t,e){return(t=t.trim())?"(function(v){try{v="+t.replace($,function(t,e,i){return i?'(("'+i+K+i+")":t})+"}catch(e){}return "+(!0===e?'!v&&v!==0?"":v':"v")+"}).call(d)":""}function Z(o,t,e){var s,r=0,a=[],t=new RegExp("("+t.source+")|("+e.source+")","g");return o.replace(t,function(t,e,i,n){!r&&e&&(s=n),(r+=e?1:-1)||null==i||a.push(o.slice(s,n+i.length))}),a}et={tr:"tbody",th:"tr",td:"tr",tbody:"table",col:"colgroup"},h="div",tt=G&&G<10;var tt,et,h,it=function(t){var e,i,n,o=t&&t.match(/^\s*<([-\w]+)/),s=o&&o[1].toLowerCase(),r=p(et[s]||h);return r.stub=!0,tt&&s&&(o=s.match(H))?(e=r,i=t,s=s,o=!!o[1],n=p(h),o=o?"select>":"table>",n.innerHTML="<"+o+i+"</"+o,(i=n.getElementsByTagName(s)[0])&&e.appendChild(i)):r.innerHTML=t,r};function nt(t,e,i){var n={};return n[t.key]=e,t.pos&&(n[t.pos]=i),n}function ot(s,r,a){L(s,"each");var d,t,e,l=dt(s),i=s.outerHTML,u=!!y[l],c=y[l]||{tmpl:i},h=s.parentNode,p=document.createComment("riot placeholder"),m=[],f=v(s);h.insertBefore(p,s),i=a,t=O(0),e=i.trim().slice(t.length).match(/^\s*(\S+?)\s*(?:,\s*(\S+))?\s+in\s+(.+)$/),a=e?{key:e[1],pos:e[2],val:t+e[3]}:{val:i},r.one("premount",function(){h.stub&&(h=r.root),s.parentNode.removeChild(s)}).on("update",function(){for(var e=D(a.val,r),t=(N(e)||(d=e?JSON.stringify(e):"",e=e?Object.keys(e).map(function(t){return nt(a,t,e[t])}):[]),document.createDocumentFragment()),i=m.length,n=e.length;n<i;)m[--i].unmount(),m.splice(i,1);for(i=0;i<n;++i){var o=!d&&a.key?nt(a,e[i],i):e[i];m[i]?m[i].update(o):((m[i]=new g(c,{parent:r,isLoop:!0,hasImpl:u,root:H.test(l)?h:s.cloneNode(),item:o},s.innerHTML)).mount(),t.appendChild(m[i].root)),m[i]._item=o}h.insertBefore(t,p),f&&(r.tags[l]=m)}).one("updated",function(){var e=Object.keys(r);k(h,function(t){1!=t.nodeType||t.isLoop||t._looped||(t._visited=!1,t._looped=!0,ct(t,r,e))})})}function st(t,i,n){k(t,function(t){var e;1==t.nodeType&&(t.isLoop=t.isLoop||t.parentNode&&t.parentNode.isLoop||t.getAttribute("each")?1:0,(e=v(t))&&!t.isLoop&&n.push(((t,e,i)=>{var n,t=new g(t,{root:e,parent:i},e.innerHTML),o=dt(e),i=M(i);return t.parent=i,(n=i.tags[o])?(N(n)||(i.tags[o]=[n]),~i.tags[o].indexOf(t)||i.tags[o].push(t)):i.tags[o]=t,e.innerHTML="",t})(e,t,i)),t.isLoop||ct(t,i,[]))})}function rt(t,e,n){function o(t,e,i){0<=e.indexOf(O(0))&&n.push(P({dom:t,expr:e},i))}k(t,function(n){var t=n.nodeType;if(3==t&&"STYLE"!=n.parentNode.tagName&&o(n,n.nodeValue),1==t)return(t=n.getAttribute("each"))?(ot(n,e,t),!1):(x(n.attributes,function(t){var e=t.name,i=e.split("__")[1];if(o(n,t.value,{attr:i||e,bool:i}),i)return L(n,e),!1}),!v(n)&&void 0)})}function g(o,t,e){var i,s=A.observable(this),r=(i=t.opts,_.prototype=i,new _||{}),a=it(o.tmpl),d=t.parent,l=t.isLoop,u=t.hasImpl,c=lt(t.item),h=[],n=[],p=t.root,m=o.fn,f=p.tagName.toLowerCase(),g={},v=[];function _(){}function y(){var e=(!u||!l)&&d||s;x(p.attributes,function(t){r[t.name]=D(t.value,e)}),x(Object.keys(g),function(t){r[t]=D(g[t],e)})}function b(e){var t;x(n,function(t){t[e?"mount":"unmount"]()}),d&&(t=e?"on":"off",(l?d:d[t]("update",s.update))[t]("unmount",s.unmount))}m&&p._tag&&p._tag.unmount(!0),this.isMounted=!1,p.isLoop=l,(p._tag=this)._id=U++,P(this,{parent:d,root:p,opts:r,tags:{}},c),x(p.attributes,function(t){var e=t.value;O(/{.*}/).test(e)&&(g[t.name]=e)}),a.innerHTML&&!/^(select|optgroup|table|tbody|tr|col(?:group)?)$/.test(f)&&(a.innerHTML=a.innerHTML.replace(/<(yield)\/?>(<\/\1>)?/gi,e||"")),this.update=function(t){if(t=lt(t),s.parent&&l&&x(Object.keys(s.parent),function(t){var e=!~W.indexOf(t)&&~v.indexOf(t);typeof s[t]!==I&&!e||(e||v.push(t),s[t]=s.parent[t])}),t&&typeof c===C){var e,i=t;for(e in c)typeof s[e]!==I&&(s[e]=i[e]);c=t}var u;P(s,t),y(),s.trigger("update",t),u=s,x(h,function(t,e){var i,n,o,s,r=t.dom,a=t.attr,d=D(t.expr,u),l=t.dom.parentNode;t.bool?d=!!d&&a:null==d&&(d=""),l&&"TEXTAREA"==l.tagName&&(d=(""+d).replace(/riot-/g,"")),t.value!==d&&(t.value=d,a?(L(r,a),R(d)?(n=d,s=u,(o=r)[a]=function(t){var e=s._item,i=s.parent;if(!e)for(;i&&!e;)e=i._item,i=i.parent;t=t||w.event;try{t.currentTarget=o,t.target||(t.target=t.srcElement),t.which||(t.which=t.charCode||t.keyCode)}catch(t){}t.item=e,!0===n.call(s,t)||/radio|check/.test(o.type)||(t.preventDefault&&t.preventDefault(),t.returnValue=!1),t.preventUpdate||(e?M(i):s).update()}):"if"==a?(i=t.stub,l=function(){at(r.parentNode,r,i)},d?i&&(at(i.parentNode,i,r),r.inStub=!1,ut(r)||k(r,function(t){t._tag&&!t._tag.isMounted&&(t._tag.isMounted=!!t._tag.trigger("mount"))})):(i=t.stub=i||document.createTextNode(""),r.parentNode?l():(u.parent||u).one("updated",l),r.inStub=!0)):/^(show|hide)$/.test(a)?r.style.display=(d="hide"==a?!d:d)?"":"none":"value"==a?r.value=d:(l=E,a.slice(0,l.length)===l&&a!=T?d&&r.setAttribute(a.slice(E.length),d):t.bool&&!(r[a]=d)||typeof d!==C&&r.setAttribute(a,d))):r.nodeValue=""+d)}),s.trigger("updated")},this.mixin=function(){x(arguments,function(e){e=typeof e===S?A.mixin(e):e,x(Object.keys(e),function(t){"init"!=t&&(s[t]=R(e[t])?e[t].bind(s):e[t])}),e.init&&e.init.bind(s)()})},this.mount=function(){if(y(),m&&m.call(s,r),rt(a,s,h),b(!0),o.attrs||u){for(var t,e=o.attrs,i=function(t,e){p.setAttribute(t,e)},n=/([-\w]+) ?= ?(?:"([^"]*)|'([^']*)|({[^}]*}))/g;t=n.exec(e);)i(t[1].toLowerCase(),t[2]||t[3]||t[4]);rt(s.root,s,h)}if(s.parent&&!l||s.update(c),s.trigger("premount"),l&&!u)s.root=p=a.firstChild;else{for(;a.firstChild;)p.appendChild(a.firstChild);p.stub&&(s.root=p=d.root)}!s.parent||s.parent.isMounted?(s.isMounted=!0,s.trigger("mount")):s.parent.one("mount",function(){ut(s.root)||(s.parent.isMounted=s.isMounted=!0,s.trigger("mount"))})},this.unmount=function(t){var i,e=p,n=e.parentNode;if(n){if(d)i=M(d),N(i.tags[f])?x(i.tags[f],function(t,e){t._id==s._id&&i.tags[f].splice(e,1)}):i.tags[f]=F;else for(;e.firstChild;)e.removeChild(e.firstChild);t?n.removeAttribute("riot-tag"):n.removeChild(e)}s.trigger("unmount"),b(),s.off("*"),p._tag=null},st(a,this,n)}function at(t,e,i){t&&(t.insertBefore(i,e),t.removeChild(e))}function x(t,e){for(var i,n=0,o=(t||[]).length;n<o;n++)null!=(i=t[n])&&!1===e(i,n)&&n--;return t}function R(t){return typeof t===V}function L(t,e){t.removeAttribute(e)}function v(t){return t.tagName&&y[t.getAttribute(T)||t.tagName.toLowerCase()]}function M(t){for(var e=t;!v(e.root)&&e.parent;)e=e.parent;return e}function dt(t){var e=v(t),i=t.getAttribute("name");return i&&i.indexOf(O(0))<0?i:e?e.name:t.tagName.toLowerCase()}function P(t){for(var e,i=arguments,n=1;n<i.length;++n)if(e=i[n])for(var o in e)t[o]=e[o];return t}function lt(t){if(!(t instanceof g||t&&typeof t.trigger==V))return t;var e,i={};for(e in t)~W.indexOf(e)||(i[e]=t[e]);return i}function k(t,e){if(t&&!1!==e(t))for(t=t.firstChild;t;)k(t,e),t=t.nextSibling}function ut(t){for(;t;){if(t.inStub)return 1;t=t.parentNode}}function p(t){return document.createElement(t)}function m(t,e){return(e||document).querySelectorAll(t)}function ct(t,e,i){var n;t._visited||(n=t.getAttribute("id")||t.getAttribute("name"))&&(i.indexOf(n)<0&&((i=e[n])?N(i)?i.push(t):e[n]=[i,t]:e[n]=t),t._visited=!0)}var f,_=[],y={};function ht(t){var e;A.render||(f||(f=p("style")).setAttribute("type","text/css"),e=document.head||document.getElementsByTagName("head")[0],f.styleSheet?f.styleSheet.cssText+=t:f.innerHTML+=t,f._rendered||(f.styleSheet?document.body.appendChild(f):(t=document.querySelector("style[type=riot]"))?(t.parentNode.insertBefore(f,t),t.parentNode.removeChild(t)):e.appendChild(f)),f._rendered=!0)}A.tag=function(t,e,i,n,o){return R(n)&&(o=n,/^[\w\-]+\s?=/.test(i)?(n=i,i=""):n=""),i&&(R(i)?o=i:ht(i)),y[t]={name:t,tmpl:e,attrs:n,fn:o},t},A.mount=function(t,i,n){var e,o,s=[];function r(t){var e="";return x(t,function(t){e+=", *["+T+'="'+t.trim()+'"]'}),e}function a(){var t=Object.keys(y);return t+r(t)}function d(t){var e;t.tagName?(!i||(e=t.getAttribute(T))&&e==i||t.setAttribute(T,i),(e=((t,e,i)=>{var n=y[e],e=t._innerHTML=t._innerHTML||t.innerHTML;if(t.innerHTML="",(n=n&&t?new g(n,{root:t,opts:i},e):n)&&n.mount)return n.mount(),_.push(n),n.on("unmount",function(){_.splice(_.indexOf(n),1)})})(t,i||t.getAttribute(T)||t.tagName.toLowerCase(),n))&&s.push(e)):t.length&&x(t,d)}return typeof i===C&&(n=i,i=0),t=typeof t===S?("*"===t?t=e=a():t+=r(t.split(",")),m(t)):t,"*"===i&&(i=e||a(),t=t.tagName?m(i,t):(o=[],x(t,function(t){o.push(m(i,t))}),o),i=0),t.tagName?d(t):x(t,d),s},A.update=function(){return x(_,function(t){t.update()})},A.mountTo=A.mount,A.util={brackets:O,tmpl:D},typeof j===C?B.exports=A:"function"==typeof define&&define.amd?define(function(){return w.riot=A}):w.riot=A},{}],121:[function(t,e,i){Object.defineProperty(i,"__esModule",{value:!0}),i.collapseAd=function(t){s(t,"none")},i.collapseElement=function(t,e){o(t,e,"none")},i.uncollapseAd=function(t){s(t,"block")},i.uncollapseElement=function(t,e){o(t,e,"block")};let n=["_wrapper","_before","_after","_sponsored"];function o(t,e,i){t=t.document.getElementById(e);t&&(t.style.display=i)}function s(t,e){var i=t.id||t.parentElement.id;t.style.display=e;for(let t=0;t<n.length;t++)o(window,i+n[t],e)}},{}],122:[function(t,e,i){var n=t("./ads-csa"),o=window.uet,s=window.uex;function r(t){consoleLog(t,"ads-amazon-csm")}var a,d,l=["top_ad","injected_billboard","injected_navstrip","top_rhs","middle_rhs","btf_rhs2","rhs_cornerstone","bottom_ad","inline20","inline40","inline50","inline60","inline80","inlinebottom","interstitial","ss_online_video","adhesion_bottom"],u="top_ad top_rhs injected_navstrip injected_billboard navboard".split(" "),c=window.top.ad_utils.slot_events,h={},p={},m={},f={},g=window.ue_t0;if("function"!=typeof o||"function"!=typeof s)r("uet() / uex() not available, will not record CSM metrics");else{for(d=0;d<l.length;d++)(i=>{c.listen(i,"iframe",function(){h[i]=(new Date).getTime(),o("bb",i,{wb:1}),r(`CSM uet() recording "bb" for "${i}" -- Timestamp: `+Date.now()),(0,n.logCSAWidgetEvent)(i,n.CSA_MARKERS.WIDGET_BEGIN),(0,n.logCSAWidgetEvent)(i,n.CSA_MARKERS.CLICK_TO_BODY_BEGIN)}),c.listen(i,"request",function(){p[i]=(new Date).getTime(),o("be",i,{wb:1}),r(`CSM uet() recording "be" for "${i}" -- Timestamp: `+Date.now()),(0,n.logCSAWidgetEvent)(i,n.CSA_MARKERS.WIDGET_END),(0,n.logCSAWidgetEvent)(i,n.CSA_MARKERS.CLICK_TO_BODY_END)}),c.listen(i,"tagdeliver",function(){m[i]=(new Date).getTime(),o("af",i,{wb:1})}),c.listen(i,"reflow",function(t){var e=(new Date).getTime();0===t.data.duration&&g&&(e=g+10),o("cf",i,{wb:1},f[i]=e)}),c.listen(i,"load",function(){var t,e;generic.monitoring&&(t=generic.monitoring.get_remnant_partner(i),e=i+"."+t,"none"!==t&&(o("bb",e,{wb:1},h[i]),o("be",e,{wb:1},p[i]),o("af",e,{wb:1},m[i]),o("cf",e,{wb:1},f[i]),s("ld",e,{wb:1})),s("ld",i,{wb:1}),r(`CSM uex() recording "ld" for "${i}" -- Timestamp: `+Date.now()),(0,n.logCSAWidgetEvent)(i,n.CSA_MARKERS.LOADED),(0,n.logCSAWidgetEvent)(i,n.CSA_MARKERS.CLICK_TO_LOADED))})})(l[d]);window.top.ad_utils.ads_header.on_done(function(){function t(t){var e,i=0;for(e in t)i=Math.max(i,t[e]);return i}var e=[];for(d=0;d<u.length;d++)(a=u[d])in window.top.ad_utils.slots_on_page&&e.push(a);r("determined core_slots: "+e.join(",")),c.listen_all(e,"iframe",function(){o("bb","core_ads",{wb:1},t(h))}),c.listen_all(e,"request",function(){o("be","core_ads",{wb:1},t(p))}),c.listen_all(e,"tagdeliver",function(){o("af","core_ads",{wb:1},t(m))}),c.listen_all(e,"reflow",function(){o("cf","core_ads",{wb:1},t(f))}),c.listen_all(e,"load",function(){s("ld","core_ads",{wb:1})})})}},{"./ads-csa":125}],123:[function(t,e,i){function n(t){try{t()}catch(t){consoleError(t.message,"imdbads.cmd")}}window.imdbads=window.imdbads||{},imdbads.cmd=imdbads.cmd||[],window.top.ad_utils.ads_header.on_done(function(){for(var t=0,e=imdbads.cmd||[],t=0;t<e.length;t++)n(e[t]);imdbads.cmd={push:function(t){n(t)}}})},{}],124:[function(t,e,i){Object.defineProperty(i,"__esModule",{value:!0}),i.adsBtrUtils=void 0;i.adsBtrUtils={MRC_BTR_CLASS:"mrc-btr-creative",BTR_CLIENT:"btr_client",COD_CLIENT:"cod_client",completedSlots:[],LOI_IMPRESSION_ID_SEPARATOR:"/e/loi/imp?b=",MSDK_IMPRESSION_ID_SEPARATOR:"/e/msdk/imp?b=",OPENRTB_IMPRESSION_ID_SEPARATOR:"/e/is/",AAX_BTR_MACRO:"${AAX_PAYLOAD}",AAX_BTR_MACRO_REPLACEMENT:"%7B%22measurementMethod%22:%22btr_client%22%7D",isImageLoaded(t){return t&&t.complete&&0<t.naturalHeight&&0<t.naturalWidth},isVideoLoaded(t){return t&&0<t.currentTime},isElementLoaded(t){let e;return t&&"IMG"===t.tagName?e=this.isImageLoaded(t):t&&"VIDEO"===t.tagName?e=this.isVideoLoaded(t):!t||"P"!==t.tagName&&"SPAN"!==t.tagName&&"DIV"!==t.tagName||(e=!0),e},evaluateCreativeBtrCriteria(t){if(t){t=t.getElementsByClassName(this.MRC_BTR_CLASS);if(0<t.length)return this.checkTaggedElementsLoaded(t)}return!1},checkTaggedElementsLoaded(e){var i=[];let n=0,o=0;for(let t=0;t<e.length;t++){var s=e[t];i.push(s),this.isElementLoaded(s)?o++:n++}return 0<o&&0===n},replaceAaxMacroWithBtrInfo(t){return t&&0!==t.length?t.replace(this.AAX_BTR_MACRO,this.AAX_BTR_MACRO_REPLACEMENT):""},markElementBtr(t){t&&t.classList&&t.classList.add(this.MRC_BTR_CLASS)},markSlotFired(t){this.completedSlots.push(t)},createBtrPixel(t,e,i){var n;t&&0<t.length&&((n=document.createElement("img")).setAttribute("border","0"),n.setAttribute("height","1"),n.setAttribute("width","1"),n.setAttribute("alt",""),n.setAttribute("class","impression-tracker"),n.setAttribute("src",t),e.appendChild(n),this.markSlotFired(i))},isAaxImpression(t){return/http(s)+:\/\/aax[a-zA-Z\-]*\.amazon[a-zA-Z\-]*\.com/.test(t)}}},{}],125:[function(t,e,i){Object.defineProperty(i,"__esModule",{value:!0}),i.logCSAWidgetEvent=i.CSA_MARKERS=void 0;let o={CONTENT:"Content",MARK:"mark",WIDGET:"widget"};i.CSA_MARKERS={CLICK_TO_BODY_BEGIN:"clickToBodyBegin",CLICK_TO_BODY_END:"clickToBodyEnd",CLICK_TO_LOADED:"clickToLoaded",LOADED:"loaded",WIDGET_BEGIN:"widget-begin",WIDGET_END:"widget-end"};let s=t=>{"function"==typeof window.consoleLog&&window.consoleLog(t,"ads-csa")},r={};i.logCSAWidgetEvent=(t,e)=>{n=t;var i,n=r[n]||(window&&window.csa?(r[n]=window.csa(o.CONTENT,{element:{slotId:n,type:o.WIDGET}}),r[n]):void s(`[getCsaLatencyPlugin] window.csa is not available for metrics for slot '${n}'`));n&&(i=Date.now(),n(o.MARK,e,i),s(`[logCSAWidgetEvent] CSA recording '${e}' for '${t}' -- Timestamp: `+i))}},{}],126:[function(t,e,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;i.default=new class{isFirefox(){return-1<navigator.userAgent.toLowerCase().indexOf("firefox")}frameDoc(t){t="string"==typeof t?document.getElementById(t):t;if(!t||"IFRAME"===t.tagName){if(!(0<t.src.length&&-1===t.src.indexOf("www.imdb.com")&&-1===t.src.indexOf("javascript:")))return t.contentWindow?t.contentWindow.document:t.contentDocument;window.generic.monitoring.record_event("iframe_not_sourceless_fdoc",!1)}}getSlotWrapper(t){return document.getElementById(t+"_wrapper")}getContextualFragment(t,e){return t&&e&&(t=t.createRange())?t.createContextualFragment(e):null}appendContentToIframeDoc(t,e){null!==t&&null!==(e=this.getContextualFragment(t,e))&&t.body.appendChild(e)}}},{}],127:[function(t,e,i){var s;(s=window.generic).install(s,{extended_split:function(t,e,i){for(var n,o=[],s=0;(!i||o.length<i-1)&&-1!==(n=t.indexOf(e,s));)o.push(t.substring(s,n)),s=n+e.length;return o.push(t.substring(s)),o},object_from_querystring:function(t){var e,i,n=t.split("&"),o={};if(""===t)return{};for(e=0;e<n.length;e++)o[(i=s.extended_split(n[e],"=",2))[0]]=1===i.length?null:decodeURIComponent(i[1]);return o},cookie:{set:function(t,e,i){var i=i?((n=new Date).setTime(n.getTime()+24*i*60*60*1e3),"; expires="+n.toGMTString()):"",n=document.location.host.split("."),o=n.pop(),n=n.pop();document.cookie=t+"="+escape(e)+i+"; path=/; domain="+n+"."+o},get:function(t){for(var e,i=document.cookie.split(";"),n=0;n<i.length;n++)if("string"==typeof i[n]&&(e=i[n].split("="))[0]&&e[1]&&e[0].replace(/\s/,"")===t)return unescape(e[1]);return null},erase:function(t){this.set(t,"",-1)}}})},{}],128:[function(t,e,i){var n,o,s;window.IMDbTimer&&window.IMDbTimer.events&&(n=csm,o=IMDbTimer.starttime,s=IMDbTimer.events,generic.send_csm_head_metrics=function(){n.record("csm_head_pre_title",s.csm_head_pre_title-o),n.record("csm_head_post_title",s.csm_head_post_title-o),n.record("csm_head_pre_css",s.csm_head_pre_css-o),n.record("csm_head_post_css",s.csm_head_post_css-o),n.record("csm_head_pre_icon",s.csm_head_pre_icon-o),n.record("csm_head_post_icon",s.csm_head_post_icon-o),n.record("csm_head_pre_ads",s.csm_head_pre_ads-o)})},{}],129:[function(t,e,i){var a,n,d,o,s,r,l,u,c,h,p,m,f,g,v,_,y,b,w,A,E,T,S,C,I,N,O=(b=t("./safeframe"))&&b.__esModule?b:{default:b},D=t("./slot-util");a=window,n=document,_=a.generic=a.generic||{},y={},b=a.IMDbTimer,w="IMDbTimer"in a?a.IMDbTimer.starttime:NaN,A=n.location.hash.match("debug=1"),E=A||!isNaN(w)&&Math.random()<.2,T=A||Math.random()<.25,S={load:1,trueload:1,reflow:1,request:1,tagdeliver:1,iframe:1},o={},s={},r={top_ad:1,top_rhs:1,injected_navstrip:1,injected_billboard:1,navboard:1,bottom_ad:2,middle_rhs:2,btf_rhs2:2,rhs_cornerstone:2,inline80:2},l={top_ad:1,top_rhs:1,bottom_ad:1},u={reflow:1,"ad-delivery":1,load:1},c={},_.on_document_ready(function(t){t(a).on("beforeunload",function(){var t,e;for(t in o)(e=o[t]).request&&e.load===d&&_.monitoring.record_event("ad_load_failure."+t);_.monitoring.send_metrics()})}),C={is_slot_monitored:function(t){return t in r||t in l},is_twilight_slot:function(t){return t in r},is_twilight_core_slot:function(t){return t in r&&1===r[t]},is_forester_slot:function(t){return t in l},is_forester_event:function(t,e){return this.is_forester_slot(t)&&e in u},set_metric_value:function(t,e,i){(o[t]=o[t]||{})[e]=i},get_metric_value:function(t,e){if(t in o)return o[t][e]},core_slots:function(){var t,e={};for(t in r)1===r[t]&&(e[t]=1);return e},record_slot_status:function(t){t=t.match(/^(.*)\.(got_ad|null|blank|fail)$/);t&&(c[t[1]]=t[2])},core_slots_have_an_ad:function(){var t,e=!1;for(t in C.core_slots()){if(!(t in c))return null;"got_ad"===c[t]&&(e=!0)}return e},set_partner:function(t,e){return s[t]=e,this},get_partner:function(t){return s[t]},set_remnant_partner:function(t,e){return C.set_partner(t,e)},get_remnant_partner:function(t){return C.get_partner(t)}},p={prepare_and_send_metric:function(t,e,i,n){f({slot:e,ad_network_name:"DART",aid:t.aid,cid:t.cid,slot_event:i,time:n})}},m={prepare_and_send_metric:function(t,e,i){var n,o=20,s=function(){(n=a.top.ad_utils.get_cornerstone_ad_object(t))?f({slot:t,ad_network_name:"PDA",aid:n.adId,cid:n.creativeId,slot_event:e,time:i}):--o&&setTimeout(s,100)};s()}},f=function(t){T&&C.is_forester_slot(t.slot)&&(t='{"s":"imdb","l":"'+a.top.ad_utils.get_mapped_amazon_slot_name(t.slot)+'","p":"'+h+'","n":"'+t.ad_network_name+'","a":"'+t.aid+'","c":"'+t.cid+'","m":"'+t.slot_event+'","v":"'+t.time+'"}',A&&consoleLog(t+" metrics sent","forester"),_.one_way_send("https://fls-na.amazon.com/1/display-ads-cx/1/OP/?LMET"+escape(t)))},I={send_forester_metric:function(t,e,i,n){p.prepare_and_send_metric(t,e,i,n),m.prepare_and_send_metric(e,i,n)},set_page_type:function(t){h=t}},a.csm=(g={},{measure:function(t,e){this.record(t,this.duration(),e)},record:function(e,t,i,n){var o,s=g[e];if(E&&!csm.metrics[e]&&_.monitoring.record_metric(e+(n||""),t,i),csm.metrics[e]=t,s){for(o=0;o<s.length;o++)try{s[o](t,e)}catch(t){consoleLog("error invoking callback for "+e,"csm")}delete g[e]}},duration:function(t){return(t||Number(new Date))-w},listen:function(t,e){t in csm.metrics?setTimeout(e,0):(g[t]=g[t]||[]).push(e)},metrics:{}}),_.monitoring={event_starts:{},event_stops:{},events_to_stop:0,event_duration:{},event_counters:[],all_events_started_flag:!1,twilight_info:"",twilight_client:(t=navigator.userAgent,(v=t.match(/MSIE (\d+)/))&&6<=v[1]?"ie"+v[1]:(v=t.match(/Mac OS.*Firefox\/(\d+)/))?"3"===v[1]?"firefox3-mac":"firefox-mac":(v=t.match(/Firefox\/(\d+)/))?"3"===v[1]?"firefox3":"firefox":-1!==t.indexOf("Chrome")?"chrome":-1!==t.indexOf("Safari")?"safari":-1!==t.indexOf("Opera")?"opera":"Other"),isTwilightActiveSample:E,page_type:"",start_timing:function(t){this.start_timing_at(t,(new Date).getTime())},start_timing_at:function(t,e){this.event_starts[t]=e,this.events_to_stop++},stop_timing:function(t,e,i){var n=(new Date).getTime(),o=t;this.event_starts[t]&&(this.event_stops[t]=n,e&&(o+="."+e),this.record_metric(o,n-this.event_starts[t]),delete this.event_starts[t],this.events_to_stop--,i||this.all_events_started_flag&&0===this.events_to_stop)&&this.send_metrics()},record_event:function(t,e){var i;if(this.event_counters.push(t),t in y)for(weblab in y[t])i=t+"__weblab_"+weblab,this.event_counters.push(i),consoleLog(i,"twilight");consoleLog(t,"twilight"),e&&this.send_metrics()},record_metric:function(t,e,i){var n,o;if(C.record_slot_status(t),this.event_duration[t]=e,consoleLog(t+","+e,"twilight"),t in y)for(n in y[t])this.event_duration[o=t+"__weblab_"+n]=e,consoleLog(o+","+e,"twilight");i&&this.send_metrics()},send_metrics:function(){},set_forester_info:function(t){I.set_page_type(t)},all_events_started:function(){this.all_events_started_flag=!0},set_partner:function(t,e){t=(0,D.getSlotName)(t);C.set_partner(t,e)},set_partner_by_slot:function(t,e){C.set_partner(t,e)},get_partner:function(t){return C.get_partner(t)||"none"},set_remnant_partner:function(t,e){_.monitoring.set_partner(t,e)},get_remnant_partner:function(t){return _.monitoring.get_partner(t)},set_remnant_partner_fallback:function(t,e){var i=C.get_partner(t);void 0===i?C.set_partner(t,e):C.set_partner(t,i+"_"+e)},update_slot_metrics:function(t,e,i){var n=a.top.ad_utils.get_slot_iframe(t),o=null,s="."+_.monitoring.get_partner(t);if(O.default.isSafeframeSlot(t,n)){if(!(e in S))return;o=O.default.getSfAdObject(t)}else o=n&&n.contentWindow&&n.contentWindow.document?n.contentWindow.document.ad:null;t&&C.is_slot_monitored(t)&&C.get_metric_value(t,e)===d&&(C.set_metric_value(t,e,d!==i?i:csm.duration()),n=C.get_metric_value(t,e),o&&C.is_forester_event(t,e)&&(I.send_forester_metric(o,t,e,n),"load"===e)&&I.send_forester_metric(o,t,"ad-delivery",C.get_metric_value(t,"load")-C.get_metric_value(t,"request")),C.is_twilight_slot(t))&&(csm.record("csm_"+t+"_"+e,n,0,s),"load"===e&&".none"!=s&&".1P"!=s&&csm.record("csm_"+t+"_deliver",n-C.get_metric_value(t,"tagdeliver"),0,s),C.is_twilight_core_slot(t))&&N.send(e)},update_sf_slot_metrics:function(t){var e=JSON.parse(t);e&&e.slot&&e.event&&("reflow"===e.event?O.default.fireSfReflowMetric(e.slot):"fireload"===e.event?a.top.ad_utils.get_slot_iframe(e.slot).onload=function(){O.default.onSfAdLoad(e.slot)}:_.monitoring.update_slot_metrics(e.slot,e.event))},get_metric_value:function(t,e){return C.get_metric_value(t,e)},enable_weblab_metrics:function(t,e,i){for(var n,o=0;o<i.length;o++)y[n=i[o]]=y[n]||{},y[n][t+"_"+e]=1}},_.on_document_ready(function(t){t(a).on("beforeunload",function(t){var e=String(n.location).split("#",2)[0];a.name="clicktoresponse:"+(new Date).getTime()+":"+e}),_.monitoring.isTwilightActiveSample&&(csm.measure("csm_ready"),t(a).on("load",function(){csm.measure("csm_load",!0)}),t("div.dfp_slot").each(function(){_.monitoring.record_event("dfp_slot")}),t=parseInt(t("#servertime").attr("time"),10),isNaN(t)||_.monitoring.record_metric("csm_server",t))}),"http:"===n.location.protocol&&(v=a.name.match(/^clicktoresponse:(\d+):(.*)$/))&&(n.referrer===v[2]&&b&&(v=b.starttime-v[1],b.clicktoresponse=v,_.monitoring.record_metric("click_to_response",v)),a.name=""),N=(()=>{function e(){if(!r)for(var t in r=!0,consoleLog("Finalized core ads on current page: "+o.join(",")),s)N.send(t)}var t,o=[],i=C.core_slots(),s={},r=!1;for(t in i)a.top.ad_utils.slot_events.listen(t,"iframe",function(t){o.push(t.slot),o.length===i.length&&e()});return _.on_document_ready(e),{send:function(t){var e,i,n=0;if(r){for(i=0;i<o.length;i++){if(e=C.get_metric_value(o[i],t),d===e)return;n=Math.max(n,e)}csm.record("csm_core_ads_"+t,n)}else s[t]=1}}})()},{"./safeframe":165,"./slot-util":170}],130:[function(t,e,i){var n=(t=t("./is-refresh-slot"))&&t.__esModule?t:{default:t};{t=window.top.ad_utils;let a=["mediaviewer_banner"],e=["inline20","inline40","inline50","inline60","inline80","inlinebottom","interstitial"];function d(t,e,i,n){e=new o(e,i,n||{});try{t(e)}catch(t){consoleError(t)}}function o(t,e,i){this.slot=t,this.event=e,this.data=i}var l={},u={};t.slot_events={listen:function(t,e,i){if(!(-1<a.indexOf(t))){for(var n,o,s=e.replace(/(^\s+|\s+$)/g,"").split(/\s+/),r=0;r<s.length;r++)(n=t+":"+(o=s[r]))in u?d(i,t,o,u[n]):(l[n]=l[n]||[]).push(i);return this}},listen_all:function(t,e,i){n=i,o=t.length;for(var n,o,s=function(){0==--o&&n.apply(this,arguments)},r=0;r<t.length;r++)this.listen(t[r],e,s)},trigger:function(t,e,i){if(!(-1<a.indexOf(t))){var n,o=t+":"+e,s=l[o]||[],r=o.split(":")[0];if(!(o in u)||r&&this.slot_can_refire(r)){for(u[o]=i,n=0;n<s.length;n++)d(s[n],t,e,i);return this}generic.monitoring.record_event(o+"_already_fired",!1),consoleError("attempted to fire "+o+", but it has already fired!")}},has_fired:function(t,e){return t+":"+e in u},slot_can_refire:function(t){return e.includes(t)||(0,n.default)(t)}}}},{"./is-refresh-slot":150}],131:[function(t,k,B){var w,A,n,s,o,r,e,i,d,l,E,a,u,c,h,p,m,T,f,g,v,_,y,b,S,C,I,N,O,D=L(t("./ads-dom-utils")),x=L(t("./safeframe")),j=L(t("./slot-names")),R=L(t("./is-responsive")),F=L(t("./is-in-viewport")),U=L(t("./register-click-trackers")),V=L(t("./date-check")),H=t("./site-util"),W=t("./slot-util"),G=t("./ad-visibility-util"),z=t("./scale"),q=t("./backup-img-init"),Y=t("@imdb/ad-public-site-endpoint-builder"),X=t("./responsive-ad-api/responsive-ad-api"),K=t("./responsive-ad-api/media-orchestrator-bridge"),Q=t("./global-style"),J=t("./http"),Z=t("./ads-btr-utils"),tt=t("./tarnhelm-ad-utils"),t=t("./aps-auction-manager");function L(t){return t&&t.__esModule?t:{default:t}}function M(t){var e=A.getElementById(t);return(t=x.default.getSafeframeDiv(t))&&"IFRAME"!==t.tagName?t.getElementsByTagName("iframe")[0]:e}function et(t,e,i){t.attachEvent?t.attachEvent("on"+e,function(){i.apply(t,arguments)}):t.addEventListener(e,i,!1)}function it(t){var i="";return jQuery.each(s[t],function(t,e){i+='"'+t+'":['+o(e[0])+","+o(e[1])+"],"}),'"'+t+'":{'+i.substr(0,i.length-1)+"}"}function nt(){return"/"===A.location.pathname?"h":"n"}function P(t){consoleLog(t,"inject_ad")}function ot(t){return S[t]=S[t]||{}}w=window,A=document,e=w.ads_js_start?(new Date).getTime()-w.ads_js_start:null,i=navigator.userAgent,d=/MSIE|Trident\/\d+/.test(i),l=/Firefox/.test(i),E=w.generic,a={top_ad:"t",top_rhs:"tr"},u={injected_billboard:"top_ad",injected_navstrip:"top_ad",navboard:"top_ad"},c={top_ad:{width:"728px",height:"300px"},injected_billboard:{width:"970px",height:"500px"},top_rhs:{width:"988px",height:"320px"}},h={b:1,l:1,bl:1},p=1e16*Math.random(),m={},o=function(t){t=parseInt(t,10);return isFinite(t)?t:0},r={top_ad:"t",top_rhs:"tr",injected_navstrip:"in",injected_billboard:"ib",bottom_ad:"b",btf_rhs2:"br"},T={store:function(){E.on_document_ready(function(t){var o,e;try{var i=E.cookie.get("as");if(i)try{s=JSON.parse(i),n=n||s||{}}catch(t){n=n||(s={})}o=(s=s||{})[nt()]||{},t.each(r,function(t,e){var i,n=(t=>t=0!==(t=$("#"+t)).length&&"IFRAME"!==t[0].tagName?t.find("iframe"):t)(t);0!==n.length&&(o[e]=[(e=n,i=w.top.ad_utils.get_ad_object(e[0]),"none"===e.css("display")?0:parseInt(i.w,10)),(e=n,i=t,n=0,t=w.top.ad_utils.get_ad_object(e[0]),t=parseInt(t.h,10),"top_ad"===i?jQuery("#nb20").hasClass("banner")?n=-5:jQuery("#nb20").hasClass("supertab")&&(n=-15):"injected_billboard"===i&&(n=20),e.id&&"swfAutoMaxHeight"in e[0].contentWindow&&(t=e[0].contentWindow.swfMinHeight),"none"===e.css("display")||0===t?0:t+n)])}),s[nt()]=o,e="{",s&&("h"in s&&(e+=it("h")),"h"in s&&"n"in s&&(e+=","),"n"in s)&&(e+=it("n")),E.cookie.set("as",e+="}",E.days_to_midnight||1)}catch(t){consoleLog("Failed to store ad size cookie "+t.toString(),"ads")}})}},w.ad_size_cookie=T,(0,X.initializeResponsiveAdApi)(),O={inject_slot:function(t,e){var i,n,o,s=t.id,r='<style>body{background:transparent;}</style><script type="data-doubleclick" src="https://ia.media-imdb.com/images/G/01/mobile/blank_pixel._V137875076_.gif'+(t.getAttribute("data-dart-params")||"")+'"><\/script>'+e,a=r+"<script defer>parent.window.top.ad_utils.ad_table."+s+".fired=true;<\/script>";!x.default.isSafeframeSlot(s,t)||e&&0===e.indexOf("\x3c!-- blank --\x3e")||!w.DAsf&&!w.MAsf?d?(e=t,s=a,r="__srcless_"+Math.floor(68719476735*Math.random()).toString(36),o="<body><script>document.write(parent.window.top.ad_utils."+r+");delete parent.window.top.ad_utils."+r+";<\/script></body>",w.top.ad_utils[r]=s,e.src="javascript:unescape('"+escape(o)+"')"):(i=t,r=a,s=D.default.frameDoc(i),l||s.open("text/html","replace"),n="",n="https:"===location.protocol?'<head><meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"/></head><body>'+r+"<script>document.close()<\/script></body>":"<body>"+r+"<script>document.close()<\/script></body>",(0,R.default)(i.contentWindow)?setTimeout(function(){var t=A.getElementById(i.id);null!==t&&t.contentWindow.document.write(n)},0):s.write(n)):x.default.injectCode(s,r)}},w.ad_utils=w.top.ad_utils={responsiveAdAPI:X.responsiveAdAPI,apsAuctionManager:t.apsAuctionManager,adsBtrUtils:Z.adsBtrUtils,tarnhelmAdUtils:tt.tarnhelmAdUtils,mediaOrchestratorBridge:K.mediaOrchestratorBridge,ord:p,regenerateOrd:function(){w.consoleLog("Regenerating Client Side Ord","ads"),p=1e16*Math.random(),w.top.ad_utils.ord=p},ad_table:{},ad_navbar:{},ad_queue:[],low_latency_punt_ads:{},blank_ad_code:"<script>document.ad={h:0,w:0,scope:'blank'}<\/script>",slots_on_page:null,dateCheck:V.default,isInViewport:F.default,registerClickTrackers:U.default,get_slot_iframe:M,scaleTarnhelm:z.scaleTarnhelm,initAndBindResponsiveBackupLogic:q.initAndBindResponsiveBackupLogic,aax_instr_pixel_url:{},aax_imp_pixel_url:{},paets_loaded_pixel_url:{},update_ad_details:x.default.updateAdDetails,set_partner:x.default.setPartner,get_safeframe_ad_objs:x.default.getSafeframeAdObjs,sf_ad_details:{},removeOpacityAnimation:function(t,e){t&&e&&(e=D.default.getSlotWrapper(e))&&(e.classList.remove("iframe_tweening"),t.classList.remove("ad_fadein"))},setup_slot_metrics:function(i){w.top.ad_utils.slot_events.listen(i,"iframe request reflow tagdeliver load",function(t){var e=t.data.duration,i=t.data.timestamp;void 0===e&&i&&(e=csm.duration(i)),E.monitoring.update_slot_metrics(t.slot,t.event,e)}),w.top.ad_utils.slot_events.listen(i,"request",function(t){t=t.slot;E.monitoring.start_timing(t)}),w.top.ad_utils.slot_events.listen(i,"request tagdeliver",function(t){for(var e=t.slot,i=w.top.ad_utils.inject_ad.get_injectable_slots(e),n=0;n<i.length;n++)w.top.ad_utils.slot_events.trigger(i[n],t.event,t.data)}),w.top.ad_utils.slot_events.listen(i,"load",function(t){var e=t.data.type;e?E.monitoring.stop_timing(i,e,!0):consoleError(t.slot+" loaded, but type was not reported"),E.monitoring.update_slot_metrics(t.slot,"trueload")}),w.top.ad_utils.slot_events.listen(i,"punt",function(t){var e=t.event+"_"+t.data.type;E.monitoring.update_slot_metrics(t.slot,e)})},constructClientSideUrl:Y.constructClientSideUrl,constructCurrentSlotSizeMap:Y.constructCurrentSlotSizeMap,mobileWebCreativeResizing:z.mobileWebCreativeResizing,isInternetExplorer:H.isInternetExplorer,isIpad:H.isIpad,isResponsive:R.default,makeAdSlotsCall:J.makeAdSlotsCall,register_ad:function(t){w.top.ad_utils.setup_slot_metrics(t),w.top.ad_utils.slot_events.trigger(t,"iframe"),this.ad_table[t]={slot:t}},gpt:(C=null,I=[],{handle_response:function(t){var e;for(C=t,e=0;e<I.length;e++)this.render_ad(I[e])},render_ad:function(t){var e,i;C?(i=C[t]||{},e=M(t),i=i._html_||"",null!==e.getAttribute("data-roadblocked")&&(i="\x3c!-- roadblocked --\x3e"+w.top.ad_utils.blank_ad_code,w.top.ad_utils.slot_events.trigger(t,"request",{duration:0})),O.inject_slot(e,i)):I.push(t)}}),expand_ad:function(e){var t=this,i=e.id,n=e.height,o=e.width,i=x.default.getRawSlotName(i);if(!("expand_called"in this.ad_table[i])){var s,r=D.default.getSlotWrapper(i).id,a=this.get_ad_object(e),d=csm.duration(),l=A.getElementById(i+"_reflow_helper");l&&l.offsetTop;if(i+"_wrapper"===r||E.has_document_readied()){if(this.ad_table&&this.ad_table[i]){this.ad_table[i].expanded=1;l=(0,q.initAndBindResponsiveBackupLogic)(e.contentWindow);if(a&&!l&&(A.ads||(A.ads={}),A.ads[a.cid]=a,w.top.ad_utils.resize_iframe(e,a),a.st?this.expand_supertab(a):a.bb?this.expand_billboard(a):"top_ad"!==i||!this.is_open(i,a)||a.clickroll||a.overlay||this.expand_top_banner(),a.wrap&&this.expand_wrap(a),a.bamf&&this.expand_bamf(a,e),a.inner_bamf&&this.expand_inner_bamf(a),a.relative_bamf&&this.expand_relative_bamf(a),this.is_open(i,a)?w.top.ad_utils.show_hidden_labels(i):this.collapse_ad(e),a.styles))for(s in a.styles)E.override_style(s,a.styles[s].style);this.ad_table[i].expand_called=1,E.on_document_ready(function(t){t(e).trigger("expand_ad")}),w.top.ad_utils.fire_reflow_metric(i,a,o,n,e.width,e.height),w.top.ad_utils.fire_tagdeliver_metric(i,d),T.store(),A.body.className=A.body.className}}else E.on_document_ready(function(){t.expand_ad(e)})}},resize_iframe:function(t,e){"w"in e&&(t.width=parseInt(e.w,10)),"h"in e&&(t.height=e.expandHeight?parseInt(e.expandHeight,10):parseInt(e.h,10)),"z"in e&&e.z&&(slot_wrapper.style.zIndex=e.z,slot_wrapper.style.position="relative")},show_hidden_labels:function(t){var e=A.getElementById(t+"_before"),t=A.getElementById(t+"_after");e&&this.display_label(e),t&&this.display_label(t)},fire_reflow_metric:function(e,i,t,n,o,s){var r=csm.duration(),a=A.getElementById(e+"_reflow_helper"),d=a?a.offsetTop:null;n===s&&t===o?w.top.ad_utils.slot_events.trigger(e,"reflow",{duration:0}):setTimeout(function(){var t="top_ad"===e&&w.top.ad_utils.is_open(e,i)&&!i.st?10:0,t=a&&a.offsetTop===d+t;w.top.ad_utils.slot_events.trigger(e,"reflow",{duration:t?0:r})},10)},fire_tagdeliver_metric:function(t,e){t in u||w.top.ad_utils.slot_events.has_fired(t,"tagdeliver")||w.top.ad_utils.slot_events.trigger(t,"tagdeliver",{duration:e})},get_ad_object:function(t){var e=t.id;if(x.default.isSafeframeSlot(e,t))return x.default.getSfAdObject(e);var i=D.default.frameDoc(t),t=null;if(null!=i){if(t=i.ad)"pid"in t||(t.pid="DFP"),"instrPixel"in t||(t.instrPixel=w.top.ad_utils.aax_instr_pixel_url[e.toUpperCase()]);else{var n,o,s,r=0,a=0,d=["img","object","embed","iframe"];for(o in d)for(s=i.getElementsByTagName(d[o]),n=0;n<s.length;n++){var l=s[n],u=l.scrollWidth||l.width,l=l.scrollHeight||l.height;u&&1<u&&(r=Math.max(r,parseInt(u,10))),l&&1<l&&(a=Math.max(a,parseInt(l,10))),consoleLog(e+" : estimated size : "+u+","+l,"ads")}t={w:r.toString(),h:a.toString(),pid:"",url:"",aid:"0",cid:"0",instrPixel:w.top.ad_utils.aax_instr_pixel_url[e.toUpperCase()]},0!==r&&0!==a||(t.scope="null")}return i.ad=t}consoleLog("Cannot get document back from iframe")},get_cornerstone_ad_object:function(t){t=a[t]+"adData";return"aanResponse"in top.document&&t in top.document.aanResponse?top.document.aanResponse[t]:null},get_mapped_amazon_slot_name:function(t){return a[t]||t},on_ad_load:function(t){if(t&&0<t.src.length&&-1===t.src.indexOf("www.imdb.com")&&-1===t.src.indexOf("javascript:"))E.monitoring.record_event("iframe_not_sourceless",!1);else{var e,i,n,o=t.id,s=this.ad_table[o];if(s&&s.fired){e=this.get_ad_object(t),this.responsiveAdAPI&&(this.responsiveAdAPI.events.adIframeLoad(o),this.responsiveAdAPI.shouldMakeAdSticky(t,e)&&this.responsiveAdAPI.makeAdSticky(j.default.INLINE20),this.responsiveAdAPI.updateSponsoredLabel(t)),i=this.get_type_of_ad(e),s.loaded=!0,!e||"blank"!==e.scope&&"null"!==e.scope||(n="0"===t.getAttribute("data-original-width")&&"0"===t.getAttribute("data-original-height")?0:E.monitoring.get_metric_value(o,"reflow")),(0,Q.globalizeCss)(t.contentWindow);try{s.expanded||this.expand_ad(t)}catch(t){consoleLog("Exception during expand_ad:"+t.message)}w.top.ad_utils.slot_events.trigger(o,"load",{duration:n,type:i})}else consoleLog("deflected spurious onload event for "+o,"on_ad_load")}},is_open:function(t,e){var i=M(t),i=i&&i.getAttribute("data-first-party-creative-template");return"top_ad"===t&&i?e&&"w"in e&&"h"in e&&0<e.w&&0<e.h&&"blank"!==e.scope:e&&"blank"!==e.scope},expand_supertab:function(t){var e=A.getElementById("nb15"),i=A.getElementById("nb20");e?e.className="supertab":i&&(i.className="supertab")},expand_billboard:function(t){var s,e,i=A,n=parent,o="injected_billboard",r=M(o),a=D.default.getSlotWrapper(o),d=A.getElementById("top_rhs_wrapper"),l=d?d.parentElement||d.parentNode:null,u=t.bb_close_tracker,c=t.bb_show,h=t.bb_show_tracker,p="ax",m=!1;return!!a&&(a.className=(a.className?a.className+" ":"")+"billboard",(e=i.createElement("div")).id="billboard_show_button",e.style.display="none",l?l.insertBefore(e,d):(w.top.ad_utils.slot_events.listen("top_rhs","iframe",function(){y()}),e.style.marginRight="19px",e.style.marginTop="7px",a.parentNode.insertBefore(e,a)),1===t.bb&&(n.window.top.ad_utils.ns.register("billboard","close",function(){v(),void 0!==u&&u()}),e.innerHTML=c,e.onclick=function(){e.style.display="none",r.style.display="block",f(),s[t.aid]="o",g(),T.store(),a.style.margin="20px 19px",void 0!==h&&h()},f(),t.aid in s)&&"c"===s[t.aid]&&v(),!0);function f(){var t,e=E.cookie.get(p),i=e&&e.split(/o|c/),n=e&&e.split(/\d*/),o={};if(i&&n)for(""===n[0]&&n.shift(),t=0;t<n.length;++t)o[i[t]]=n[t];s=o}function g(){var t,e="";new Date;for(t in s)s.hasOwnProperty(t)&&(e+=t+s[t]);E.cookie.set(p,e,E.days_to_midnight||1)}function v(){r.style.display="none",d||m?b():E.on_document_ready(_)}function _(){y(),b()}function y(){if(!m&&(d=A.getElementById("top_rhs_wrapper"),l=d?d.parentElement||d.parentNode:null,d))try{a.parentNode.removeChild(e),l.insertBefore(e,d),e.style.marginRight="",e.style.marginTop=""}catch(t){consoleLog("caught a duplicate call to attempt_reattach_show_ad_button","ads")}}function b(){void 0!==c&&""!==c&&(e.style.display="block"),f(),s[t.aid]="c",g(),T.store(),a.style.margin="0px",m=!0}},expand_top_banner:function(){var t=A.getElementById("nb15");t?t.className="banner":(t=A.getElementById("top_ad"))&&(t.style.margin="auto")},expand_bamf:function(t,e){t=t.bamf;E.extend(e.style,t.style)},expand_inner_bamf:function(t){var t=t.inner_bamf,e=A.getElementById(t.targetId);e&&t.node&&E.insert_after(t.node,e)},expand_relative_bamf:function(t){var e,t=t.relative_bamf,i=A.getElementById(t.targetId);"insert_after"===t.relation?e=E.insert_after:"insert_before"===t.relation?e=E.insert_before:"insert_inside"===t.relation&&(e=E.insert_inside),i&&t.node&&e(t.node,i)},expand_wrap:function(t){var e,i,n;t.styles||(t.styles={}),i=t.sleeves?{wrapper:{style:{background:t.wrap}},root:{style:{background:"none","box-shadow":"none"}},pagecontent:{style:{height:"100%"}}}:(e="styleguide-v2",A.getElementById("imdbHeader")&&A.getElementById("imdbHeader").parentNode!==A.getElementById("nb20")&&(e="wrapper",i=-1<t.wrap.indexOf("fixed"),n=A.getElementById("wrapper"),i)&&null!==n&&n.style.setProperty("background-attachment","scroll","important"),{[e]:{style:{background:t.wrap}},root:{style:{"background-color":"transparent","box-shadow":"none"}},pagecontent:{style:{height:"100%"}},nb20:{style:{background:"none"}}}),E.extend(t.styles,i)},expand_label:function(t){t.className=t.className.replace(/hidden/,"")},display_label:function(t){t.style.display="block",t.style.visibility="visible"},collapse_ad:G.collapseAd,uncollapse_ad:G.uncollapseAd,get_type_of_ad:function(t){return t?t.scope||"got_ad":"null"},report_ad_data:function(t,i){var e=t;if(e!==top){try{for(;e.parent!==top;)e=e.parent;(0,W.getSlotName)(e)}catch(t){return void consoleLog("could not determine ad slot: "+t)}$.each("aid cid pid url dom dim".split(" "),function(t,e){e in i&&(e,i[e])})}},ns:(S={},{register:function(t,e,i){t="string"==typeof t?t:t.frameElement.id;ot(t)[e]=i},get:ot}),inject_ad:(_={},y={},b={},{render:function(t){var e=M(t),i=_[t];b[t]||(P(t+" rendered"),b[t]=1,w.top.ad_utils.ad_table[t]={slot:t,injected:!0},O.inject_slot(e,i||'<script>document.ad = {h:"0",w:"0",scope:"blank"}<\/script>'))},register:function(t){var e=u[t],i=this;P(t+" registered"),y[t]=1,_[t]?i.render(t):w.top.ad_utils.slot_events.listen(e,"load",function(){i.render(t)}),w.top.ad_utils.setup_slot_metrics(t),w.top.ad_utils.slot_events.trigger(t,"iframe")},inject:function(t,e){P(t+" injected"),_[t]=e,y[t]&&this.render(t)},get_injectable_slots:function(t){var e,i=[];for(e in u)u[e]===t&&i.push(e);return i}}),weblab:(v={},{set_treatment:function(t,e){v[t]=e},get_treatment:function(t){return v[t]}}),attach_aax_callback:function(e,i){i.aax_render_ad=function(t){t&&t.html?(i.document.write(t.html),i.document.got_aax_ad="got_ad"):i.document.got_aax_ad="blank",i.top.ad_utils.slot_events.trigger(e,"tagdeliver")}},set_aax_instrumentation_pixel_url:function(t,e){w.top.ad_utils.aax_instr_pixel_url[t.toUpperCase()]=e},set_aax_impression_pixel_url:function(t,e){w.top.ad_utils.aax_imp_pixel_url[t.toUpperCase()]=e},set_paets_loaded_pixel_url:function(t,e){w.top.ad_utils.paets_loaded_pixel_url[t.toUpperCase()]=e},inject_serverside_ad:function(t,e){var i=M(t),n=null!==i.getAttribute("data-roadblocked"),o=null!==i.getAttribute("data-blank-serverside");w.top.ad_utils.slot_events.trigger(t,"request",{duration:0}),n?e="\x3c!-- roadblocked --\x3e"+w.top.ad_utils.blank_ad_code:o&&(e="\x3c!-- blank --\x3e"+w.top.ad_utils.blank_ad_code),O.inject_slot(i,e)},aax_render_ad:function(e){var i=M(e),t=i.getAttribute("data-aax-url"),t="<script>parent.window.top.ad_utils.attach_aax_callback('"+e+"', window);<\/script><script src=\""+t+'"><\/script>';i.onload=function(){var t=w.top.ad_utils.ad_table[e];t&&t.fired?(t="got_ad"!==D.default.frameDoc(i).got_aax_ad?(i.style.display="none","blank"):D.default.frameDoc(i).got_aax_ad,w.top.ad_utils.slot_events.trigger(e,"load",{type:t})):consoleLog("deflected spurious cornerstone onload event for "+e,"aax_render_ad")},w.top.ad_utils.slot_events.trigger(e,"request"),O.inject_slot(i,t)},register_punt_ad:function(t,e,i,n){this.low_latency_punt_ads[t]={w:e,h:i,markup:n}},inject_punt_ad:function(t,e){var t=t.frameElement,i=t.id,n=D.default.frameDoc(t),o=null,s=n&&n.ad&&n.ad.aid?n.ad.aid:"0",r=n&&n.ad&&n.ad.cid?n.ad.cid:"0";i in this.low_latency_punt_ads?(o=this.low_latency_punt_ads[i],n.ad={w:o.w,h:o.h,pid:"",url:"",aid:s,cid:r},this.expand_ad(t),s=o.markup.replace(/\[PUNT_ORIGIN\]/,encodeURIComponent('{"punt_origin":"'+e+'"}')),n.write(s),w.top.ad_utils.slot_events.trigger(i,"punt",{type:"got_ad"})):w.top.ad_utils.slot_events.trigger(i,"punt",{type:"blank"})},fp:w.imdbads.frequencyCapping,set_slots_on_page:function(t){w.top.ad_utils.slots_on_page=t},ads_header:(f=!1,g=[],{on_done:function(t){if(f)try{t()}catch(t){consoleWarn(t)}else g.push(t)},done:function(){var t;for(f=!0,t=0;t<g.length;t++)try{g[t]()}catch(t){consoleWarn(t)}g=null}}),is_qualified_expanding:function(t){var e=c[t.slot];return!!(e&&t.width.replace(/px/g,"")<=e.width.replace(/px/g,"")&&t.height.replace(/px/g,"")<=e.height.replace(/px/g,"")&&h[t.direction])},expand_overlay:function(t){var e=JSON.parse(t);if(e&&e.slot&&e.width&&e.height&&e.direction&&w.top.ad_utils.is_qualified_expanding(e)){var i=w.top.ad_utils.get_slot_iframe(e.slot);if(void 0!==i){i.style.position="absolute",i.style.width=e.width,i.style.height=e.height;var n=A.getElementById(e.slot);switch(e.direction){case"l":w.top.ad_utils.expand_left(i,e,n);break;case"b":w.top.ad_utils.expand_bottom(i,e,n);break;case"bl":w.top.ad_utils.expand_left(i,e,n),w.top.ad_utils.expand_bottom(i,e,n)}}}},expand_general:function(t,e,i){i="top_ad"===i.slot?300:100;t.style.zIndex=i,e.style.width=t.width,e.style.height=t.height},expand_left:function(t,e,i){t.style.marginLeft="-"+(e.width.replace(/px/g,"")-t.width.replace(/px/g,""))+"px",w.top.ad_utils.expand_general(t,i,e)},expand_bottom:function(t,e,i){w.top.ad_utils.expand_general(t,i,e)},collapse_overlay:function(t){var e,t=JSON.parse(t);t&&t.slot&&x.default.getSfAdObject(t.slot)&&(e=w.top.ad_utils.get_slot_iframe(t.slot))&&(e.style.position="",e.style.width="",e.style.height="",e.style.zIndex="",e.style.marginLeft="",e.style.marginTop="",A.getElementById(t.slot).style.marginTop="")}},E.install(E,{should_jQuery_noConflict:w.$&&!w.jQuery,one_way_send_record:[],insert_after:function(e,i){try{i.parentNode.insertBefore(e,i.nextSibling)}catch(t){i.parentNode.appendChild(e)}},insert_before:function(t,e){e.parentNode.insertBefore(t,e)},insert_inside:function(t,e){e.appendChild(t)},extend:function(t,e){for(var i in e)"object"==typeof e[i]?t[i]!==e[i]&&(void 0===t[i]&&(t[i]={}),this.extend(t[i],e[i])):t[i]=e[i]},override_style:function(t,e,i){var n,t="#"+t;for(n in e)e[n]+=" !important";E.add_json_style(t,e,i)},add_json_style:function(t,e,i,n){var o,s=t+"{";for(o in e)s+=o+":"+e[o]+";";E.add_css_style(s+="}",i,n)},add_css_style:function(t,e,i){var n,o,s,r="css-style-generic",a=[r];for(s in e&&e.length?a.push(e):e=r,i=i||"a",a)A.getElementById(a[s])||((n=A.createElement("style")).setAttribute("type","text/css"),n.id=a[s],A.getElementsByTagName("head")[0].appendChild(n));if((n=A.getElementById(e)).styleSheet&&"cssText"in n.styleSheet)o=("a"===i?n.styleSheet.cssText:"")+t,n.styleSheet.cssText=o;else{o=("a"===i?n.innerHTML:"")+t;try{n.innerHTML=o}catch(t){n.innerText=o}}},add_css_file:function(t,e){var i=A.getElementById(e=e||"css-file-generic");i||((i=A.createElement("link")).setAttribute("type","text/css"),i.rel="stylesheet",i.id=e,A.getElementsByTagName("head")[0].appendChild(i)),i.href=t},set:function(t,e){t=t.split(":");("cookie"===t[0]?E.cookie:E.cache).set(t[1],e)},get:function(t){t=t.split(":");return("cookie"===t[0]?E.cookie:E.cache).get(t[1])},erase:function(t){t=t.split(":");return("cookie"===t[0]?E.cookie:E.cache).erase(t[1])},cache:{set:function(t,e){m[t]=e},get:function(t){return m[t]},erase:function(t){delete m[t]}},load_script:function(t){var e=A.createElement("script");e.type="text/javascript",e.src=t,A.getElementsByTagName("head")[0].appendChild(e)},load_script_notify:function(e,i){var n=A.createElement("script"),o=!1;n.type="text/javascript",n.src=e,n.onload=n.onreadystatechange=function(){var t=this.readyState;o||t&&"complete"!==t&&"loaded"!==t||(o=!0,A.body.removeChild(n),"function"==typeof i&&i(e))},A.body.appendChild(n)},one_way_send:function(t){var e=new Image(0,0);e.src=t,this.one_way_send_record.push(e)},load_when_visible:function(t,e){var i,n=0,o=jQuery(w),s=o.height()+o.scrollTop();!jQuery("#"+t).length||(i=jQuery(jQuery("#"+t).get(0)),i.offset().top<s)?e(t):o.scroll(function(){s=o.height()+o.scrollTop(),i.offset().top<s&&!n&&(n=1,e(t))})},unload_plugins:function(){for(var t,e,i,n,o,s=[A],r=new RegExp("^("+location.protocol+"//"+location.hostname+")?(/.*)?$"),a=function(t){for(var e,i=t.length-1;0<=i;i--)(e=t[i]).parentNode.removeChild(e)};s.length;)for(a((t=s.pop()).getElementsByTagName("object")),a(t.getElementsByTagName("embed")),o=(e=t.getElementsByTagName("iframe")).length-1;0<=o;o--)i=e[o],r.test(i.src)?(n=D.default.frameDoc(i))&&s.push(n):a([i])},addEventListener:function(t,e,i){et(t,e,i)}}),w.custom={amazon:{load_callback:function(t){}},indirect:{close:function(t){t.location.href.match("floater")&&custom.floater.close((0,W.getSlotName)(t))}},full_page:{style_id:"custom__full_page__generated_styles",PLAID_CSS_MAP:{base:"--ipt-base-rgb",baseShade1:"--ipt-base-shade1-rgb",baseShade2:"--ipt-base-shade2-rgb",baseShade3:"--ipt-base-shade3-rgb",onBase:"--ipt-on-base-rgb",onBaseAccent1:"--ipt-on-base-accent1-rgb",onBaseAccent2:"--ipt-on-base-accent2-rgb",onBaseAccent3:"--ipt-on-base-accent3-rgb",onBaseError:"--ipt-on-base-error-rgb",baseAlt:"--ipt-baseAlt-rgb",baseAltShade1:"--ipt-baseAlt-shade1-rgb",baseAltShade2:"--ipt-baseAlt-shade2-rgb",baseAltShade3:"--ipt-baseAlt-shade3-rgb",onBaseAlt:"--ipt-on-baseAlt-rgb",onBaseAltAccent1:"--ipt-on-baseAlt-accent1-rgb",onBaseAltAccent2:"--ipt-on-baseAlt-accent2-rgb",onBaseAltAccent3:"--ipt-on-baseAlt-accent3-rgb",onBaseAltError:"--ipt-on-baseAlt-error-rgb",accent1:"--ipt-accent1-rgb",onAccent1:"--ipt-on-accent1-rgb",accent2:"--ipt-accent2-rgb",onAccent2:"--ipt-on-accent2-rgb"},apply_PLAID_styles:function(t){t=this._transform_PLAID_style_input(t),t=this._construct_PLAID_CSS_string(t);t&&t.length&&E.add_css_style(t,this.style_id,"a")},_transform_PLAID_style_input:function(t){var e,i,n,o={};for(e in t)t.hasOwnProperty(e)&&t[e]&&"undefined"!==t[e]&&"null"!==t[e]&&(i=this.PLAID_CSS_MAP[e])&&(n=t[e],o[i]=n.startsWith("#")&&this.hex_to_RGB(n)||n);return o},_construct_PLAID_CSS_string:function(t){if(Object.keys(t).length<1)return null;var e,i=["\n",":root {"];for(e in t){var n="   "+e+": "+t[e]+";";i.push(n)}return i.push("}"),3<i.length?i.join("\n"):null},apply_PLAID_theme:(N=!1,function(){if(!N)switch(this.theme){case"dark":N=!0;var t={base:this.to_CSS_var_string(this.PLAID_CSS_MAP.baseAlt),baseShade1:this.to_CSS_var_string(this.PLAID_CSS_MAP.baseAltShade1),baseShade2:this.to_CSS_var_string(this.PLAID_CSS_MAP.baseAltShade2),onBase:this.to_CSS_var_string(this.PLAID_CSS_MAP.onBaseAlt),onBaseAccent2:this.to_CSS_var_string(this.PLAID_CSS_MAP.onBaseAltAccent2)};this.apply_PLAID_styles(t);break;case"light":N=!0;t={baseAltShade2:this.to_CSS_var_string(this.PLAID_CSS_MAP.baseShade2),onBaseAltAccent2:this.to_CSS_var_string(this.PLAID_CSS_MAP.onBaseAccent2)};this.apply_PLAID_styles(t);break;default:return}}),apply_fast:function(t,e){var i,n,o,s=this.styles[t.treatment],r=[];for(i in s)if(s.hasOwnProperty(i))for(var a=s[i],d=0;d<a.length;d++)n=a[d],(o=this.get_values_for_setting(n,t,e))&&(o=this.build_rule(n.selector,i,o,n.important),r.push(o));E.add_css_style(r.join("\n"),this.style_id,"o"),this.apply_PLAID_theme()},get_values_for_setting:function(t,e,i){i=i?null:t.default;return t.fixed?i=t.fixed:t.name in e&&(i=e[t.name]),i="string"==typeof i?[i]:i},build_rule:function(t,e,i,n){for(var o="",s=0;s<i.length;s++)o+="  "+e+" : "+i[s]+(n?" !important":"")+";\n";return t+"{\n"+o+"}\n"},apply:function(t){var e=this;A.getElementById("root").style.boxShadow="none",w.generic.on_document_ready(function(){e.settings=t,"styles"in e?e._apply():w.generic.load_script_notify(e.data_url,function(){e._apply()})})},_apply:function(){var t=this.settings.ARGS.split(/&/),i={},n=this,o="/* ARGS:"+this.settings.ARGS+" */\n";jQuery.each(t,function(t,e){e=/^(.*)=(.*)$/.exec(e);3===e.length&&(i[e[1]]=unescape(e[2].replace(/\+/g," ")))}),t=this.invert_styles(i.treatment),jQuery.each(t,function(t,e){e.fixed?o+=n.format_css(e,e.fixed):(i[t]||e.default)&&(o+=n.format_css(e,i[t]))});try{jQuery("style#"+this.style_id).remove(),jQuery("head").append(jQuery('<style type="text/css">').attr("id",this.style_id).html(o))}catch(t){E.add_css_style(o,this.style_id,"o")}},invert_styles:function(t){var o=["default","important","fixed"],s={};return jQuery.each(this.styles[t],function(e,t){jQuery.each(t,function(t,i){var n=s[i.name]={style:e,selector:i.selector};jQuery.each(o,function(t,e){i[e]&&(n[e]=i[e])})})}),s},format_css:function(t,e){return t.selector+" { "+t.style+" : "+(e||t.default)+(t.important?" !important;":";")+"}\n"},hex_to_RGB:function(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(t,e,i,n){return e+e+i+i+n+n});t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return t?String(this.to_hex(t[1]))+","+this.to_hex(t[2])+","+this.to_hex(t[3]):null},to_hex:function(t){return parseInt(t,16)},to_CSS_var_string:function(t){return"var("+t+")"}},css:{inject_css:function(i,n){w.generic.on_document_ready(function(){var t=i.getElementById(n),e=A.head;E.insert_inside(t,e)})}}},T.store(),E.on_document_ready(function(t){t(w).on("load",function(){T.store()})}),E.on_document_ready(function(){et(w,"unload",function(){E.unload_plugins()})}),e&&E.on_document_ready(function(){E.monitoring.record_metric("ads_js_response",e)})},{"./ad-visibility-util":121,"./ads-btr-utils":124,"./ads-dom-utils":126,"./aps-auction-manager":132,"./backup-img-init":133,"./date-check":142,"./global-style":146,"./http":147,"./is-in-viewport":149,"./is-responsive":151,"./register-click-trackers":154,"./responsive-ad-api/media-orchestrator-bridge":157,"./responsive-ad-api/responsive-ad-api":160,"./safeframe":165,"./scale":166,"./site-util":167,"./slot-names":169,"./slot-util":170,"./tarnhelm-ad-utils":171,"@imdb/ad-public-site-endpoint-builder":86}],132:[function(t,e,i){Object.defineProperty(i,"__esModule",{value:!0}),i.apsAuctionManager=void 0;var n,o=t("./responsive-ad-api/responsive-ad-api"),s=t("./responsive-ad-api/constants"),r=(n=t("./slot-names"))&&n.__esModule?n:{default:n},a=t("./ads-csa");let d=i.apsAuctionManager={APS_AAX_AD_TYPES:["SD","House"],SLOT_BLOCK_LIST:new Set(["interstitial"]),auditLog:[],apsSlotInfoMap:{},apsSlotIdToOriginalSlotNameMap:{},GAM_SLOT_REQUEST_EVENT_NAME:"slotRequested",GAM_SLOT_RENDER_ENDED_EVENT_NAME:"slotRenderEnded",GAM_SLOT_RESPONSE_RECEIVED_EVENT_NAME:"slotResponseReceived",slotsWithInitialGAMContent:new Set,requestCount:0,requestCountBySlotName:new Map,makeApsAndGAMRequests(i,n){let o=window.apstag;i&&o&&0<n.length&&(this.log("Calling APS with slots: "+n.map(t=>JSON.stringify(t)).join("")),o.fetchBids({slots:n},function(t){d.log("Bids received from APS: "+JSON.stringify(t)),i.cmd.push(function(){var t=i.pubads().getSlots();let e=n.map(t=>t.slotName);t=t.filter(t=>e.includes(t.getAdUnitPath()));o.setDisplayBids(),i.pubads().refresh(t)})}))},emitGAMSlotLoadEvent(t,e,i){window.ue&&window.ue.count&&"function"==typeof window.ue.count&&t&&(window.ue.count(`imdb:apsAuctionManager:slotLoad:${t}_aps`,i?0:1),window.ue.count(`imdb:apsAuctionManager:slotLoad:${e}_aps`,i?0:1)),window.uex&&"function"==typeof window.uex&&t===r.default.ADHESION_BOTTOM&&(window.uex("ld",t,{wb:1}),d.log(`uex() recording "ld" for "${t}" -- Timestamp: `+Date.now()),(0,a.logCSAWidgetEvent)(t,a.CSA_MARKERS.LOADED),(0,a.logCSAWidgetEvent)(t,a.CSA_MARKERS.CLICK_TO_LOADED))},emitGAMSlotRequestEvent(t,e){window.ue&&window.ue.count&&"function"==typeof window.ue.count&&t&&(window.ue.count(`imdb:apsAuctionManager:slotRequest:${t}_aps`,1),window.ue.count(`imdb:apsAuctionManager:slotRequest:${e}_aps`,1)),window.uet&&"function"==typeof window.uet&&t===r.default.ADHESION_BOTTOM&&(window.uet("bb",t,{wb:1}),d.log(`uet() recording "bb" for "${t}" -- Timestamp: `+Date.now()),(0,a.logCSAWidgetEvent)(t,a.CSA_MARKERS.WIDGET_BEGIN),(0,a.logCSAWidgetEvent)(t,a.CSA_MARKERS.CLICK_TO_BODY_BEGIN))},emitGAMSlotResponseReceivedEvent(t){window.uet&&"function"==typeof window.uet&&t===r.default.ADHESION_BOTTOM&&(window.uet("be",t,{wb:1}),d.log(`uet() recording "be" for "${t}" -- Timestamp: `+Date.now()),(0,a.logCSAWidgetEvent)(t,a.CSA_MARKERS.WIDGET_END),(0,a.logCSAWidgetEvent)(t,a.CSA_MARKERS.CLICK_TO_BODY_END))},emitTimingMetric(t,e){e=d.apsSlotIdToOriginalSlotNameMap[e];e&&"function"==typeof window.uet&&window.uet(t,`imdb:apsAuctionManager:${e}_aps`,{wb:1})},setupGAMEventListenerForRequest(t){t&&t.cmd&&t.cmd.push(function(){t.pubads().addEventListener(d.GAM_SLOT_REQUEST_EVENT_NAME,t=>{var t=t.slot,t=t&&t.getSlotElementId(),t=d.apsSlotIdToOriginalSlotNameMap[t],e=d.hasStartedAnApsRefreshRequest()?"aggregate_refresh":"aggregate";d.emitGAMSlotRequestEvent(t,e)})})},setupGAMEventListenerAfterRender(t){t&&t.cmd&&t.cmd.push(function(){t.pubads().addEventListener(d.GAM_SLOT_RENDER_ENDED_EVENT_NAME,t=>{var e=t.slot,e=e&&e.getSlotElementId(),t=t.isEmpty,e=d.apsSlotIdToOriginalSlotNameMap[e],i=d.hasStartedAnApsRefreshRequest()?"aggregate_refresh":"aggregate";d.emitGAMSlotLoadEvent(e,i,t)})})},setupGAMEventListeners(t){t&&t.cmd&&(t.cmd.push(function(){t.pubads().addEventListener(d.GAM_SLOT_RESPONSE_RECEIVED_EVENT_NAME,t=>{var t=t.slot,e=t&&t.getSlotElementId(),t=t&&t.getResponseInformation(),i=(d.emitTimingMetric("bb",e),d.log(`slotResponseReceived for slot ${JSON.stringify(e)} with data `+JSON.stringify(t)),d.apsSlotIdToOriginalSlotNameMap[e]),i=(d.emitGAMSlotResponseReceivedEvent(i),new CustomEvent("apsSlotLoad_"+e,{detail:t}));window.top.dispatchEvent(i),d.log(`dispatched ${i.type} event with data `+JSON.stringify(i.detail))})}),this.log("Set up GAM slotResponseReceived listener"))},incrementApsRequestCountForSlot(t){this.requestCountBySlotName.has(t)?this.requestCountBySlotName.set(t,this.requestCountBySlotName.get(t)+1):this.requestCountBySlotName.set(t,1)},runApsAuctionFlow(t,e,i){if(this.log("Beginning aps auction flow"),this.requestCount++,this.apsSlotInfoMap){for(var n in e)this.incrementApsRequestCountForSlot(n),this.setupApsEventListener(t,this.apsSlotInfoMap[n].slotId,n,e);i=this.createApsSlotArrays(t,e,i);this.hasStartedAnApsRefreshRequest()||(this.setupGAMEventListeners(t),this.setupGAMEventListenerForRequest(t),this.setupGAMEventListenerAfterRender(t)),this.makeApsAndGAMRequests(t,i)}},aaxResponseIsLessValuableThanApsBid(t){var e=o.responsiveAdAPI.isAdProductTypeBlank(t),t=t?t.aaxAdType:"";return e||this.APS_AAX_AD_TYPES.includes(t)},createApsSlotArrays(i,t,n){this.log("Creating APS slot arrays for "+JSON.stringify(t));var o=[];for(let e in this.apsSlotInfoMap){var s=t[e],s=s?s.creativeMetadata:{};if(i&&t.hasOwnProperty(e)){let t=this.getApsInfoForSlot(e,n.get(e));t&&0<Object.keys(t).length&&this.isFirstApsRequestForSlot(e)&&(this.log("Defining slot "+e),i.cmd.push(function(){i.defineSlot(t.slotName,t.sizes[0],t.slotID).addService(i.pubads()),d.isGptDivPresent(t.slotID)?i.display(t.slotID):d.beginGptDivDisplayInterval(i,t.slotID,e),d.log(`Defined slot ${e} with `+JSON.stringify(t))})),this.aaxResponseIsLessValuableThanApsBid(s)&&o.push(t),d.apsSlotIdToOriginalSlotNameMap[t.slotID]=e}}return 0<o.length&&!this.hasStartedAnApsRefreshRequest()&&i.cmd.push(function(){i.pubads().disableInitialLoad(),i.pubads().enableSingleRequest(),i.enableServices(),d.log("Enabled googletag service")}),this.log("Created aps slots: "+o.map(t=>JSON.stringify(t)).join("")),o},beginGptDivDisplayInterval(t,e,i){let n=setInterval(()=>{d.isGptDivPresent(e)&&(t.display(e),d.log(`Displayed ${e} from interval`),clearInterval(n))},100)},isGptDivPresent(t){return null!==document.getElementById(t)},getApsInfoForSlot(t,e){let i={};var n;return this.apsSlotInfoMap&&Object.keys(this.apsSlotInfoMap).includes(t)&&(n=this.apsSlotInfoMap[t],i={slotName:n.slotName,slotID:n.slotId,sizes:[this.convertSizeStringToIntArray(e)]},n.slotParams)&&(i.slotParams=n.slotParams),this.log(`Created apsInfo for ${t}: `+JSON.stringify(i)),i},convertSizeStringToIntArray(t){let e=[];return e=t&&t.indexOf("x")?t.split("x").map(t=>parseInt(t)):e},getApsEnabledSlots(e,i){let n={};return e&&i&&Object.keys(e).filter(t=>!this.SLOT_BLOCK_LIST.has(t)).forEach(t=>{this.log(`Trying to add ${t} to apsEnabledSlots`),i.hasOwnProperty(t)&&this.aaxResponseIsLessValuableThanApsBid(e[t].creativeMetadata)&&(n[t]=e[t],this.log(`Added ${t} to apsEnabledSlots`))}),n},setupApsEventListener(t,e,i,n){this.log("Adding APS event listener for "+e);var o="apsSlotLoad_"+e;window.top.addEventListener(o,t=>{t.detail?(d.log(`Successful APS bid received for ${i}|`+e),d.handleSuccessfulApsBidResponse(i)):(d.log(`Unsuccessful APS bid received for ${i}|`+e),d.handleFailedApsBidResponse(i,n[i]))},{once:!0}),d.log("Created event listener with ID: "+o)},handleSuccessfulApsBidResponse(t){d.hasStartedAnApsRefreshRequest()||d.slotsWithInitialGAMContent.add(t);var e=t.replace("_refresh","");o.responsiveAdAPI.queueFunc("adSlotMount",e,()=>{d.apsAdLoadCallback(t)})},apsAdLoadCallback(t){t===r.default.INLINE20&&window.mediaOrchestrator&&window.mediaOrchestrator.publish(s.MEDIA_PLAYBACK_EVENT_NAME,{slotName:t,timestamp:Date.now(),type:s.THIRD_PARTY_AD_DETECTED_EVENT_TYPE,dispatcher:"aps-auction-manager"});t=t.replace("_refresh","");d.hidePlaceholderPattern(t),t!==r.default.ADHESION_BOTTOM&&o.responsiveAdAPI.unCollapseAd(t),d.hideAaxAd(t),d.hidePreviousGAMAd(t)},handleFailedApsBidResponse(t,e){d.log(e);var i=e&&e.creativeMetadata;d.shouldRenderAaxAd(t,i)&&(d.log("Rendering AAX ad for "+t),i=t.replace("_refresh",""),o.responsiveAdAPI.queueFunc("adSlotMount",i,()=>{o.responsiveAdAPI.renderAd(t,e)}))},getGoogleSlotFromApsSlotName(e){var t;if(window.googletag&&window.googletag.pubads&&"function"==typeof window.googletag.pubads)return t=(t=window.googletag.pubads().getSlots())&&t.find(t=>e===t.getAdUnitPath()),d.log(`GoogleSlot from ${e} is: `+t),t;d.log("googletag is not setup yet, failed to get Google slot")},getCurrentAaxAdWrapperDiv(t){return document.getElementById(o.responsiveAdAPI.getSlotWrapperId(t))||document.getElementById(o.responsiveAdAPI.getRefreshedSlotWrapperId(t))||void 0},hidePlaceholderPattern(t){t=document.getElementById(o.responsiveAdAPI.getSlotPlaceholderId(t));t?t.style.display="none":d.log("Cant find placeholder")},hideAaxAd(t){var e=d.getCurrentAaxAdWrapperDiv(t);e?(e.remove(),d.log("AAX Wrapper Div Removed for "+t)):d.log(`AAX Wrapper Div for ${t} not found`)},hidePreviousGAMAd(t){var e,i;d.slotsWithInitialGAMContent.has(t)&&(i=d.apsSlotInfoMap[t]&&d.apsSlotInfoMap[t].slotName,d.log("Trying to remove google ad slot with ID "+i),d.hasStartedAnApsRefreshRequest())&&(i=d.getGoogleSlotFromApsSlotName(i))&&(e=i.getSlotId().getDomId(),window.googletag.destroySlots([i]),(i=document.getElementById(e))&&(i.remove(),d.log("Removed googleDiv with ID "+e)),d.slotsWithInitialGAMContent.delete(t))},shouldRenderAaxAd(t,e){return!(this.hasStartedAnApsRefreshRequest()&&o.responsiveAdAPI.isAdProductTypeBlank(e)&&"mediaviewer_banner"!==t||t===r.default.ADHESION_BOTTOM)},log(t){this.auditLog.push(t)},viewAuditLog(){this.auditLog.forEach(t=>{console.log(t)})},hasStartedAnApsRefreshRequest(){return 1<this.requestCount},isFirstApsRequestForSlot(t){return 1===this.requestCountBySlotName.get(t)},cleanApsSlotInfoMap(t){var e={};if(t)for(var i in t){var n=t[i];e[i]={slotId:n.slotId||n.apsSlotId,slotName:n.slotName||n.apsSlotName,slotParams:n.slotParams||n.apsSlotParams}}return e},forceAaxRender(){this.APS_AAX_AD_TYPES=[]},forceApsRender(){this.APS_AAX_AD_TYPES=["SD","House","other"]},forceDefaultRender(){this.APS_AAX_AD_TYPES=["SD","House"]},block3PForMediaviewerBanner(){this.SLOT_BLOCK_LIST.add("mediaviewer_banner")}}},{"./ads-csa":125,"./responsive-ad-api/constants":155,"./responsive-ad-api/responsive-ad-api":160,"./slot-names":169}],133:[function(t,e,i){Object.defineProperty(i,"__esModule",{value:!0}),i.initAndBindResponsiveBackupLogic=function(t){if(void 0!==t.tarnhelm_backup)(0,n.handleTarnhelmBackupImg)(t);else{if(void 0===t.backup_static)return!1;(0,o.handlePremiumStaticResponsiveBackup)(t)}return!0};var n=t("./tarnhelm-backup"),o=t("./non-tarnhelm-backup")},{"./non-tarnhelm-backup":152,"./tarnhelm-backup":172}],134:[function(t,e,i){function r(t,e,i,n,o){t&&t()?(t=i())?o(t):n():e()}Object.defineProperty(i,"__esModule",{value:!0}),i.bindBackupImage=function(t,e,i,n,o,s){r(e,i,n,o,s),t.parent.onresize=function(){r(e,i,n,o,s)}}},{}],135:[function(t,e,i){Object.defineProperty(i,"__esModule",{value:!0}),i.backupImagesEnabled=h,i.isResponsiveBackupSlot=function(t){return d(t)||l(t)},i.shouldShowBackupDesktop=u,i.shouldShowBackupMobileWeb=c,i.shouldShowBackupSupplierResponsive=function(t){return function(){return h(t)&&((0,o.isInternetExplorer)()||(0,o.isIpad)()||u(t)||c(t))}};var n=(i=t("./is-responsive"))&&i.__esModule?i:{default:i},o=t("./site-util"),s=t("./slot-util");let r=1024,a=767;function d(t){return(0,o.isDesktop)()&&(0,n.default)(t)&&(0,s.isInline40)(t)}function l(t){return(0,o.isMobile)()&&(0,n.default)(t)&&(0,s.isInline40)(t)}function u(t){return d(t)&&(0,o.getBrowserWidth)(t)<r}function c(t){return l(t)&&(0,o.getBrowserWidth)(t)>a}function h(t){return!(t&&t.imdbCreativeModel&&t.imdbCreativeModel.disableBackupImages)}},{"./is-responsive":151,"./site-util":167,"./slot-util":170}],136:[function(t,e,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t){return btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,function(t,e){return String.fromCharCode("0x"+e)}))}},{}],137:[function(t,e,i){function n(){var t;if(l()&&a.JSON){if(t=l().getItem(h))try{return JSON.parse(t)}catch(t){l().removeItem(h),console.log("Could not deserialize persistence variable")}return{}}return null}function o(t){l()&&a.JSON&&l().setItem(h,JSON.stringify(t))}function s(){var t,e=n();if(e){for(t in e)r(e[t])&&delete e[t];o(e)}}function r(t){return!(t&&t.l&&t.l>m)}var a,d,l,u,c,h,p,m;a=window,d=document,a.imdbads=a.imdbads||{},a.imdbads.frequencyCapping=(l=function(){try{return u&&!c?"undefined"!=typeof mraidbridge&&void 0!==mraidbridge.localstorage?mraidbridge.localstorage:void 0:(u&&c&&null!==a.localStorage&&(a.localStorage.setItem("foo","foo"),a.localStorage.removeItem("foo")),a.localStorage)}catch(t){}},u=/iphone|ipad|ipod/i.test(a.navigator.userAgent.toLowerCase()),c=null!==d.domain.match(/imdb/g),h="IMDbAdvertisingFrequencyCapping",p=(new Date).getTime(),m=p-864e5,a.generic&&a.generic.on_document_ready?a.generic.on_document_ready(s):"complete"===d.readyState?s():a.addEventListener("load",s,!1),{should_autoplay:function(t){var e=n();return!!e&&r(e[t])},log_autoplay:function(t){var e=n();e?(e[t]={l:p},o(e)):(console.log("Autoplay logged, but localStorage is not available!"),a.generic&&a.generic.monitoring&&a.generic.monitoring.record_event&&a.generic.monitoring.record_event("flash_persistence_failure",!0))},clear_autoplay:function(){o({})}})},{}],138:[function(t,e,i){t("../generic-init.js"),t("../document-ready.js"),t("../consolelog.js"),t("../yesScript.js"),t("../client-frequency-capping.js"),t("../ads.js"),t("../floater.js"),t("../custom-string.js"),t("../ads-slot-events.js"),t("../ads-generic-common.js"),t("../ads-monitor.js"),t("../ads-monitor-head.js"),t("../ads-amazon-csm.js"),t("../ads-async.js"),t("../parallax.js"),t("../slot-manager.js"),t("@amzn/IMDbAdvertisingStaticMedia/js/pageLoad.js")},{"../ads-amazon-csm.js":122,"../ads-async.js":123,"../ads-generic-common.js":127,"../ads-monitor-head.js":128,"../ads-monitor.js":129,"../ads-slot-events.js":130,"../ads.js":131,"../client-frequency-capping.js":137,"../consolelog.js":140,"../custom-string.js":141,"../document-ready.js":143,"../floater.js":144,"../generic-init.js":145,"../parallax.js":153,"../slot-manager.js":168,"../yesScript.js":174,"@amzn/IMDbAdvertisingStaticMedia/js/pageLoad.js":2}],139:[function(t,e,i){t("./ads.js"),t("@amzn/tarnhelmjs/dist/js/tarnhelm")},{"./ads.js":138,"@amzn/tarnhelmjs/dist/js/tarnhelm":83}],140:[function(t,e,i){window.consoleLog=function(t,e,i){var n=window.consoleLog,o=document.location.hash.match("debug=1"),o="error"===i||o;e?(n[e]=n[e]||[]).push(t):e="global",e=e+" : "+t,(n.global=n.global||[]).push(e);try{o&&window.console&&(window.console[i]?window.console[i](e):window.console.log&&window.console.log(e))}catch(t){}},window.consoleWarn=function(t,e){consoleLog(t,e,"warn")},window.consoleError=function(t,e){consoleLog(t,e,"error")}},{}],141:[function(t,e,i){var n;n=window,document,(n.custom=n.custom||{}).strings={chained_replace:function(t){for(var e=this,i=0;i<t.length;i++)var n=t[i],e=e.replace(n[0],n[1]);return e}}},{}],142:[function(t,e,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(i,t){let n=new Date((new Date).toDateString()).valueOf(),o=[],s=0,r=0,a=0,d;for(let e=0;e<i.length;e++)try{var l=i[e].startDate,u=i[e].endDate,c=null==l||""===l,h=null==u||""===u;c&&h?t?d=e:o.push(e):(s=c?0:new Date(l.replace(/-/g,"/")).valueOf(),r=h?n+1:new Date(u.replace(/-/g,"/")).valueOf(),t&&(0===s||s<=n&&s>a)&&(a=s,d=e),!t&&s<=n&&r>n&&o.push(e))}catch(t){"consoleLog"in window&&window.consoleLog("Date checking failed for "+i[e].toString()+" with error: "+t.toString(),"ppb","error"),window.ueLogError&&window.ueLogError(t)}return t?d:o}},{}],143:[function(t,e,i){var n;(n=window.generic).install(n,{document_readys:[],document_is_ready:function(){var t,e=n.document_readys;if((n.document_readys=null)!==e)for(t=0;t<e.length;t++)try{e[t](jQuery)}catch(t){}n.should_jQuery_noConflict&&jQuery.noConflict(!1)},on_document_ready:function(t){n.has_document_readied()?t(jQuery):n.document_readys.push(t)},has_document_readied:function(){return null===n.document_readys},vanilla_on_document_ready:function(e){"complete"===document.readyState||"loaded"===document.readyState||"interactive"===document.readyState?e():window.addEventListener("DOMContentLoaded",t=>{e()})}})},{}],144:[function(t,e,i){var l,u,c=(t=t("./ads-dom-utils"))&&t.__esModule?t:{default:t};t=window,l=document,(u=t.custom=t.custom||{}).floater={close:function(t){t=l.getElementById(t);t.style.width="0px",t.style.height="0px"},launch:function(t,e,i,n,o,s,r,a){var d=l.createElement("iframe"),i="string"==typeof i?l.getElementById(i):i;"none"!==e&&setTimeout(function(){u.floater.close(s)},1e3*e),generic.extend(d,{id:s,name:s,className:a,width:t[0]+"px",height:t[1]+"px",frameBorder:"0",scrolling:"no",allowTransparency:"true",style:{marginLeft:o[0]+"px",marginTop:o[1]+"px",zIndex:o[2],position:"absolute"}}),n(d,i),c.default.isFirefox()?d.onload=function(){var t=c.default.frameDoc(d);c.default.appendContentToIframeDoc(t,r)}:setTimeout(function(){var t=c.default.frameDoc(d);c.default.appendContentToIframeDoc(t,r)},0)},set:function(t,e,i,n,o,s,r){var a="floater_"+Math.ceil(9999999*Math.random());return u.floater.launch(e,i,n,o,s,a,t,"floater_"+r),a}}},{"./ads-dom-utils":126}],145:[function(t,e,i){window.generic=window.generic||{},window.generic.install=function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])}},{}],146:[function(t,e,i){Object.defineProperty(i,"__esModule",{value:!0}),i.globalizeCss=function(t){if(t){var e=t.top.document.body,i=t.document.getElementsByClassName(a),n=(0,r.getSlotName)(t)+"-imdb-adtech-global-css",o=e.getElementsByClassName(n);if(e){for(let t=0;t<o.length;t++)e.removeChild(o[t]);for(let t=0;t<i.length;t++){var s=i[t];s.classList.add(n),e.prepend(s)}}}};var r=t("./slot-util");let a="imdb-adtech-global-css"},{"./slot-util":170}],147:[function(t,e,i){Object.defineProperty(i,"__esModule",{value:!0}),i.makeAdSlotsCall=function(t,e,o,s,r){if("undefined"!=typeof window&&(window.AdSlots={},window.AdSlotsLoading=!0,t)&&!window.hasAdAJAXCallFired){let n=window.top.ad_utils.constructClientSideUrl(e,o,s);if(n){let i=window.top.ad_utils.constructCurrentSlotSizeMap(o,s,window.innerWidth);if(!window.top.ad_utils.getAdsForSlotsUrl||window.top.ad_utils.getAdsForSlotsUrl!==n){window.hasAdAJAXCallFired=!0,"function"==typeof window.uet&&(window.uet("bb",l,{wb:1}),(0,d.logCSAWidgetEvent)(l,d.CSA_MARKERS.WIDGET_BEGIN),(0,d.logCSAWidgetEvent)(l,d.CSA_MARKERS.CLICK_TO_BODY_BEGIN));try{let e=new XMLHttpRequest;e.onreadystatechange=function(){var t;4===this.readyState&&200===this.status&&(window.ue&&"function"==typeof window.ue.count&&window.ue.count(l,0),t=JSON.parse(e.responseText),window.AdSlots={...window.AdSlots,...t.slotsMap},window.AdSlotsLoading=!1,window.top.ad_utils.getAdsForSlotsUrl=n,window.top.ad_utils)&&window.top.ad_utils.responsiveAdAPI&&window.top.ad_utils.responsiveAdAPI.handleAdServiceResponse(t,void 0,r,i),"function"==typeof window.uex&&(window.uex("ld",l,{wb:1}),(0,d.logCSAWidgetEvent)(l,d.CSA_MARKERS.LOADED),(0,d.logCSAWidgetEvent)(l,d.CSA_MARKERS.CLICK_TO_LOADED))},e.onerror=function(t){t.logLevel="WARN",t.signature=a.NO_AD_TO_LOAD_EVENT_NAME,t.message="http request blocked by client",u(t),window.mediaOrchestrator&&Object.keys(s).forEach(function(t){window.mediaOrchestrator.publish(a.NO_AD_TO_LOAD_EVENT_NAME,{slotName:t,timestamp:Date.now(),type:"",dispatcher:"ajax-request"})})},e.open("GET",n,!0),e.withCredentials=!0,e.send()}catch(t){u(t)}}window.hasAdAJAXCallFired=!1}}};var a=t("./responsive-ad-api/constants"),d=t("./ads-csa");let l="AdAJAXRequest",u=t=>{window.ue&&"function"==typeof window.ue.count&&window.ue.count(l,1),window.ueLogError&&(t.attribution="Advertising",window.ueLogError(t))}},{"./ads-csa":125,"./responsive-ad-api/constants":155}],148:[function(t,e,i){Object.defineProperty(i,"__esModule",{value:!0}),i.getImage=l,i.getSize=u,i.responsiveImageGenerator=function(i,n,o,s,r,a,d){return function(){var t,e=l(i,n);return void 0!==e&&e?(t=u(i,r,a,d),'<a href="'+o+'" target="'+s+'"><img src="'+e+'" width="'+t.width+'" height="'+t.height+'" border=0 /></a>'):e}};var o=t("./site-util");function l(t,e){return!(0,o.isIpad)()&&!(0,o.isInternetExplorer)()||t?t:e}function u(t,e,i,n){return!(0,o.isIpad)()&&!(0,o.isInternetExplorer)()||t?(t=n.split("x")).length<2?{width:0,height:0}:{width:t[0],height:t[1]}:{width:e,height:i}}},{"./site-util":167}],149:[function(t,e,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t){t=t.getBoundingClientRect();return 0<=t.top&&0<=t.left&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}},{}],150:[function(t,e,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(t){return!!t&&-1<t.toLowerCase().indexOf("_refresh")}},{}],151:[function(t,e,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window;return null!==t.top.document.getElementById("__next")||null!==t.parent.document.getElementById("__next")}},{}],152:[function(t,e,i){Object.defineProperty(i,"__esModule",{value:!0}),i.handlePremiumStaticResponsiveBackup=function(e){let t=e.backup_static||{},i=t.adLinkId||"static-ad-link",n=t.backupLinkId||"static-backup-link",o=t.additionalHtml||"static-extra-html",s=t.responsiveImage||"",r=t.size||"0x0",a=t.renderWidth||0,d=t.renderHeight||0,l=t.adState="",u=(0,c.shouldShowBackupSupplierResponsive)(e);(0,p.bindBackupImage)(e,u,function(){(0,c.isResponsiveBackupSlot)(e)&&"ad"!==l&&((0,h.uncollapseAd)(e.frameElement),(0,h.collapseElement)(e,n),(0,h.uncollapseElement)(e,i),(0,h.uncollapseElement)(e,o),(0,g.isMobile)()?((0,m.removeWrapperSize)(e),(0,m.mobileWebCreativeResizing)(e,a,d)):(0,m.scaleWrapperToWidth)(e,a,a,d),l="ad")},function(){return s},function(){"collapsed"!==l&&((0,h.collapseAd)(e.frameElement),l="collapsed")},function(){var t;"backup"!==l&&((0,h.uncollapseAd)(e.frameElement),t=(0,f.getSize)(s,0,0,r),(0,m.scaleWrapperToWidth)(e,t.width,t.width,t.height),(0,h.uncollapseElement)(e,n),(0,h.collapseElement)(e,i),(0,h.collapseElement)(e,o),l="backup")})};var c=t("./backup-util"),h=t("./ad-visibility-util"),p=t("./backup-img"),m=t("./scale"),f=t("./img-generator"),g=t("./site-util")},{"./ad-visibility-util":121,"./backup-img":134,"./backup-util":135,"./img-generator":148,"./scale":166,"./site-util":167}],153:[function(t,e,i){var s,r;s=window,r=document,s.custom.parallax={init:function(o){s.generic.on_document_ready(function(){var t=o.getElementById("parallax"),e=r.getElementById("root"),t=(generic.insert_before(t,e),o.getElementById("skrollr_core_src").innerHTML);r.getElementById("skrollr_core_dest").innerHTML=t,s.skrollr&&s.skrollr.init({mobileCheck:function(){return!1},smoothScrolling:!0});for(var i=1;i<=10;i++){var n=r.getElementById("parallax_layer"+i);n&&(custom.parallax.seen["parallax_layer"+i]={obj:n,seen:!1})}r.addEventListener("scroll",custom.parallax.scrollListener)})},seen:{},interactionTrackers:{},scrollListener:function(){for(var t,e=1;e<=10;e++)(t=custom.parallax.seen["parallax_layer"+e])&&!t.seen&&t.obj.getBoundingClientRect().top-r.documentElement.clientHeight<-100&&((new Image).src=custom.parallax.interactionTrackers["parallax_layer"+e],t.seen=!0)}}},{}],154:[function(t,e,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(n){n.addEventListener("click",function(){var e=n.getAttribute("data-ct-count");if(e&&0<e)for(let t=0;t<e;t++){var i=n.getAttribute("data-ct-"+t);i&&((new Image).src=i)}})}},{}],155:[function(t,e,i){Object.defineProperty(i,"__esModule",{value:!0}),i.WRAP_BACKGROUND_STYLE_TAG_ID=i.WRAP_BACKGROUND_DIV_TAG_ID=i.TITLE_PAGE_TYPE=i.THIRD_PARTY_AD_DETECTED_EVENT_TYPE=i.PRIMARY_ADS_LOADED_EVENT_NAME=i.PLAY=i.PLAID_STYLE_OVERRIDES_ID=i.PLACEHOLDER_SUFFIX=i.PAGE_WRAPPER_CLASSNAME=i.NO_PRIMARY_ADS_TO_LOAD_EVENT_NAME=i.NO_AUTOPLAY_VIDEO_DETECTED_EVENT_TYPE=i.NO_AD_TO_LOAD_EVENT_NAME=i.NAME_PAGE_TYPE=i.MEDIA_PLAYBACK_EVENT_NAME=i.LOADSTART=i.LARGE_BREAKPOINT=i.INLINE20_PAGE_BACKGROUND_CLASS=i.HOME_PAGE_TYPE=i.BLANK=i.AUTOPLAY_VIDEO_MAYBE_PRESENT_EVENT_TYPE=i.AD_LOADED_EVENT_NAME=void 0;i.AD_LOADED_EVENT_NAME="adLoaded",i.AUTOPLAY_VIDEO_MAYBE_PRESENT_EVENT_TYPE="1P-ad-autoplay-video-maybe-present",i.BLANK="blank",i.HOME_PAGE_TYPE="home",i.INLINE20_PAGE_BACKGROUND_CLASS="inline20-page-background",i.LARGE_BREAKPOINT=1024,i.LOADSTART="loadstart",i.MEDIA_PLAYBACK_EVENT_NAME="mediaPlaybackEvent",i.PAGE_WRAPPER_CLASSNAME="ipc-page-wrapper",i.PRIMARY_ADS_LOADED_EVENT_NAME="primaryAdsLoaded",i.NO_AD_TO_LOAD_EVENT_NAME="noAdToLoad",i.NO_AUTOPLAY_VIDEO_DETECTED_EVENT_TYPE="no-autoplay-video-ad-detected",i.NO_PRIMARY_ADS_TO_LOAD_EVENT_NAME="noPrimaryAdsToLoad",i.PLAY="play",i.PLAID_STYLE_OVERRIDES_ID="plaid-style-overrides-id",i.THIRD_PARTY_AD_DETECTED_EVENT_TYPE="3P-ad-no-autoplay-video-detected",i.TITLE_PAGE_TYPE="title",i.NAME_PAGE_TYPE="name",i.WRAP_BACKGROUND_DIV_TAG_ID="ipc-wrap-background-id",i.WRAP_BACKGROUND_STYLE_TAG_ID="wrap-background-styles",i.PLACEHOLDER_SUFFIX="placeholderPattern"},{}],156:[function(t,e,i){Object.defineProperty(i,"__esModule",{value:!0}),i.getAdVideoAutoplayBufferInterval=function(){return this.adVideoAutoplayBufferInterval},i.getHasPremiumAd=function(){return this.hasPremiumAd},i.getLastAAXResponse=function(){return this.lastAAXResponse},i.getLastAdResponse=function(){return this.lastAdResponse},i.getPlaidOverrides=function(){return this.plaidOverrides},i.getPreviousWindowWidth=function(){return this.previousWindowWidth},i.getRefreshedSlotWrapperId=function(t){return t+"_refresh_wrapper"},i.getResponsiveResizingDisabledSlotsMap=function(){return this.responsiveResizingDisabledSlotsMap},i.getSlotPlaceholderId=function(t){return""+(t+n.PLACEHOLDER_SUFFIX)},i.getSlotResponsiveWrapperId=function(t){return t+"_responsive_wrapper"},i.getSlotWrapperId=function(t){return t+"_wrapper"};var n=t("./constants")},{"./constants":155}],157:[function(t,e,i){function n(t){return Promise.resolve(t)}function o(t){return Promise.reject(t)}Object.defineProperty(i,"__esModule",{value:!0}),i.mediaOrchestratorBridge=i.INTRA_AD_VIDEO_PLAYER_BUFFER=void 0;i.INTRA_AD_VIDEO_PLAYER_BUFFER=300;let s="setMinimalVideoEnded";i.mediaOrchestratorBridge={isMediaOrchestratorBridge:!0,timers:{},getCurrentlyPlayingAsset(){return window.MediaOrchestrator_V1?n(window.MediaOrchestrator_V1.getCurrentlyPlayingAsset()):o(null)},requestPlayback(t){return window.MediaOrchestrator_V1?n(window.MediaOrchestrator_V1.requestPlayback(t)):o(!1)},setMediaPlay(t,e){return e&&e.isReely&&window.ad_utils.mediaOrchestratorBridge.timers[s]&&clearTimeout(window.ad_utils.mediaOrchestratorBridge.timers[s]),window.MediaOrchestrator_V1?n(window.MediaOrchestrator_V1.setMediaPlay(t)):o(!1)},setMediaPaused(t){return window.MediaOrchestrator_V1?n(window.MediaOrchestrator_V1.setMediaPaused(t)):o(!1)},setMediaEnded(t,e){function i(){return window.MediaOrchestrator_V1?n(window.MediaOrchestrator_V1.setMediaEnded(t)):o(!1)}return e&&e.isMinimalVideo?(window.ad_utils.mediaOrchestratorBridge.timers[s]=setTimeout(i,300),Promise.resolve(!0)):i()},subscribe(t){var e;return!!t.onMediaPermissionsChanged&&(e=t.name,window.MediaOrchestrator_V1)&&window.MediaOrchestrator_V1.subscribeToNotifications(e,t.onMediaPermissionsChanged)},updateAssetFrameLocation(t,e){return window.MediaOrchestrator_V1?n(window.MediaOrchestrator_V1.updateAssetFrameLocation(t,e)):o(!1)}}},{}],158:[function(t,e,i){Object.defineProperty(i,"__esModule",{value:!0}),i.initializeMediaOrchestrator=function(){"undefined"!=typeof window&&(window.mediaOrchestrator=n);(()=>{let e=[],i=!1,n=!1;window.mediaOrchestrator.subscribe(l.AD_LOADED_EVENT_NAME,function(t){e.push(t.slotName),o.every(function(t){return e.includes(t)})&&!i&&(i=!0,window.mediaOrchestrator.publish(l.PRIMARY_ADS_LOADED_EVENT_NAME,{type:"",dispatcher:"media-orchestrator",slotName:"",timestamp:Date.now()}))}),window.mediaOrchestrator.subscribe(l.NO_AD_TO_LOAD_EVENT_NAME,function(t){o.includes(t.slotName)&&!n&&(n=!0,window.mediaOrchestrator.publish(l.NO_PRIMARY_ADS_TO_LOAD_EVENT_NAME,{type:"",dispatcher:"media-orchestrator",slotName:"",timestamp:Date.now()}))})})()},i.mediaOrchestrator=void 0;var l=t("./constants"),u=(t=t("../slot-names"))&&t.__esModule?t:{default:t};let o=[u.default.INLINE20,u.default.INLINE40],n=i.mediaOrchestrator=(()=>{let o={},s={},n={},r=o.hasOwnProperty,a=s.hasOwnProperty;function d(t,e){var i;t!==l.MEDIA_PLAYBACK_EVENT_NAME||e.slotName!==u.default.INLINE20&&e.slotName!==u.default.TOP_AD||e.type!==l.AUTOPLAY_VIDEO_MAYBE_PRESENT_EVENT_TYPE?t!==l.MEDIA_PLAYBACK_EVENT_NAME||e.slotName!==u.default.INLINE20&&e.slotName!==u.default.TOP_AD||e.type!==l.LOADSTART&&e.type!==l.PLAY||(t=e.slotName,n[t]&&clearTimeout(n[t])):(t=function(t){window.mediaOrchestrator.publish(l.MEDIA_PLAYBACK_EVENT_NAME,{type:l.NO_AUTOPLAY_VIDEO_DETECTED_EVENT_TYPE,dispatcher:"media-orchestrator",slotName:t,timestamp:Date.now()})}.bind(null,e.slotName),e=e.slotName,t=t,i=2e3,n[e]=setTimeout(t,i))}return{getEventsLogForEvent(t){return void 0!==s[t]?s[t].slice():[]},subscribe(t,e){r.call(o,t)||(o[t]=[]);let i=o[t].push(e)-1;return{remove(){delete o[t][i]}}},publish(t,e){var i,n;r.call(o,t)||(o[t]=[]),i=t,n=e,a.call(s,i)||(s[i]=[]),s[i].push(n),d(t,e),o[t].forEach(function(t){t(void 0!==e?e:{})})}}})()},{"../slot-names":169,"./constants":155}],159:[function(t,e,i){Object.defineProperty(i,"__esModule",{value:!0}),i.startSlotRenderMonitoring=function(r){((t,e)=>{t=t.replace("_refresh",""),n.has(t)&&clearInterval(n[t]),e=setInterval(e,o),n.set(t,e)})(r,()=>{{var n=r,o;let t=n.replace("_refresh",""),e=t+"_responsive_wrapper",i=document.getElementById(e);if(i){let t=0,e=0;for(var s of i.children)(t=>t&&t.checkVisibility&&t.checkVisibility()&&t.getBoundingClientRect&&0<t.getBoundingClientRect().width&&0<t.getBoundingClientRect().height)(s)&&(o=new RegExp("div-gpt-ad-.*"),new RegExp(n+".*_wrapper").test(s.id)||o.test(s.id)?t++:s.classList.contains("placeholder_pattern")||e++);1<t&&(t=>{window.ue&&window.ue.count&&"function"==typeof window.ue.count&&t&&(window.ue.count("imdb:adRender:multipleVisibleAds:slotName:"+t,1),window.ue.count("imdb:adRender:multipleVisibleAds:aggregate",1))})(n),0<e&&(t=>{window.ue&&window.ue.count&&"function"==typeof window.ue.count&&t&&(window.ue.count("imdb:adRender:unexpectedVisibleElement:slotName:"+t,1),window.ue.count("imdb:adRender:unexpectedVisibleElement:aggregate",1))})(n)}}})};let n=new Map,o=1e4},{}],160:[function(t,e,i){Object.defineProperty(i,"__esModule",{value:!0}),i.initializeResponsiveAdApi=function(){(0,n.initializeVideoEventsMessageListeners)(),(0,o.initializeMediaOrchestrator)()},i.responsiveAdAPI=void 0;var l=(s=t("../slot-names"))&&s.__esModule?s:{default:s},n=t("./video-events"),o=t("./media-orchestrator"),s=m(t("./getters")),r=m(t("./setters")),a=t("./constants"),d=t("./sticky-ads"),u=t("../aps-auction-manager"),c=t("./sponsor-label"),h=t("./render-monitoring");function p(t){var e,i;return"function"!=typeof WeakMap?null:(e=new WeakMap,i=new WeakMap,(p=function(t){return t?i:e})(t))}function m(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};e=p(e);if(e&&e.has(t))return e.get(t);var i,n,o={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(i in t)"default"!==i&&{}.hasOwnProperty.call(t,i)&&((n=s?Object.getOwnPropertyDescriptor(t,i):null)&&(n.get||n.set)?Object.defineProperty(o,i,n):o[i]=t[i]);return o.default=t,e&&e.set(t,o),o}let f=i.responsiveAdAPI={adVideoAutoplayBufferInterval:1e3,hasPremiumAd:null,lastAAXResponse:null,lastAdResponse:null,plaidOverrides:null,previousWindowWidth:0,responsiveResizingDisabledSlotsMap:{},...s,...r,shouldMakeAdSticky:d.shouldMakeAdSticky,makeAdSticky:d.makeAdSticky,updateSponsoredLabel:c.updateSponsoredLabel,clearData(){this.hasPremiumAd=null,this.lastAdResponse=null,this.plaidOverrides=null,this.previousWindowWidth=0,this.responsiveResizingDisabledSlotsMap={}},clearPageStyles(){g(a.PLAID_STYLE_OVERRIDES_ID)},clearWrapBackgroundStyles(){g(a.WRAP_BACKGROUND_STYLE_TAG_ID)},collapseAd(t){"undefined"!=typeof document&&(t=document.getElementById(this.getSlotResponsiveWrapperId(t)))&&(t.style.display="none")},dangerouslySetHTML(e,i,n,o){if("undefined"!=typeof document){i=i||document.getElementById(n);if(null!==(i=((t,e)=>{let i=t;return e===f.getSlotResponsiveWrapperId(l.default.INLINE40)&&(t=document.getElementsByClassName(l.default.INLINE40_SIDEBAR)[0],e=document.getElementsByClassName(l.default.INLINE40_MAIN)[0],window.innerWidth<a.LARGE_BREAKPOINT&&e?i=e:t&&(i=t)),i})(i,n))){let t=e;f.isAPSEnabled()&&(n=((t,e)=>{let i="",n=document.getElementById(t);return n&&t!==f.getSlotResponsiveWrapperId(l.default.PROVIDER_PROMOTION)&&(t=t.replace("_responsive_wrapper",""),i=(i=(i+=(t=>{let e="",i=document.getElementById(t+"_placeholder_styles");return i&&(e+=i.outerHTML),e})(t))+((t,e)=>{let i="";return t&&(t=document.getElementById(f.getSlotPlaceholderId(e)))&&((e=t.cloneNode(!0)).style.position="absolute",e.style.removeProperty("display"),e.classList.remove("placeholder_fadeout"),i+=e.outerHTML),i})(n,t))+((t,i)=>{let n="";return t&&(t=((t,e)=>{if(!t)return null;var i=t.getElementsByTagName("div"),n=[];for(let t=0;t<i.length;t++){var o=i[t];o.id&&o.id.startsWith(e)&&n.push(o)}return n})(t,"div-gpt"))&&0<t.length&&t.forEach(t=>{var e=t.cloneNode(!0);t.id.includes("_refresh")?(u.apsAuctionManager.log("Copied google div with "+t.id),e.innerHTML="",n+=e.outerHTML):(u.apsAuctionManager.log("Trying to remove google ad slot with id "+t.id),u.apsAuctionManager.hasStartedAnApsRefreshRequest()&&((e=u.apsAuctionManager.getGoogleSlotFromApsSlotName(i))&&(googletag.destroySlots([e]),u.apsAuctionManager.log("Called destroySlots on "+t.id)),t.remove()))}),n})(n,e)),i})(n,o))&&(t=n+e);o=document.createRange();o.selectNodeContents(i),o.deleteContents(),i.appendChild(o.createContextualFragment(t))}}},events:{queues:{adIframeLoad:{},adSlotMount:{},adSlotUnmount:{}},adIframeLoad(t){this.queues.adIframeLoad[t]=!0,t=t,window.mediaOrchestrator&&window.mediaOrchestrator.publish(a.AD_LOADED_EVENT_NAME,{type:"",dispatcher:"responsive-ad-api",slotName:t,timestamp:Date.now()})},adSlotMount(t){"function"==typeof window.uet&&window.uet("bb","adSlotMount",{wb:1}),"function"==typeof this.queues.adSlotMount[t]?this.queues.adSlotMount[t]():this.queues.adSlotMount[t]=!0,"function"==typeof window.uex&&window.uex("ld","adSlotMount",{wb:1})},adSlotUnmount(t){this.queues.adSlotMount[t]=!1},video:{}},getPageType(){var t=document.head?document.head.querySelector("meta[property$='pageType']"):null;return t?t.content:""},getSubPageType(){var t=document.head?document.head.querySelector("meta[property$='subpageType'], meta[property$='subPageType']"):null;return t?t.content:""},handleAAXResponse(t){this.setLastAAXResponse(t)},shouldRunApsAuction(t){return!this.isRobotRequest(!0)&&!this.hasPremiumAd&&window.apstag&&window.googletag&&t&&0<Object.keys(t).length},handleAdServiceResponse(t,e,i,n){var o=t&&t.slotsMap?t.slotsMap:t,i=u.apsAuctionManager.cleanApsSlotInfoMap(i);this.setLastAdResponse(t),o&&(this.shouldRunApsAuction(i)?(t=window.googletag||{},u.apsAuctionManager.apsSlotInfoMap=i,i=u.apsAuctionManager.getApsEnabledSlots(o,i),u.apsAuctionManager.log("Created potential Aps Ads for: "+Object.keys(i)),u.apsAuctionManager.runApsAuctionFlow(t,i,n),this.renderAaxAds(o,e,i)):this.renderAaxAds(o,e))},renderAaxAds(t,e,i){for(var n in t[l.default.INLINE20]&&this.clearWrapBackgroundStyles(),e&&e.shouldClearPageStyles&&this.clearPageStyles(),t)i&&i.hasOwnProperty(n)&&u.apsAuctionManager.aaxResponseIsLessValuableThanApsBid(t[n].creativeMetadata)?u.apsAuctionManager.log("Delaying render for "+n):(u.apsAuctionManager.log("Short-circuit render for "+n),this.renderAd(n,t[n])),(0,h.startSlotRenderMonitoring)(n)},isBlankAd(t){t=t?t.creativeMetadata:null;return!!t&&(this.isAdProductTypeBlank(t)||0===t.creativeHeight||-1===t.creativeHeight)},isAdProductTypeBlank(t){return!(!t||!t.adProductType||t.adProductType.name!==a.BLANK)},queueFunc(t,e,i){this.events.queues[t][e]?i():this.events.queues[t][e]=i},renderAd(n,o){if("undefined"!=typeof document&&(n!==l.default.INTERSTITIAL||!this.isBlankAd(o))){var s=o.slotMarkup;let t=n;u.apsAuctionManager.hasStartedAnApsRefreshRequest()&&(t=n.replace("_refresh",""));var r=this.getSlotResponsiveWrapperId(t),a=document.getElementById(r),d=u.apsAuctionManager.apsSlotInfoMap[n]&&u.apsAuctionManager.apsSlotInfoMap[n].slotName;let e=()=>{},i=(a?this.setVisibility(n,o):e=this.setVisibility.bind(this,n,o),s?this.dangerouslySetHTML.bind(null,s,a,r,d):()=>{});this.queueFunc("adSlotMount",t,()=>{i(),e()})}},setVisibility(t,e){this.isBlankAd(e)?this.collapseAd(t):this.unCollapseAd(t)},triggerCustomEvent(e,i){if("undefined"!=typeof window){let t;"function"==typeof CustomEvent?t=new CustomEvent(e,{detail:i}):(t=document.createEvent("CustomEvent")).initCustomEvent(e,!1,!1,i),window.dispatchEvent(t)}},toggleAutoRefreshPauseState(){var t=new CustomEvent("toggleAutoRefreshPauseState");window.top.dispatchEvent(t)},unCollapseAd(t){"undefined"!=typeof document&&(t=document.getElementById(this.getSlotResponsiveWrapperId(t)))&&"none"===t.style.display&&(t.style.display="flex")},isAPSEnabled(){return!this.isRobotRequest(!1)&&!this.hasPremiumAd&&!(!window.apstag||!window.googletag)},isRobotRequest(t){let e=!1;return!window.Cypress&&(navigator&&(e=!(!navigator.webgl&&!navigator.webdriver)),t&&f.logRobotRequestDetectionMetric(e?1:0),e)},logRobotRequestDetectionMetric(t){window.ue&&window.ue.count&&"function"==typeof window.ue.count&&window.ue.count("aps_robotic_request_detection:isRobotRequest",t)}};function g(t){"undefined"!=typeof document&&(t=document.getElementById(t))&&t.remove()}},{"../aps-auction-manager":132,"../slot-names":169,"./constants":155,"./getters":156,"./media-orchestrator":158,"./render-monitoring":159,"./setters":161,"./sponsor-label":162,"./sticky-ads":163,"./video-events":164}],161:[function(t,e,i){function n(t){return!t||0===Object.keys(t).length}Object.defineProperty(i,"__esModule",{value:!0}),i.isEmpty=n,i.setAdVideoAutoplayBufferInterval=function(t){this.adVideoAutoplayBufferInterval=t},i.setHasPremiumAd=function(t){"boolean"==typeof t&&(this.hasPremiumAd=t)},i.setLastAAXResponse=function(t){this.lastAAXResponse=t},i.setLastAdResponse=function(t){t.slotsMap&&(this.lastAdResponse={slots:t.slotsMap});this.setHasPremiumAd(t.hasPremium),this.setPlaidOverrides(t.plaidOverrides),this.setResponsiveResizingDisabledSlotsMap(t)},i.setPlaidOverrides=function(t){n(t)||(this.plaidOverrides=t,this.triggerCustomEvent("clientSidePlaidOverride",t))},i.setPreviousWindowWidth=function(){this.previousWindowWidth=window.innerWidth},i.setResponsiveResizingDisabledSlotsMap=function(t){t.slotsMap&&Object.keys(t.slotsMap).forEach(t=>{delete this.responsiveResizingDisabledSlotsMap[t]});let e=t.responsiveResizingDisabledSlotsMap;e&&Object.keys(e).forEach(t=>{this.responsiveResizingDisabledSlotsMap[t]=e[t]})}},{}],162:[function(t,e,i){Object.defineProperty(i,"__esModule",{value:!0}),i.isFreeformAd=m,i.shouldUpdateSponsoredLabel=p,i.updateSponsoredLabel=h;var n=s(t("../slot-names")),o=t("./sticky-ads"),i=s(t("resize-observer-polyfill"));function s(t){return t&&t.__esModule?t:{default:t}}let r=970,a=250,d="premium-wrap",l="inline20_wrapper",u="template : IMDb Freeform Ad",c=new i.default(t=>{h(t[0].target)});function h(t){p(t)&&document.getElementById(l).classList.add(d);t=document.getElementById(n.default.INLINE20);t&&c.observe(t)}function p(t){var e,i;return!!t.id.includes(n.default.INLINE20)&&(e=(0,o.didAdSetRodeoWrap)()||(0,o.didAdSetTarnhelmWrap)(t),i=t.clientHeight>a||t.clientWidth>r,t=m(t),e||i||t)}function m(t){try{return t.contentDocument.body.innerHTML.includes(u)}catch(t){return!1}}},{"../slot-names":169,"./sticky-ads":163,"resize-observer-polyfill":119}],163:[function(t,e,i){Object.defineProperty(i,"__esModule",{value:!0}),i.didAdSetRodeoWrap=S,i.didAdSetTarnhelmWrap=c,i.getRodeoWrapStyles=C,i.isStickyEnabledAdSize=m,i.isStickyEnabledAdSizeMweb=p,i.isStickyEnabledSlotName=h,i.makeAdSticky=function(t){let e=E,i=document.querySelector("."+y.PAGE_WRAPPER_CLASSNAME),n=document.getElementById(t+"_responsive_wrapper"),o=n.getBoundingClientRect().top+window.scrollY,s=t+"-"+T,r=S(),a=`#${t}_responsive_wrapper`,d=window.scrollY,l=!1,u=!1,c=r?a:"."+y.INLINE20_PAGE_BACKGROUND_CLASS,h="";r||(h="background-color: rgba(0,0,0,0.5);");function p(t){return`
            @media screen {
                .${b} ${c} {
                    position: fixed !important;
                    height: ${n.clientHeight}px;
                    top: 0;
                    left: 0;
                    right: 0;
                    z-index: 50;
                    transition: opacity ${w}s ease-in;
                    ${t?"opacity: 1 !important;":""}
                    ${h}
                }
                .${b}.${y.PAGE_WRAPPER_CLASSNAME} {
                    top: ${n.clientHeight}px;
                }
                /* P70615346 - Apply page wrapper styles to RVI widget (below page wrapper) */
                .${b}.${y.PAGE_WRAPPER_CLASSNAME} + section {
                    margin-top: ${n.clientHeight}px;
                }
            }
        `}{var m;window.generic.add_css_style(p(!0),s,"a"),r&&(t=C(),m=t.backgroundImage,m=m&&"none"!==m?m:"",t=t.backgroundColor||"",window.generic.add_css_style(`
            @media screen and (min-width: ${y.LARGE_BREAKPOINT}px) {
                .${b} #${y.WRAP_BACKGROUND_DIV_TAG_ID}, .${b} ${a} {
                    background: ${m} fixed top no-repeat ${t} !important;
                    background-position-y: -56px !important;
                }
            }
        `,s))}function f(){d=window.scrollY,l||(window.requestAnimationFrame(()=>{_(d),l=!1}),l=!0)}document.addEventListener("scroll",f);let g=document.querySelector(c);function v(){u?(g.style.opacity=0,setTimeout(function(){g.style.opacity=1,i.classList.remove(b),u=!1},A)):(g.style.opacity=1,i.classList.remove(b),u=!1)}function _(t){!u&&t>o?(g.style.opacity=0,setTimeout(function(){i.classList.add(b),u=!0},0)):u&&t<=o&&v()}_(d),e&&setTimeout(function(){window.generic.add_css_style(p(!1),s,"o"),v(),document.removeEventListener("scroll",f)},e)},i.shouldMakeAdSticky=function(t,e){if(!window.ad_utils.isResponsive())return!1;if(window.ad_utils.responsiveAdAPI.getHasPremiumAd())return!1;if(!h(t.id))return!1;if(c(t))return!1;return p(t,e)||m(t,e)};var y=t("./constants"),n=s(t("../slot-names")),o=s(t("../is-refresh-slot"));function s(t){return t&&t.__esModule?t:{default:t}}let b="fixed-wrap",r=970,a=250,d=""+r,l=""+a,w=.3,A=1e3*w,E=3e3,T="sticky-wrap-styles",u=135;function S(){var t=C();return!(!t||!(t.backgroundImage&&"none"!==t.backgroundImage||t.backgroundColor&&!["#000","#000000","rgb(0, 0, 0)","rgb(0, 0, 0, 0)","rgba(0, 0, 0, 0)"].includes(t.backgroundColor)))}function c(t){var e,i;return!!t&&(e=parseInt(t.style.width,10),i=parseInt(t.style.height,10),t.width===d)&&t.height===l&&e>r&&i>a}function C(){var t=document.getElementById(y.WRAP_BACKGROUND_DIV_TAG_ID);try{return window.getComputedStyle(t)}catch(t){return{}}}function h(t){return t.includes(n.default.INLINE20)&&!(0,o.default)(t)}function p(t,e){t=parseInt(t.height,10)<=u;return e?(e=parseInt(e.h,10)<=u,t&&e):t}function m(t,e){var i,t=t.width.includes(d)&&t.height.includes(l);return e?(i=e.w.toString(),e=e.h.toString(),i=i.includes(d)&&e.includes(l),t&&i):t}},{"../is-refresh-slot":150,"../slot-names":169,"./constants":155}],164:[function(t,e,i){Object.defineProperty(i,"__esModule",{value:!0}),i.initializeVideoEventsMessageListeners=function(){"undefined"!=typeof window&&window.addEventListener("message",n,!1)};var o=(i=t("../slot-names"))&&i.__esModule?i:{default:i},s=t("./constants");function n(t){var e,i,n;t&&t.origin!==window.origin||(t.data&&"video-handler"===t.data.dispatcher?(n=t.data,i=n.slotName,e=n.type,window.top.ad_utils.responsiveAdAPI.events.video[e]||(window.top.ad_utils.responsiveAdAPI.events.video[e]={}),window.top.ad_utils.responsiveAdAPI.events.video[e][i]={timestamp:n.timestamp},(i=(e=n).slotName)!==o.default.INLINE20&&i!==o.default.TOP_AD||(window.top.ad_utils.responsiveAdAPI&&window.top.ad_utils.responsiveAdAPI.triggerCustomEvent(s.MEDIA_PLAYBACK_EVENT_NAME,e),window.top.mediaOrchestrator&&window.top.mediaOrchestrator.publish(s.MEDIA_PLAYBACK_EVENT_NAME,e))):t.data&&"generic"===t.data.dispatcher&&(n=t.data,n.type===s.NO_AD_TO_LOAD_EVENT_NAME)&&window.top.mediaOrchestrator&&window.top.mediaOrchestrator.publish(s.NO_AD_TO_LOAD_EVENT_NAME,n))}},{"../slot-names":169,"./constants":155}],165:[function(t,e,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=t("./responsive-ad-api/sticky-ads"),o=a(t("./base64-encode")),n=a(t("./is-refresh-slot")),r=a(t("./slot-names")),c=t("./responsive-ad-api/getters");function a(t){return t&&t.__esModule?t:{default:t}}let d={TOP_AD:[{width:"728px",height:"90px"}],INJECTED_BILLBOARD:[{width:"970px",height:"250px"}],TOP_RHS:[{width:"300px",height:"250px"}]},l=["ia.media-imdb.com"],u=["BTF_RHS2","BOTTOM_AD","MEDIAVIEWER_BANNER","INLINE80"],h=["MEDIAVIEWER_BANNER"],p=["INTERSTITIAL"],m=["INLINE20","INLINE40","INLINE50","INLINE60","INLINE80","INLINEBOTTOM","TOP_RHS","TOP_AD"],f="ape_",g="_placement",v="data-first-party-creative-template",_=[{p:0,t:0,def:"amzn"},{p:50,t:1,def:"iab"},{p:100,t:0,def:"groupm"}],y=["openPsAdPopover","openATCModal","setPartner","sendMetrics","wrap"];class b{constructor(){this.sfSrclessIframeSizes={},this.sfAdObjs={}}isIMDbMobileDomain(){return!!window.MAsf}getSafeframeIdPrefix(){return f}getSafeframeAdObjs(){return this.sfAdObjs}injectCode(t,e){var i=this.isIMDbMobileDomain(),n=i?"MSFClient":"SFClient";this.renderAdInSF(t,e+(i?"":"<script defer>setTimeout( function(){"+n+'.getDebugInfo({key: "updateAdDetails"}); },0);<\/script>')+("<script defer>setTimeout(function(){"+n+'.customMessage("sendMetrics",JSON.stringify({"slot": "'+t+'", "event": "fireload"}));},0);<\/script>'))}getSafeframeDiv(t){return document.getElementById(f+t+g)}fireSfReflowMetric(t){var e=this.sfSrclessIframeSizes[t],i=e.w,e=e.h,n=window.top.ad_utils.get_slot_iframe(t),o=window.top.ad_utils.get_ad_object(n);window.top.ad_utils.fire_reflow_metric(t,o,i,e,n.width.replace(/px/g,""),n.height.replace(/px/g,""))}getSfAdObject(n){if(this.sfAdObjs[n])return this.sfAdObjs[n];{let i=null;var o=window.top.ad_utils.sf_ad_details[n];if(o){let t=o.width,e=o.height;t=t&&t.replace(/px/g,""),e=e&&e.replace(/px/g,""),i={aid:o.adId,cid:o.creativeId,w:t,h:e},this.sfAdObjs[n]=i}return i}}onSfAdLoad(t){var e,i=document.getElementById(`ape_${t}_iframe`),i=(window.top.ad_utils.responsiveAdAPI.events.adIframeLoad(t),(0,s.shouldMakeAdSticky)(i)&&(0,s.makeAdSticky)(r.default.INLINE20),this.getSfAdObject(t)),n=window.top.ad_utils.get_type_of_ad(i);let o;window.top.ad_utils&&window.top.ad_utils.ad_table&&(e=window.top.ad_utils.ad_table[t])&&(e.fired=!0,e.loaded=!0),null===i||"blank"!==i.scope&&"null"!==i.scope||(e=this.sfSrclessIframeSizes[t],o="0"===e.w&&"0"===e.h?0:window.generic.monitoring.get_metric_value(t,"reflow")),window.top.ad_utils.slot_events.trigger(t,"load",{duration:o,type:n})}updateAdDetails(t){t&&t.creativeId&&(window.top.ad_utils.sf_ad_details[t.slot]={},window.top.ad_utils.sf_ad_details[t.slot].creativeId=t.creativeId,window.top.ad_utils.sf_ad_details[t.slot].adId=t.adId,window.top.ad_utils.sf_ad_details[t.slot].width=t.width,window.top.ad_utils.sf_ad_details[t.slot].height=t.height)}setPartner(t){t=JSON.parse(t);t&&t.slot&&t.partner&&top&&top.generic&&top.generic.monitoring&&top.generic.monitoring.set_partner&&top.generic.monitoring.set_partner_by_slot(t.slot,t.partner)}isThirdPartyAd(t){return t&&!t.hasAttribute(v)}isSafeframeSlot(t,e){var i=this.isIMDbMobileDomain(),i=t&&-1<(i?h:u).indexOf(t.toUpperCase());return!(t&&-1<p.indexOf(t.toUpperCase()))&&(i||this.isConditionalSafeframeSlot(t,e))}isConditionalSafeframeSlot(t,e){return t&&(-1<m.indexOf(t.toUpperCase())||(0,n.default)(t.toLowerCase()))&&this.isThirdPartyAd(e)}getRawSlotName(t){let e=t;return e=t&&0===t.indexOf(this.getSafeframeIdPrefix())?t.slice(4,t.length-7):e}renderAdInSF(i,n){var o=document.getElementById(i);if(null!==o){var s=o.parentElement,r=o.getAttribute("data-original-width"),a=o.getAttribute("data-original-height"),n=(this.sfSrclessIframeSizes[i]={w:r,h:a},this.createAdDetailsObject(i,o,n));let t=s.getElementsByClassName("sponsored_label"),e=null;0<(t=0===t.length?s.getElementsByClassName("standard_sponsored_label"):t).length&&(e=t[0],s.removeChild(e)),s.removeChild(o);var o=document.createElement("div"),d=f+i+g,d=(o.setAttribute("name",d),o.setAttribute("id",d),this.isIMDbMobileDomain()),l=(d&&(l=document.createElement("div"),s.parentElement.replaceChild(l,s),l.appendChild(s),u=s.id,l.id=u,s.id="ape_"+u),d?s:o),u=(l.setAttribute("data-ad-details",JSON.stringify(n)),l.setAttribute("class","text/x-dacx-safeframe"),l.style.width=r+"px",l.style.height=a+"px",l.style.margin="0 auto",l.style.display="block",document.getElementById((0,c.getSlotPlaceholderId)(i.toLowerCase())));switch(u&&(o.style.position="relative",o.classList.add("rendered_ad_tweening")),s.appendChild(o),e&&(s.appendChild(e),s.style.width=r+"px",s.style.height=a+"px"),window.generic&&window.generic.monitoring&&((n=window.generic.monitoring.get_partner(i))&&"none"!==n||window.generic.monitoring.set_partner_by_slot(i,"3P")),i){case"injected_billboard":s.className=(s.className?s.className+" ":"")+"billboard";break;case"top_ad":window.top.ad_utils.expand_top_banner()}(d?window.MAsf:window.DAsf).loadAds(),u&&(o.classList.add("ad_fadein"),o.childNodes)&&0<o.childNodes.length&&o.childNodes[0].classList.add("ad_fadein"),window.csm&&window.top.ad_utils.fire_tagdeliver_metric&&(l=window.csm.duration(),window.top.ad_utils.fire_tagdeliver_metric(i,l)),window.ad_size_cookie&&window.ad_size_cookie.store()}}createAdDetailsObject(t,e,i){var n={},i=(n.slot=e.id,n.slotName=e.id,n.arid=e.id,n.htmlContentEncoded=(0,o.default)(i),n.serverSideFetchAd="true",n.loadAfter="",n.slot.toUpperCase()in d?n.allowedSizes=d[n.slot.toUpperCase()]:n.allowedSizes=[],n.allowedDomains=l,n.iframeClass=e.getAttribute("class"),n.iframeExtraStyle=e.getAttribute("style")||"",{}),e=(i.width=e.getAttribute("width")+"px",i.height=e.getAttribute("height")+"px",n.size=i,(i=e)&&(i.hasAttribute(v)||i.parentElement.hasAttribute(v))?n.viewabilityStandards=_:n.viewabilityStandards=[],n.aaxInstrPixelUrl=window.top.ad_utils.aax_instr_pixel_url[n.slot.toUpperCase()],window.top.ad_utils.aax_imp_pixel_url[n.slot.toUpperCase()]),i=(e&&(n.aaxImpPixelUrl=e),window.top.ad_utils.paets_loaded_pixel_url[n.slot.toUpperCase()]);return i&&(n.paetsLoadedPixelUrl=i),n.allowlistedCustomMessageEvents=y,n.allowlistedQueryParamKeys=[],n.adCreativeMetaData={adCreativeTemplateName:"IMDb"},n}}i.default=new b},{"./base64-encode":136,"./is-refresh-slot":150,"./responsive-ad-api/getters":156,"./responsive-ad-api/sticky-ads":163,"./slot-names":169}],166:[function(t,e,i){Object.defineProperty(i,"__esModule",{value:!0}),i.centerAd=function(t){t=(0,s.getSlotWrapper)(t);t&&t.style&&(t.style.marginLeft="auto",t.style.marginRight="auto")},i.mobileWebCreativeResizing=function(t,e,i){var n=(0,s.getSlotName)(t);{var o;"top_ad"!==n.toLowerCase()&&0<=i&&0<=e?(o=640*(e=i/e),e=100*e,n&&((n=(0,s.getSlotWrapper)(t)).className+=` standard_expand_ad_slot_wrapper orientation_${n.id}}`,(0,s.getSlot)(t).className+=" standard_expand_ad_slot_iframe",o=`
                @media only screen and (min-width : 641px) {
                    .orientation_${n.id} {
                        width: 640px;
                        height: ${o}px;
                    }
                }

                @media only screen and (min-width : 640px) {
                    .orientation_${n.id} {
                        width: 100vw;
                        height: ${e}vw;
                    }
                }

                .sponsored_label {
                    padding-right: 5%;
                }
            `,t.top.generic.add_css_style(o,"expand-1p-ads"))):((0,s.getSlotWrapper)(t).setAttribute("style",`height: ${i}px; display: block;`),(0,s.getSlot)(t).setAttribute("style",`height: ${i}px;`))}},i.removeWrapperSize=function(t){(t=>{t&&(t.style.removeProperty("width"),t.style.removeProperty("height"))})((0,s.getSlotWrapper)(t))},i.resizeWrapperWithOverflowHidden=function(t,e,i){var n=top.document.getElementById("wrapper");n&&(n.style.overflowX="hidden");n=(0,s.getSlotWrapper)(t);n&&(n.style.margin="auto");l(n,e,i)},i.scaleIframeToWidth=r,i.scaleTarnhelm=function(t,e,i,n){var o=(()=>window.screen&&window.screen.width&&window.screen.height&&void 0!==window.orientation?"portrait"==(90===window.orientation||-90===window.orientation?"landscape":"portrait")?Math.min(window.screen.width,window.screen.height):Math.max(window.screen.width,window.screen.height):window.innerWidth)();r(t,o,i,n),a(t,o,i,n),d(t,e,o)},i.scaleTarnhelmAd=d,i.scaleWrapperToWidth=a,i.setupContainer=l;var s=t("./slot-util");function o(t,e,i,n){t&&(t.style.height=""+i+n,t.style.width=""+e+n,t.setAttribute("data-resizeElement",""+e+n+"|"+i+n))}function r(t,e,i,n){i=Math.floor(e/i*n);t&&t.frameElement&&(t.frameElement.height=i,t.frameElement.width=e),t&&t.document&&t.document.ad&&(t.document.ad.h=i,t.document.ad.w=e),o(t.frameElement,e,i,"px")}function a(t,e,i,n){i=Math.floor(e/i*n);o((0,s.getSlotWrapper)(t),e,i,"px")}function d(t,e,i){let n={actionName:"scale-ad-to-width",adName:e,data:{width:i}};setTimeout(function(){t.top.Tarnhelm&&window.top.Tarnhelm.triggerGlobalAction&&t.top.Tarnhelm.triggerGlobalAction(n)},0)}function l(t,e,i){t&&(t.style.position="relative",t.style.overflow="visible",o(t,e,i,"px"))}},{"./slot-util":170}],167:[function(t,e,i){function n(t){return t&&document.location.href.startsWith("https://"+t)}Object.defineProperty(i,"__esModule",{value:!0}),i.getBrowserWidth=function(t){return t.top.document.body.clientWidth},i.isDesktop=function(){return n("www.")},i.isInternetExplorer=function(){var t=(()=>{var t=window.navigator.userAgent,e=t.indexOf("MSIE");return 0<e?parseInt(t.substring(e+5,t.indexOf(".",e))):t.match(/Trident\/7\./)?11:0})();return 0<t&&t<=11},i.isIpad=function(){var t=navigator.userAgent.toLowerCase();return-1<t.indexOf("ipad")||-1<t.indexOf("macintosh")&&"ontouchend"in document},i.isMobile=function(){return n("m.")},i.isSubdomain=n},{}],168:[function(t,e,i){var o;(o=window).imdbads=o.imdbads||{},o.imdbads.SlotManager=(()=>{let i={},n;return{registerSlot:function(t,e){i[t]=e,"rhs"===t&&(e.getClickTracker&&(o.top.getClickTracker=e.getClickTracker),e.uatu)&&(n=e.uatu)},getDefaultUatu:function(){return n},getSlotData:function(t){return i[t]},getSlotClickTracker:function(t,e){return i[t]&&"function"==typeof i[t].getClickTracker?i[t].getClickTracker(e):""},getAllSlotData:function(){return i}}})()},{}],169:[function(t,e,i){Object.defineProperty(i,"__esModule",{value:!0}),i.default=i.TOP_AD_SLOT_NAME=i.SIS_PIXEL_SLOT_NAME=i.PROVIDER_PROMOTION_NAME=i.PROMOTED_WATCH_BAR_NAME=i.MEDIAVIEWER_BANNER_SLOT_NAME=i.INTERSTITIAL_SLOT_NAME=i.INLINEBOTTOM_SLOT_NAME=i.INLINE80_SLOT_NAME=i.INLINE60_SLOT_NAME=i.INLINE50_SLOT_NAME=i.INLINE40_SLOT_NAME=i.INLINE40_SIDEBAR=i.INLINE40_MAIN=i.INLINE20_SLOT_NAME=i.ADHESION_BOTTOM_SLOT_NAME=void 0;i.INLINE20_SLOT_NAME="inline20",i.INLINE40_SLOT_NAME="inline40",i.INLINE40_MAIN="inline40-responsive-main",i.INLINE40_SIDEBAR="inline40-responsive-sidebar",i.INLINE50_SLOT_NAME="inline50",i.INLINE60_SLOT_NAME="inline60",i.INLINE80_SLOT_NAME="inline80",i.INLINEBOTTOM_SLOT_NAME="inlinebottom",i.INTERSTITIAL_SLOT_NAME="interstitial",i.MEDIAVIEWER_BANNER_SLOT_NAME="mediaviewer_banner",i.PROVIDER_PROMOTION_NAME="provider_promotion",i.PROMOTED_WATCH_BAR_NAME="promoted_watch_bar",i.SIS_PIXEL_SLOT_NAME="sis_pixel",i.TOP_AD_SLOT_NAME="top_ad",i.ADHESION_BOTTOM_SLOT_NAME="adhesion_bottom",i.default={INLINE20:"inline20",INLINE40:"inline40",INLINE40_MAIN:"inline40-responsive-main",INLINE40_SIDEBAR:"inline40-responsive-sidebar",INLINE50:"inline50",INLINE60:"inline60",INLINE80:"inline80",INLINEBOTTOM:"inlinebottom",INTERSTITIAL:"interstitial",MEDIAVIEWER_BANNER:"mediaviewer_banner",PROVIDER_PROMOTION:"provider_promotion",PROMOTED_WATCH_BAR:"promoted_watch_bar",SIS_PIXEL:"sis_pixel",TOP_AD:"top_ad",ADHESION_BOTTOM:"adhesion_bottom"}},{}],170:[function(t,e,i){function n(t){return t.frameElement&&t.frameElement.id?t.frameElement.id:"unknown"}function o(t){return n(t)+"_wrapper"}function s(t,e){return t.top.document.getElementById(e)}function r(t,e){return n(t)===e}Object.defineProperty(i,"__esModule",{value:!0}),i.getSlot=function(t){return s(t,n(t))},i.getSlotName=n,i.getSlotWrapper=function(t){return s(t,o(t))},i.getSlotWrapperName=o,i.isInline40=function(t){return r(t,"inline40")},i.isSlot=r},{}],171:[function(t,e,i){function s(t,e){if(t){var i=t.actions;if(i&&i.click&&0<i.click.length)for(var n of i.click)if("open-default-link"===n.actionName)return void function t(e){if(e)if("IMG"===e.tagName||"SPAN"===e.tagName||"P"===e.tagName||"VIDEO"===e.tagName||"DIV"===e.tagName&&0===e.childElementCount)e.classList.add("mrc-btr-creative");else for(var i of e.children)t(i)}(e.querySelector(`[name=${t.name}]`));if(t.children)for(var o of t.children)s(o,e)}}Object.defineProperty(i,"__esModule",{value:!0}),i.tarnhelmAdUtils=void 0;i.tarnhelmAdUtils={markTarnhelmAdForMRC(t,e){s(t,e)}}},{}],172:[function(t,e,i){Object.defineProperty(i,"__esModule",{value:!0}),i.handleTarnhelmBackupImg=function(t){var e=t.tarnhelm_backup||{},i=e.appData||{},n=e.adName||void 0,o=e.trackingConsumer||void 0,s=e.pageBind||!1,r=e.scaleToFull&&(!i.isScalable||(0,b.isMobile)())||!1,a=e.clickThrough||"",d=e.target||"_blank",l=e.responsiveImage||"",u=e.legacyImage||"",c=e.renderWidth||0,h=e.renderHeight||0,p=e.size||"0x0",e=e.resizeWrapperWithOverflowHidden||!1,m=(0,f.shouldShowBackupSupplierResponsive)(t),n=(0,g.showTarnhelmAdCallback)(t,n,i,o,s,r,c,h,l,p,e),i=(0,v.responsiveImageGenerator)(l,u,a,d,c,h,p);o=(0,g.showBackupImageTarnhelmResponsiveCallback)(t,l,u,c,h,p);(0,y.bindBackupImage)(t,m,n,i,function(){"collapsed"!==t.tarnhelm_backup.adState&&((0,_.collapseAd)(t.frameElement),t.tarnhelm_backup.adState="collapsed")},o)};var f=t("./backup-util"),g=t("./tarnhlem-backup-callbacks"),v=t("./img-generator"),_=t("./ad-visibility-util"),y=t("./backup-img"),b=t("./site-util")},{"./ad-visibility-util":121,"./backup-img":134,"./backup-util":135,"./img-generator":148,"./site-util":167,"./tarnhlem-backup-callbacks":173}],173:[function(t,e,i){Object.defineProperty(i,"__esModule",{value:!0}),i.getAppNode=m,i.showBackupImageTarnhelmCallback=a,i.showBackupImageTarnhelmResponsiveCallback=function(e,i,t,n,o,s){return function(t){e&&e.tarnhelm_backup&&"backup"!==e.tarnhelm_backup.adState&&(a(e,t),t=(0,r.getSize)(i,n,o,s),(0,c.scaleIframeToWidth)(e,t.width,t.width,t.height),(0,c.scaleWrapperToWidth)(e,t.width,t.width,t.height),(0,c.centerAd)(e),e.tarnhelm_backup.adState="backup")}},i.showTarnhelmAdCallback=function(t,e,i,n,o,s,r,a,d,l,u){return function(){t&&t.tarnhelm_backup&&"ad"!==t.tarnhelm_backup.adState&&((0,h.uncollapseAd)(t.frameElement),s?((0,c.scaleTarnhelm)(t,e,r,a),(0,p.default)(t)&&setTimeout(function(){(0,c.scaleTarnhelm)(t,e,r,a)},1)):u?(0,c.resizeWrapperWithOverflowHidden)(t,r,a):(0,c.scaleWrapperToWidth)(t,r,r,a),t.top&&t.top.Tarnhelm&&(t.top.Tarnhelm.initAdInstance(m(t),t.frameElement,i,n),o)&&!t.top.Tarnhelm.pageLoadBound&&(t.top.addEventListener("load",function(){parent.Tarnhelm.triggerGlobalAction({actionName:"trigger-action-collection",collectionName:"pageLoad"})}),t.top.Tarnhelm.pageLoadBound=!0),t.tarnhelm_backup.adState="ad")}};var c=t("./scale"),h=t("./ad-visibility-util"),r=t("./img-generator"),p=(i=t("./is-responsive"))&&i.__esModule?i:{default:i};function m(t){return t.document.querySelector(".app")}function a(t,e){m(t).innerHTML=e}},{"./ad-visibility-util":121,"./img-generator":148,"./is-responsive":151,"./scale":166}],174:[function(t,e,i){document.getElementsByTagName("html")[0].className+=" scriptsOn"},{}]},{},[139]);