"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6606],{47131:function(e,t,a){var i=a(52322),s=a(72779),r=a.n(s);a(2784);var n=a(53665),d=a(19596),o=a(88169),l=a(86704),c=a(31885),f=a(11438),p=a(14438),g=a(37179),u=a(71321);t.Z=e=>{let t,a,s,{listId:d,listName:o,onSelect:l,resultUrl:x,status:y,className:T}=e,C=(0,n.Z)(),b=(0,p.EO)(),{triggerExport:I}=(0,u.uC)({listId:d,showSuccessSnack:!0,refSuffix:[f.Cd.EXPORT_CARD,f.Cd.RETRY]}),S="",j="";switch(y){case c.UoV.Ready:S=C.formatMessage({id:"export_ready_aria",defaultMessage:"Start download for {listName}."},{listName:o}),a="accent2",t="file-download",j=C.formatMessage({id:"export_ready",defaultMessage:"Ready"}),s=()=>{x&&(b({pageAction:g.QJ.DOWNLOAD_EXPORT,refMarkerSuffix:f.Cd.EXPORT_CARD}),window.location.href=x)};break;case c.UoV.Processing:j=C.formatMessage({id:"export_in_progress",defaultMessage:"In progress"}),a="textSecondary",t="downloading";break;default:S=C.formatMessage({id:"export_failed_aria",defaultMessage:"Retry export for {listName}."},{listName:o}),a="accent3",t="refresh",j=C.formatMessage({id:"export_failed",defaultMessage:"Failed"}),s=()=>{I()}}return(0,i.jsx)(m,{ariaLabel:S,className:r()(y,T),"data-testid":"export-status-button",onColor:a,disabled:y===c.UoV.Processing,onSelect:l??s,postIcon:t,children:(0,i.jsx)(h,{children:j})})};let m=(0,d.default)(o.TextButton).withConfig({componentId:"sc-9380de62-0"})(["&.","{&:hover{cursor:default;}}svg{height:1.25rem;width:1.25rem;}"],c.UoV.Processing),h=d.default.span.withConfig({componentId:"sc-9380de62-1"})(["margin-right:",";"],l.spacing.xxs)},36606:function(e,t,a){a.d(t,{v:function(){return eP}});var i=a(52322),s=a(2784),r=a(53665),n=a(19596),d=a(88169),o=a(86704),l=a(6221),c=a(91359),f=a(66724),p=a(11438),g=a(14438),u=a(37179),m=a(6935);let h=e=>{let{listItems:t}=e,a=(0,r.Z)(),{titleMainLinkBuilder:n}=(0,f.WOb)(),[o,h]=(0,s.useState)(void 0),x=(0,g.EO)();if(!t.length)return null;let b=t[o??0],I=(0,m.K0)({height:b.primaryImage?.height,width:b.primaryImage?.width,url:b.primaryImage?.url},b.primaryImage?.caption??"");return(0,i.jsxs)(T,{"data-testid":"prt-parent",children:[(0,i.jsx)(d.Title,{className:"prt-title",description:a.formatMessage({id:"pickRandomTitle_description",defaultMessage:"Randomly pick something from this list"}),padding:"none",children:a.formatMessage({id:"pickRandomTitle_title",defaultMessage:"What should I watch?"})}),void 0!==o&&(0,i.jsxs)(C,{children:[(0,i.jsx)(d.Poster,{ariaLabel:a.formatMessage(c.F.GO_TO,{target:b.titleText}),className:"prt-poster",href:n({tconst:b.titleId,refSuffix:p.Cd.EMPTY}),dynamicWidth:!0,imageProps:{imageModel:I,imageType:b.titleType.id,size:"m"}}),(0,i.jsx)(l.ZP,{className:"prt-selected-item-metadata",index:o,listItem:b,selectorPrefix:"prt",showItemNumbersInConstText:!1})]}),(0,i.jsx)(d.Button,{ariaLabel:a.formatMessage({id:"pickRandomTitle_pick_new_item",defaultMessage:"Pick a new item"}),"data-testid":"prt-btn",onSelect:()=>{let e=y(t.length);for(;t.length>1&&e===o;)e=y(t.length);h(e),x({pageAction:u.QJ.RANDOM_NUMBER_GENERATOR,refMarkerSuffix:p.Cd.EMPTY})},children:a.formatMessage({id:"pickRandomTitle_pick_new_item",defaultMessage:"Pick a new item"})})]})};var x=e=>(0,i.jsx)(p.xm,{value:p.Cd.PICK_RANDOM_TITLE,children:(0,i.jsx)(h,{...e})});let y=e=>Math.floor(Math.random()*e),T=n.default.div.withConfig({componentId:"sc-81204a58-0"})(["display:flex;flex-direction:column;gap:",";padding:0 ",";.prt-title{margin:0;}.prt-poster{display:flex;flex-shrink:0;margin-right:",";width:4.5rem;}"],o.spacing.m,(0,o.getSpacingVar)("ipt-pageMargin"),o.spacing.xs),C=n.default.div.withConfig({componentId:"sc-81204a58-1"})(["display:flex;flex-direction:row;align-items:center;"]);var b=a(10105),I=a(11947);let S="yhr-checkbox",j={id:"common_youHaveRated_title",defaultMessage:"You have rated"},M={id:"common_youHaveRated_hideMessaging",defaultMessage:"Hide titles you've rated"},E=e=>{let{ratedTitleCount:t,totalTitleCount:a,shouldHideRatedTitles:s,onChangeRatedVisibility:n}=e,d=(0,r.Z)(),o=d.formatMessage(j),l=d.formatMessage(M),c=(0,g.EO)();return(0,i.jsxs)(R,{"data-testid":"yhr-container",children:[(0,i.jsx)(v,{className:"yhr-title",children:o}),(0,i.jsxs)("span",{children:[(0,i.jsx)(w,{className:"yhr-rated-amount",children:(0,i.jsx)(I.A,{value:t})}),(0,i.jsxs)(N,{className:"yhr-size-and-percent",children:["/",(0,i.jsx)(I.A,{value:a})," (",(0,i.jsx)(I.A,{maximumFractionDigits:0,style:"percent",unit:"percent",value:t/a}),")"]}),(0,i.jsx)(_,{checked:s,className:S,iconActiveColor:"accent2",id:S,"data-testid":S,label:l,onChange:e=>{n(e),e?c({pageAction:"hide-rated-titles",refMarkerSuffix:p.Cd.RATING}):c({pageAction:"show-rated-titles",refMarkerSuffix:p.Cd.RATING})}})]})]})},_=(0,n.default)(d.CheckBox).withConfig({componentId:"sc-d8f8b55e-0"})(["margin-left:-1rem;"]),w=n.default.span.withConfig({componentId:"sc-d8f8b55e-1"})(["",";font-size:1.5rem;"],(0,o.setPropertyToColorVar)("color","ipt-on-base-accent4-color")),N=n.default.span.withConfig({componentId:"sc-d8f8b55e-2"})(["",";font-size:1.25rem;"],(0,o.setPropertyToColorVar)("color","ipt-on-base-textSecondary-color")),R=n.default.div.withConfig({componentId:"sc-d8f8b55e-3"})(["display:flex;flex-direction:column;margin-bottom:",";min-height:9rem;"," ",""],o.spacing.l,(0,o.setPropertyToSpacingVar)("margin-left","ipt-pageMargin"),(0,o.setPropertyToSpacingVar)("margin-right","ipt-pageMargin")),v=(0,n.default)(d.Title).withConfig({componentId:"sc-d8f8b55e-4"})(["padding:0;margin:"," 0;"],o.spacing.l);var P=a(84314),k=a(4363),L=a(55634),O=a(59002),D=a(93184),A=a(30382),U=a.n(A);let z=U()`
    query YouHaveRatedFromList($listId: ID!) {
        ratedCount: advancedTitleSearch(
            first: 0
            constraints: {
                myRatingConstraint: { filterType: INCLUDE }
                listConstraint: { inAnyList: [$listId] }
            }
        ) {
            total
        }
        notRatedCount: advancedTitleSearch(
            first: 0
            constraints: {
                myRatingConstraint: { filterType: EXCLUDE }
                listConstraint: { inAnyList: [$listId] }
            }
        ) {
            total
        }
    }
`,G=e=>{let{listId:t,shouldHideRatedTitles:a,onChangeRatedVisibility:s,csmOnLoadHandler:r,csaOnLoadHandler:n,cel_widget_id:d,className:o}=e,l=(0,P.n)(),[c]=(0,k.E)({query:z,variables:{listId:t},context:{serverSideCacheable:!1,personalized:!0},pause:!l});if((0,O.LQ)(c,r,n),!l||c.error)return null;if(c.fetching)return(0,i.jsx)(b.ZP,{height:D.fY});let f=c.data?.ratedCount?.total,p=c.data?.notRatedCount?.total;return f&&p?(0,i.jsx)(O.Lz,{componentId:L.NG.YouHaveRated,children:(0,i.jsx)(W,{baseColor:"none",topPadding:"none",bottomPadding:"none",cel_widget_id:d,"data-testid":d,className:o,children:(0,i.jsx)(E,{ratedTitleCount:f,totalTitleCount:f+p,shouldHideRatedTitles:a,onChangeRatedVisibility:s})})}):null},W=(0,n.default)(d.PageSection).withConfig({componentId:"sc-cb5657d2-0"})([""]);var K=a(14865),Z=a(45455),H=a.n(Z),$=a(31885),q=a(23906),V=a(47131),F=a(30952),Y=a(3322),B=a(96459);let J=U()`
    fragment ExportPreviewCard on ExportDetail {
        startedOn
        totalExportedObjects
        status {
            id
        }
        resultUrl
        expiresOn
        exportType
        ... on ListExportDetail {
            listExportMetadata {
                id
                authorNickname
                listClassId
                listType
                name
            }
        }
    }
`,Q=e=>{let t,a,s,{exportData:n,index:d,className:o}=e,l=(0,r.Z)(),c=(0,q.wL)("ExportPreviewCard"),{exportsLinkBuilder:g}=(0,f.WOb)();if(n.exportType===$.tM1.List){let e=n.listExportMetadata;if(!e)return null;t=e.name,e.listClassId===$.JQJ.WatchList?t=l.formatMessage({id:"export_title_watchlist",defaultMessage:"{authorName}'s Watchlist"},{authorName:e.authorNickname}):e.listClassId===$.JQJ.CheckIns&&(t=l.formatMessage({id:"export_title_checkins",defaultMessage:"{authorName}'s Check-Ins"},{authorName:e.authorNickname})),a=e.id,s=e.listType}else{if(n.exportType!==$.tM1.Ratings)return c.error(`Failed to render ExportPreviewCard of unrecognized export type: ${n.exportType}`),null;t=l.formatMessage(F.JP),a=F.oe,s=$.lZo.Titles}return(0,i.jsx)(Y.Ok,{borderType:"line",className:o,"data-testid":`export-preview-card-${a}`,children:(0,i.jsxs)(ee,{children:[(0,i.jsx)(Y.dy,{href:g({refSuffix:{t:p.Cd.CARD,n:d}}),children:(0,i.jsxs)(Y.lU,{children:[(0,i.jsx)(Y.Gv,{className:"listName",children:t}),(0,i.jsx)(B.l,{displayDate:n.expiresOn,displayDateStringId:F.Vy,itemCount:n.totalExportedObjects||void 0,itemType:F.wK[s]})]})}),(0,i.jsx)(X,{listId:a,listName:t,resultUrl:n.resultUrl,status:n.status.id??$.UoV.Failed})]})})},X=(0,n.default)(V.Z).withConfig({componentId:"sc-84ff7f0b-0"})(["flex:0 0 auto;"]),ee=n.default.div.withConfig({componentId:"sc-84ff7f0b-1"})(["display:flex;justify-content:space-between;"]);var et=a(270);let ea=U()`
    query YourExports($first: Int!) {
        getExports(
            first: $first
            input: { exportTypes: [LIST, RATINGS] }
            sort: { by: STARTED_ON, order: DESC }
        ) {
            edges {
                node {
                    ...ExportPreviewCard
                }
            }
        }
    }
    ${J}
`,ei=e=>{let{exportsLinkBuilder:t}=(0,f.WOb)(),a=e=>{let t=e?.getExports.edges;return!t||H()(t)?[]:t?.map((e,t)=>i.jsx(Q,{exportData:e.node,index:t+1},`sidebar-exports-item-${t}`))};return(0,i.jsx)(O.Lz,{componentId:L.NG.YourExports,children:(0,i.jsx)(et.i,{id:"exports",showCreateListLink:!1,queryOptions:{query:ea,variables:{first:D.kg},context:{serverSideCacheable:!1,personalized:!0,emitMetrics:{noData:(e,t)=>H()(t?.getExports.edges)}},pause:(0,K.getIsNode)()},titleString:D.se,titleHref:t({refSuffix:p.Cd.SIDEBAR}),queryToCardTransform:e=>a(e),queryTransform:()=>[],...e})})};var es=a(66456),er=a(58656);let en=e=>{let t=(0,es.I)(),{userListsLinkBuilder:a}=(0,f.WOb)();return t?(0,i.jsx)(O.Lz,{componentId:L.NG.YourLists,children:(0,i.jsx)(et.i,{id:"your",titleString:D.YU,titleHref:a({urconst:t,refSuffix:p.Cd.EMPTY}),showCreateListLink:!0,useLastModifiedDate:!0,queryOptions:{query:er.O_,variables:{first:D.in},context:{serverSideCacheable:!1,personalized:!0},pause:(0,K.getIsNode)()},queryTransform:e=>e.lists.edges,...e})}):null};var ed=a(87801);let eo=e=>{let{checkinsData:t}=e,a=(0,r.Z)(),s=(0,es.I)(),{listCheckinsLinkBuilder:n,userCheckinsLinkBuilder:d}=(0,f.WOb)(),o=a.formatMessage(D.uw),l=(0,m.K0)(t?.primaryImage?.image,o),c=s?d({urconst:s,refSuffix:ed.C.SEE_MORE}):n({refSuffix:ed.C.SEE_MORE});return(0,i.jsx)(Y.Ok,{borderType:"line",children:(0,i.jsx)(Y.dy,{href:c,children:(0,i.jsxs)(Y.CC,{children:[(0,i.jsxs)(Y.lU,{subtext:!0,children:[(0,i.jsx)(Y.Gv,{className:"listName",children:o}),(0,i.jsx)(B.l,{displayDateStringId:D.$B,displayDate:t?.lastModifiedDate,itemCount:t?.items?.total,itemType:F.wK.TITLES,fallbackMessage:D.cj})]}),(0,i.jsx)(el,{children:(0,i.jsx)(ec,{className:"poster",size:"xs",imageModel:l,imageType:"movie"})})]})})})},el=n.default.div.withConfig({componentId:"sc-30f365ff-0"})(["padding:",";"],o.spacing.xxs),ec=(0,n.default)(d.PosterImage).withConfig({componentId:"sc-30f365ff-1"})(["height:100%;"]),ef=e=>{let{ratingsData:t}=e,a=(0,r.Z)(),s=(0,es.I)(),{listRatingsLinkBuilder:n,userRatingsLinkBuilder:d}=(0,f.WOb)(),o=a.formatMessage(D.tu),l=(0,m.K0)(t?.edges[0]?.node?.title.primaryImage,o),c=s?d({urconst:s,refSuffix:ed.C.SEE_MORE}):n({refSuffix:ed.C.SEE_MORE});return(0,i.jsx)(Y.Ok,{borderType:"line",children:(0,i.jsx)(Y.dy,{href:c,children:(0,i.jsxs)(Y.CC,{children:[(0,i.jsxs)(Y.lU,{subtext:!0,children:[(0,i.jsx)(Y.Gv,{className:"listName",children:o}),(0,i.jsx)(B.l,{displayDateStringId:D.$B,displayDate:t?.edges[0]?.node?.title?.userRating?.date,itemCount:t?.total,itemType:F.wK.TITLES,fallbackMessage:D.dx})]}),(0,i.jsx)(ep,{children:(0,i.jsx)(eg,{className:"poster",size:"xs",imageModel:l,imageType:"movie"})})]})})})},ep=n.default.div.withConfig({componentId:"sc-ead3b46f-0"})(["padding:",";"],o.spacing.xxs),eg=(0,n.default)(d.PosterImage).withConfig({componentId:"sc-ead3b46f-1"})(["height:100%;"]),eu=e=>{let{watchHistoryData:t}=e,a=(0,r.Z)(),s=(0,es.I)(),{listWatchHistoryLinkBuilder:n,userWatchHistoryLinkBuilder:d}=(0,f.WOb)(),o=a.formatMessage(D.vc),l=(0,m.K0)(t?.edges[0]?.node?.title.primaryImage,o),c=s?d({urconst:s,refSuffix:p.Cd.SEE_MORE}):n({refSuffix:p.Cd.SEE_MORE});return(0,i.jsx)(Y.Ok,{borderType:"line",children:(0,i.jsx)(Y.dy,{href:c,children:(0,i.jsxs)(Y.CC,{children:[(0,i.jsxs)(Y.lU,{subtext:!0,children:[(0,i.jsx)(Y.Gv,{className:"listName",children:o}),(0,i.jsx)(B.l,{displayDateStringId:D.$B,displayDate:t?.edges[0]?.node?.watchedStatus.firstWatched,itemCount:t?.total,itemType:F.wK.TITLES,fallbackMessage:D.KG})]}),(0,i.jsx)(em,{children:(0,i.jsx)(eh,{className:"poster",size:"xs",imageModel:l,imageType:"movie"})})]})})})},em=n.default.div.withConfig({componentId:"sc-b9aefc98-0"})(["padding:",";"],o.spacing.xxs),eh=(0,n.default)(d.PosterImage).withConfig({componentId:"sc-b9aefc98-1"})(["height:100%;"]),ex=e=>{let{watchlistData:t}=e,a=(0,r.Z)(),s=(0,es.I)(),{listWatchlistLinkBuilder:n,userWatchlistLinkBuilder:d}=(0,f.WOb)(),o=a.formatMessage(D.Qq),l=(0,m.K0)(t?.primaryImage?.image,o),c=s?d({urconst:s,refSuffix:p.Cd.SEE_MORE}):n({refSuffix:p.Cd.SEE_MORE});return(0,i.jsx)(Y.Ok,{borderType:"line",children:(0,i.jsx)(Y.dy,{href:c,children:(0,i.jsxs)(Y.CC,{children:[(0,i.jsxs)(Y.lU,{subtext:!0,children:[(0,i.jsx)(Y.Gv,{className:"listName",children:o}),(0,i.jsx)(B.l,{displayDateStringId:D.$B,displayDate:t?.lastModifiedDate,itemCount:t?.items?.total,itemType:F.wK.TITLES,fallbackMessage:D.n7})]}),(0,i.jsx)(ey,{children:(0,i.jsx)(eT,{className:"poster",size:"xs",imageModel:l,imageType:"movie"})})]})})})},ey=n.default.div.withConfig({componentId:"sc-60ee3dc4-0"})(["padding:",";"],o.spacing.xxs),eT=(0,n.default)(d.PosterImage).withConfig({componentId:"sc-60ee3dc4-1"})(["height:100%;"]),eC=e=>{if(!(0,P.n)())return null;let t=e=>[(0,i.jsx)(eo,{checkinsData:e?.checkins},"sidebar-predefined-checkins"),(0,i.jsx)(ef,{ratingsData:e?.ratings},"sidebar-predefined-ratings"),(0,i.jsx)(ex,{watchlistData:e?.watchlist},"sidebar-predefined-watchlist"),(0,i.jsx)(eu,{watchHistoryData:e?.watchHistory},"sidebar-predefined-watchhistory")];return(0,i.jsx)(O.Lz,{componentId:L.NG.YourPredefinedLists,children:(0,i.jsx)(et.i,{id:"predefined",showCreateListLink:!1,useLastModifiedDate:!0,queryOptions:{query:er.L8,context:{serverSideCacheable:!1,personalized:!0},pause:(0,K.getIsNode)()},queryToCardTransform:e=>t(e),queryTransform:()=>[],...e})})};var eb=a(47521),eI=a(25436),eS=a(86528),ej=a(49996),eM=a(49624),eE=a(83163),e_=a(48687),ew=a(9028);let eN={id:"list_sidebar_feedback_heading",defaultMessage:"Feedback"},eR={id:"list_sidebar_feedback_link",defaultMessage:"Tell us what you think about this feature."},ev={id:"list_sidebar_feedback_report",defaultMessage:"Report this list"},eP=e=>{let{isListOwner:t,listType:a,myRatingsFilterProps:s,titleListItems:n}=e,o=(0,r.Z)(),{pageType:l,subPageType:c,pageConst:f}=(0,ej.y)(),{value:g}=(0,p.Lz)(),u=t&&l===eI.PageType.USER&&c===eI.SubPageType.LISTS,m=a===$.lZo.Titles&&!!f&&l===eI.PageType.LIST&&c===eI.SubPageType.MAIN,h=(0,e_.hg)({weblabID:eE.lh.IMDB_PICK_RANDOM_TITLE_916019,treatments:{T1:!0}})&&a===$.lZo.Titles&&n&&n.length>1&&[eI.SubPageType.CHECKINS,eI.SubPageType.RATINGS,eI.SubPageType.WATCHLIST,eI.SubPageType.MAIN].includes(c)&&(!t||c!==eI.SubPageType.CHECKINS)&&(!t||c!==eI.SubPageType.RATINGS),y=l===eI.PageType.USER&&c in[eI.SubPageType.CHECKINS,eI.SubPageType.RATINGS,eI.SubPageType.WATCHLIST],T=`https://help.imdb.com/article/imdb/general-information/getsatisfaction-community-access-you-re-about-to-leave-imdb-com/GP4FF3REXES9AR3P?ref_=cons_${g}_lst_fdbk`,C=s?.myRatingsFilterValue===eM.EW.TitlesIDidNotRate;return(0,i.jsx)(eS.Z,{children:(0,i.jsxs)(ek,{children:[m&&(0,i.jsx)(G,{listId:f,shouldHideRatedTitles:C,onChangeRatedVisibility:e=>{s&&s.setMyRatingsFilterValue(e?eM.EW.TitlesIDidNotRate:eM.EW.None)}}),!y&&(0,i.jsx)(eC,{}),!u&&(0,i.jsx)(en,{}),c!==eI.SubPageType.EXPORTS&&(0,i.jsx)(ei,{}),(0,i.jsx)(d.PageSection,{topPadding:"none",bottomPadding:"none",baseColor:"none","data-testid":ew.z7.SIDEBAR_FEEDBACK_FEATURE,children:(0,i.jsxs)(d.ListCard,{borderType:"line",children:[(0,i.jsx)(d.Title,{padding:"none",children:o.formatMessage(eN)}),(0,i.jsx)(d.TextLink,{text:o.formatMessage(eR),href:T}),l===eI.PageType.LIST&&c===eI.SubPageType.MAIN&&!t&&(0,i.jsx)(d.TextLink,{className:"list-sidebar-report-link",href:`https://help.imdb.com/contact?deepLink=list_report&disableLoginPopup=true&list=${f}&ref_=${g}_ttls_rpt`,text:o.formatMessage(ev)})]})}),h&&(0,i.jsx)(x,{listItems:n??[]})]})})},ek=n.default.div.withConfig({componentId:"sc-82b83155-0"})([""," .list-sidebar-report-link{margin-top:",";}"],eb.n,o.spacing.m)}}]);