"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[850],{60582:function(e,t,a){a.d(t,{U:function(){return g}});var r=a(52322),n=a(72779),o=a.n(n),i=a(2784),s=a(19596),c=a(88169),d=a(82925),l=a(86704),u=a(31885);let g=e=>{let{meterRankChange:t,iconType:a="arrow"}=e,{palette:{baseColor:n}}=(0,i.useContext)(d.Theme),s=l.ICONS.DASH,c=l.ICONS.POPULARITY_NEUTRAL,g="flat";return t&&(t.changeDirection===u.UQd.Up?(s=l.ICONS.ARROW_DROP_UP,c=l.ICONS.POPULARITY_UP,g="up"):t.changeDirection===u.UQd.Down&&(s=l.ICONS.ARROW_DROP_DOWN,c=l.ICONS.POPULARITY_DOWN,g="down")),(0,r.jsx)(m,{name:"trend"===a?c:s,className:o()(n,g,a),type:"inline"})},m=(0,s.default)(c.Icon).withConfig({componentId:"sc-65f97cc9-0"})(["font-size:1.6em;&.arrow{&.up,&.down{margin-left:-0.2em;margin-right:-0.2em;}&.flat{font-size:0.8em;margin-left:0.1em;margin-right:0.1em;}}&.base{&.flat{","}&.down{","}&.up{","}}&.baseAlt{&.flat{","}&.down{","}&.up{","}}"],(0,l.setPropertyToColorVar)("color","ipt-on-base-textSecondary-color"),(0,l.setPropertyToColorVar)("color","ipt-on-base-accent3-color"),(0,l.setPropertyToColorVar)("color","ipt-on-base-accent4-color"),(0,l.setPropertyToColorVar)("color","ipt-on-baseAlt-textSecondary-color"),(0,l.setPropertyToColorVar)("color","ipt-on-baseAlt-accent3-color"),(0,l.setPropertyToColorVar)("color","ipt-on-baseAlt-accent4-color"))},15030:function(e,t,a){a.d(t,{x:function(){return c}});var r=a(52322);a(2784);var n=a(53665),o=a(19596),i=a(31885),s=a(60582);let c=e=>{let{difference:t,direction:a,formatOptions:o,...c}=e,l=(0,n.Z)(),u=l.formatMessage({id:"rank_meter_no_change",defaultMessage:"No rank change"});switch(a){case i.UQd.Up:u=l.formatMessage({id:"rank_meter_upward_rank_change",defaultMessage:"Moved up {difference} in ranking"},{difference:t});break;case i.UQd.Down:u=l.formatMessage({id:"rank_meter_downward_rank_change",defaultMessage:"Moved down {difference} in ranking"},{difference:t})}return(0,r.jsxs)(d,{...c,"aria-label":u,children:[(0,r.jsx)(s.U,{meterRankChange:{difference:t||0,changeDirection:a}}),void 0!==t&&l.formatNumber(t,o)]})},d=o.default.span.withConfig({componentId:"sc-15fa49cd-0"})(["display:inline-flex;justify-content:center;align-items:center;color:inherit;overflow:hidden;max-height:1em;"])},40981:function(e,t,a){a.d(t,{Nf:function(){return h},z7:function(){return g}});var r=a(52322),n=a(86704),o=a(72779),i=a.n(o);a(2784);var s=a(53665),c=a(19596),d=a(88169),l=a(94471),u=a(92847);let g={CONTAINER:"ratingGroup--container",IMDB_RATING:"ratingGroup--imdb-rating",OTHER_USER_RATING:"ratingGroup--other-user-rating",PLACEHOLDER:"ratingGroup--placeholder",USER_RATING:"ratingGroup--user-rating"},m="hide-vote-count",f="standalone-star",h=e=>{let{canRate:t,className:a,hideMaxIMDbRating:n,hideVoteCountOnSmallBreakpoints:o,otherUserRating:c,titleId:h,ratingsSummary:p,rateButtonLabel:C,showPlaceholderStarIfApplicable:w,titleText:b,refOverride:M}=e,I=(0,s.Z)(),{rating:S}=(0,d.useRatingsContext)(h)||{},R=(0,l.P)(S,"user"),A=(0,l.P)(p?.aggregateRating,"imdb"),k=(0,l.P)(c,"user"),x=I.formatMessage({id:"common_ariaLabels_IMDbRating",defaultMessage:"IMDb rating: {rating}"},{rating:A||""}),N=I.formatMessage({id:"common_ariaLabels_other_user_rating",defaultMessage:"User rating: {value}"},{value:c}),v=I.formatMessage({id:"common_ariaLabels_ratingButtonRated",defaultMessage:"Your rating: {rating}"},{rating:R||""}),y=I.formatMessage({id:"common_ariaLabels_ratingButtonUnrated",defaultMessage:"Rate {titleName}"},{titleName:b}),W=I.formatMessage({id:"common_ratingPrompt_rate",defaultMessage:"Rate"}),L=p?.voteCount?I.formatNumber(p?.voteCount,{notation:"compact",compactDisplay:"short"}):void 0,E=w&&!A&&!(t&&b);return(0,r.jsxs)(_,{className:a,"data-testid":g.CONTAINER,children:[!!A&&(0,r.jsx)(d.RatingStar,{"data-testid":g.IMDB_RATING,ariaLabel:x,className:g.IMDB_RATING,formattedRating:A,maxRating:n?void 0:10,formattedVoteCount:L,voteCountClassName:o?m:""}),!!c&&(0,r.jsx)(d.RatingStar,{ariaLabel:N,className:g.OTHER_USER_RATING,"data-testid":g.OTHER_USER_RATING,formattedRating:k,type:"otherUser"}),!!t&&!!b&&(0,r.jsx)(u.T,{title:{id:h,titleText:b,canRate:t},refOverride:M,ratingTriggerComponent:e=>{let{onUserRatingClick:t}=e;return(0,r.jsx)(T,{ariaLabelRated:v,ariaLabelUnrated:y,formattedRating:R,className:i()(g.USER_RATING,{[f]:!A}),onClick:t,rateLabel:"string"==typeof C?C:W})}}),!!E&&(0,r.jsx)(d.RatingStar,{"data-testid":g.PLACEHOLDER,"aria-hidden":!0,className:i()(g.PLACEHOLDER,f),type:"placeholder"})]})},_=c.default.div.withConfig({componentId:"sc-17ce9e4b-0"})(["align-items:center;display:inline-flex;flex-flow:row wrap;flex-direction:row;gap:0 ",";.","{padding:0;min-width:0;}.","{","{display:none;}}"],n.spacing.xs,f,m,n.mediaQueries.breakpoints.below.m),T=(0,c.default)(d.RateButton).withConfig({componentId:"sc-17ce9e4b-1"})(["font-size:inherit;height:fit-content;padding:0;"])},57708:function(e,t,a){a.d(t,{$:function(){return h}});var r=a(52322);a(2784);var n=a(53665),o=a(19596),i=a(88169),s=a(86704),c=a(22619),d=a(88905),l=a(84314),u=a(66456),g=a(11438),m=a(14438),f=a(43986);let h=e=>{let{titleId:t,titleText:a,className:o}=e,i=(0,c.V)(e=>!!e.watchedTitles[t]),{sendMarkTitleAsWatched:h,sendMarkTitleAsUnwatched:T}=(0,d.b)(),p=(0,n.Z)(),C=(0,l.n)(),w=(0,u.I)(),{value:b}=(0,g.Lz)(),M=(0,m.EO)(),I=e=>{M({pageAction:`${e}-${t}`,refMarkerString:b,customPageMetadata:{id:w}})},S=p.formatMessage(f.TY.watchedButton),R=p.formatMessage(f.TY.markWatchedButton),A=p.formatMessage(f.TY.watchedButtonArialLabel,{titleName:a}),k=p.formatMessage(f.TY.markWatchedButtonAriaLabel,{titleName:a}),x=i?s.ICONS.VISIBILITY_FILLED:s.ICONS.VISIBILITY;return(0,r.jsx)(g.xm,{value:g.Cd.WATCHED,children:(0,r.jsx)(_,{alignContent:"left",ariaLabel:i?A:k,"aria-pressed":i,"data-testid":`inline-watched-button-${t}`,disableIconMargins:!0,onClick:()=>{i?(I(`${f.zq.removeFromWatchedPrefix}`),T(t)):(C?I(`${f.zq.addToWatchedPrefix}`):I(`${f.zq.loggedOutPrefix}`),h(t))},preIcon:x,preIconClassName:f.kA.WATCHED_BUTTON_ICON_CLASSNAME,width:"half-padding",className:o,children:i?S:R})})},_=(0,o.default)(i.TextButton).withConfig({componentId:"sc-43529d24-0"})(["",";.","{width:1rem;margin-right:0.25rem;}"],(0,s.setTypographyType)("bodySmall"),f.kA.WATCHED_BUTTON_ICON_CLASSNAME)},43986:function(e,t,a){a.d(t,{TY:function(){return o},kA:function(){return r},z7:function(){return n},zq:function(){return i}});let r={HIDE_WATCHED_TOGGLE_ID:"hide-watched-toggle",WATCHED_BUTTON_ICON_CLASSNAME:"watched-button--icon"},n={WATCHED_PROGRESS_TEST_ID:"watched-progress-text-wrapper"},o={watchedProgress:{id:"common_watchedProgress_title",defaultMessage:"{currentNumber} OF {totalNumber} WATCHED"},watchedButton:{id:"common_watchedButton_text",defaultMessage:"Watched"},markWatchedButton:{id:"common_markWatchedButton_text",defaultMessage:"Mark as watched"},watchedButtonArialLabel:{id:"common_ariaLabels_watchedButton",defaultMessage:"Watched {titleName}"},markWatchedButtonAriaLabel:{id:"common_ariaLabels_markWatchedButton",defaultMessage:"Mark {titleName} as watched"},watchedButtonLoadingAriaLabel:{id:"common_ariaLabel_loading",defaultMessage:"Loading"},hideTitles:{id:"common_youHaveWatched_hideMessaging",defaultMessage:"Hide watched titles"},addWatchedSuccess:{id:"common_watchedSnackbar_addWatchedSuccess",defaultMessage:"Added to your watch history"},removeWatchedSuccess:{id:"common_watchedSnackbar_removeWatchedSuccess",defaultMessage:"Removed from your watch history"},seeWatchHistory:{id:"common_watchedSnackbar_seeWatchHistory",defaultMessage:"See watch history"},genericError:{id:"confirmation_info_try_again",defaultMessage:"Sorry, something went wrong, please try again"},seeRatings:{id:"common_watchedSnackbar_seeRatingsText",defaultMessage:"See ratings"},seeCheckins:{id:"common_watchedSnackbar_seeCheckinsText",defaultMessage:"See check-ins"},seeReview:{id:"common_watchedSnackbar_seeReviewText",defaultMessage:"See review"},snackShortcutHelper:{id:"common_snack_shortcut",defaultMessage:"{message}. To interact with this alert, use the keyboard shortcut alt + S"},closeLabel:{id:"common_buttons_close",defaultMessage:"Close"}},i={addToWatchedPrefix:"wtchd-add",removeFromWatchedPrefix:"wtchd-del",loggedOutPrefix:"tmp-wtchd",snackBarClosePrefix:"wtchd-snck-close"}},88905:function(e,t,a){a.d(t,{b:function(){return I}});var r=a(30382),n=a.n(r),o=a(54073),i=a.n(o),s=a(2784),c=a(53665),d=a(68385),l=a(43986),u=a(31885),g=a(17503),m=a(41174),f=a(66456),h=a(66724),_=a(11438),T=a(14438),p=a(22619);let C=n()`
    mutation AddWatchedTitle($titleId: ID!) {
        addWatchedTitle(titleId: $titleId) {
            message {
                language
                value
            }
            success
        }
    }
`,w=n()`
    mutation RemoveWatchedTitle($titleId: ID!) {
        removeWatchedTitle(titleId: $titleId) {
            message {
                language
                value
            }
            remainingWatchedSourceTypes
            remainingReview {
                id
            }
            success
        }
    }
`,b=p.V.getState().addToWatchedTitles,M=p.V.getState().removeFromWatchedTitles,I=()=>{let{sendSnack:e}=(0,d.useSnackbar)(),t=(0,f.I)()??"",a=(0,c.Z)(),r=(0,m.nu)(),{value:n}=(0,_.Lz)(),o=(0,T.EO)(),{reviewSingleLinkBuilder:p,userCheckinsLinkBuilder:I,userRatingsLinkBuilder:S,userReviewsLinkBuilder:R,userWatchHistoryLinkBuilder:A}=(0,h.WOb)(),[{fetching:k},x]=(0,g.Z)(C,{requireAuth:!0}),[{fetching:N},v]=(0,g.Z)(w,{requireAuth:!0}),y=a.formatMessage(l.TY.addWatchedSuccess),W=a.formatMessage(l.TY.removeWatchedSuccess),L=a.formatMessage(l.TY.genericError),E=a.formatMessage(l.TY.seeWatchHistory),O=a.formatMessage(l.TY.seeCheckins),D=a.formatMessage(l.TY.seeRatings),P=a.formatMessage(l.TY.seeReview),B=a.formatMessage(l.TY.closeLabel),H=async n=>{r&&b(n);let o=await x({titleId:n});if(void 0!==o){if(o?.error||o?.data?.addWatchedTitle?.success===!1)e({type:"auto",baseColor:"accent3",primaryText:L}),r&&M(n);else{let r=a.formatMessage(l.TY.snackShortcutHelper,{message:y});e({type:"auto",baseColor:"base",display:"stacked",textButtons:[{href:A({urconst:t,refSuffix:{t:_.Cd.WATCHED,n:1}}),text:E}],primaryText:y,alertText:r})}}},U=async r=>{let i=await v({titleId:r}),{message:s,remainingReview:c,remainingWatchedSourceTypes:d=[]}=i?.data?.removeWatchedTitle??{},u=s?.value,g=c?.id,m=d.reduce((e,t)=>{let a=Y(t,g);return void 0!==a&&e.push(a),e},[]);if(i?.error||d.length&&!m.length){e({type:"auto",baseColor:"accent3",primaryText:L});return}if(d.length&&m.length){let i=a.formatMessage(l.TY.snackShortcutHelper,{message:u});e({type:"manual",baseColor:"base",display:"stacked",buttonsDisplay:m.length>1?"stacked":"inline",onClose:()=>{o({customPageMetadata:{id:t},pageAction:`${l.zq.snackBarClosePrefix}-${r}`,refMarkerString:n})},closeLabel:B,primaryText:u,textButtons:m,alertText:i});return}e({type:"auto",baseColor:"base",primaryText:W}),M(r)},Y=(e,a)=>{switch(e){case u.qcL.Rating:return{href:S({urconst:t,refSuffix:{t:_.Cd.WATCHED,n:1}}),text:D};case u.qcL.Checkin:return{href:I({urconst:t,refSuffix:{t:_.Cd.WATCHED,n:1}}),text:O};case u.qcL.Review:if(!a)return{href:R({urconst:t,refSuffix:{t:_.Cd.WATCHED,n:1}}),text:P};return{href:p({rwconst:a,refSuffix:{t:_.Cd.WATCHED,n:1}}),text:P}}},G=(0,s.useCallback)((e,t)=>{var a;return(a={updatedState:t,titleId:e}).updatedState?H(a.titleId):U(a.titleId)},[]),j=(0,s.useCallback)(i()(G,750,{leading:!0,trailing:!1}),[G]);return{isFetching:k||N,sendMarkTitleAsWatched:e=>j(e,!0),sendMarkTitleAsUnwatched:e=>j(e,!1)}}},11947:function(e,t,a){a.d(t,{A:function(){return o}});var r=a(52322);a(2784);var n=a(81999);let o=e=>(0,r.jsx)(n.BK,{...e})},66456:function(e,t,a){a.d(t,{I:function(){return n}});var r=a(86958);let n=()=>r.B().context.sidecar?.account.userId}}]);